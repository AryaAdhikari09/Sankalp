function Mk(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var v0={exports:{}},Xl={},g0={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),Dk=Symbol.for("react.portal"),Nk=Symbol.for("react.fragment"),jk=Symbol.for("react.strict_mode"),zk=Symbol.for("react.profiler"),Lk=Symbol.for("react.provider"),xk=Symbol.for("react.context"),qk=Symbol.for("react.forward_ref"),Bk=Symbol.for("react.suspense"),Fk=Symbol.for("react.memo"),Uk=Symbol.for("react.lazy"),Jy=Symbol.iterator;function Vk(e){return e===null||typeof e!="object"?null:(e=Jy&&e[Jy]||e["@@iterator"],typeof e=="function"?e:null)}var m0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y0=Object.assign,S0={};function Gi(e,t,r){this.props=e,this.context=t,this.refs=S0,this.updater=r||m0}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function C0(){}C0.prototype=Gi.prototype;function _m(e,t,r){this.props=e,this.context=t,this.refs=S0,this.updater=r||m0}var Tm=_m.prototype=new C0;Tm.constructor=_m;y0(Tm,Gi.prototype);Tm.isPureReactComponent=!0;var Qy=Array.isArray,R0=Object.prototype.hasOwnProperty,Im={current:null},P0={key:!0,ref:!0,__self:!0,__source:!0};function E0(e,t,r){var n,i={},o=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)R0.call(t,n)&&!P0.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:gc,type:e,key:o,ref:s,props:i,_owner:Im.current}}function Wk(e,t){return{$$typeof:gc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Am(e){return typeof e=="object"&&e!==null&&e.$$typeof===gc}function $k(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Yy=/\/+/g;function zp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$k(""+e.key):t.toString(36)}function dl(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case gc:case Dk:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+zp(s,0):n,Qy(i)?(r="",e!=null&&(r=e.replace(Yy,"$&/")+"/"),dl(i,t,r,"",function(c){return c})):i!=null&&(Am(i)&&(i=Wk(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Yy,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",Qy(e))for(var a=0;a<e.length;a++){o=e[a];var u=n+zp(o,a);s+=dl(o,t,r,u,i)}else if(u=Vk(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=n+zp(o,a++),s+=dl(o,t,r,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Dc(e,t,r){if(e==null)return e;var n=[],i=0;return dl(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Hk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pt={current:null},hl={transition:null},Kk={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:hl,ReactCurrentOwner:Im};function w0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Dc,forEach:function(e,t,r){Dc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dc(e,function(){t++}),t},toArray:function(e){return Dc(e,function(t){return t})||[]},only:function(e){if(!Am(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Gi;ye.Fragment=Nk;ye.Profiler=zk;ye.PureComponent=_m;ye.StrictMode=jk;ye.Suspense=Bk;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kk;ye.act=w0;ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=y0({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Im.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)R0.call(t,u)&&!P0.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:gc,type:e.type,key:i,ref:o,props:n,_owner:s}};ye.createContext=function(e){return e={$$typeof:xk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lk,_context:e},e.Consumer=e};ye.createElement=E0;ye.createFactory=function(e){var t=E0.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:qk,render:e}};ye.isValidElement=Am;ye.lazy=function(e){return{$$typeof:Uk,_payload:{_status:-1,_result:e},_init:Hk}};ye.memo=function(e,t){return{$$typeof:Fk,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=hl.transition;hl.transition={};try{e()}finally{hl.transition=t}};ye.unstable_act=w0;ye.useCallback=function(e,t){return Pt.current.useCallback(e,t)};ye.useContext=function(e){return Pt.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return Pt.current.useDeferredValue(e)};ye.useEffect=function(e,t){return Pt.current.useEffect(e,t)};ye.useId=function(){return Pt.current.useId()};ye.useImperativeHandle=function(e,t,r){return Pt.current.useImperativeHandle(e,t,r)};ye.useInsertionEffect=function(e,t){return Pt.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return Pt.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return Pt.current.useMemo(e,t)};ye.useReducer=function(e,t,r){return Pt.current.useReducer(e,t,r)};ye.useRef=function(e){return Pt.current.useRef(e)};ye.useState=function(e){return Pt.current.useState(e)};ye.useSyncExternalStore=function(e,t,r){return Pt.current.useSyncExternalStore(e,t,r)};ye.useTransition=function(){return Pt.current.useTransition()};ye.version="18.3.1";g0.exports=ye;var H=g0.exports;const _0=f0(H),Gk=Mk({__proto__:null,default:_0},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=H,Qk=Symbol.for("react.element"),Yk=Symbol.for("react.fragment"),Xk=Object.prototype.hasOwnProperty,Zk=Jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eM={key:!0,ref:!0,__self:!0,__source:!0};function T0(e,t,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)Xk.call(t,n)&&!eM.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Qk,type:e,key:o,ref:s,props:i,_owner:Zk.current}}Xl.Fragment=Yk;Xl.jsx=T0;Xl.jsxs=T0;v0.exports=Xl;var N=v0.exports,Sg={},I0={exports:{}},Ft={},A0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,b){var L=I.length;I.push(b);e:for(;0<L;){var W=L-1>>>1,F=I[W];if(0<i(F,b))I[W]=b,I[L]=F,L=W;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var b=I[0],L=I.pop();if(L!==b){I[0]=L;e:for(var W=0,F=I.length,ie=F>>>1;W<ie;){var J=2*(W+1)-1,Se=I[J],Q=J+1,X=I[Q];if(0>i(Se,L))Q<F&&0>i(X,Se)?(I[W]=X,I[Q]=L,W=Q):(I[W]=Se,I[J]=L,W=J);else if(Q<F&&0>i(X,L))I[W]=X,I[Q]=L,W=Q;else break e}}return b}function i(I,b){var L=I.sortIndex-b.sortIndex;return L!==0?L:I.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],c=[],l=1,p=null,d=3,h=!1,f=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var b=r(c);b!==null;){if(b.callback===null)n(c);else if(b.startTime<=I)n(c),b.sortIndex=b.expirationTime,t(u,b);else break;b=r(c)}}function C(I){if(v=!1,S(I),!f)if(r(u)!==null)f=!0,O(P);else{var b=r(c);b!==null&&z(C,b.startTime-I)}}function P(I,b){f=!1,v&&(v=!1,g(T),T=-1),h=!0;var L=d;try{for(S(b),p=r(u);p!==null&&(!(p.expirationTime>b)||I&&!K());){var W=p.callback;if(typeof W=="function"){p.callback=null,d=p.priorityLevel;var F=W(p.expirationTime<=b);b=e.unstable_now(),typeof F=="function"?p.callback=F:p===r(u)&&n(u),S(b)}else n(u);p=r(u)}if(p!==null)var ie=!0;else{var J=r(c);J!==null&&z(C,J.startTime-b),ie=!1}return ie}finally{p=null,d=L,h=!1}}var E=!1,R=null,T=-1,B=5,q=-1;function K(){return!(e.unstable_now()-q<B)}function D(){if(R!==null){var I=e.unstable_now();q=I;var b=!0;try{b=R(!0,I)}finally{b?_():(E=!1,R=null)}}else E=!1}var _;if(typeof m=="function")_=function(){m(D)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,j=w.port2;w.port1.onmessage=D,_=function(){j.postMessage(null)}}else _=function(){y(D,0)};function O(I){R=I,E||(E=!0,_())}function z(I,b){T=y(function(){I(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){f||h||(f=!0,O(P))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(I){switch(d){case 1:case 2:case 3:var b=3;break;default:b=d}var L=d;d=b;try{return I()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,b){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=d;d=I;try{return b()}finally{d=L}},e.unstable_scheduleCallback=function(I,b,L){var W=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=L+F,I={id:l++,callback:b,priorityLevel:I,startTime:L,expirationTime:F,sortIndex:-1},L>W?(I.sortIndex=L,t(c,I),r(u)===null&&I===r(c)&&(v?(g(T),T=-1):v=!0,z(C,L-W))):(I.sortIndex=F,t(u,I),f||h||(f=!0,O(P))),I},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(I){var b=d;return function(){var L=d;d=b;try{return I.apply(this,arguments)}finally{d=L}}}})(b0);A0.exports=b0;var tM=A0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=H,Bt=tM;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O0=new Set,Yu={};function li(e,t){Bi(e,t),Bi(e+"Capture",t)}function Bi(e,t){for(Yu[e]=t,e=0;e<t.length;e++)O0.add(t[e])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cg=Object.prototype.hasOwnProperty,nM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xy={},Zy={};function iM(e){return Cg.call(Zy,e)?!0:Cg.call(Xy,e)?!1:nM.test(e)?Zy[e]=!0:(Xy[e]=!0,!1)}function oM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sM(e,t,r,n){if(t===null||typeof t>"u"||oM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Et(e,t,r,n,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new Et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new Et(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new Et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new Et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new Et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new Et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pt[e]=new Et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pt[e]=new Et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pt[e]=new Et(e,5,!1,e.toLowerCase(),null,!1,!1)});var bm=/[\-:]([a-z])/g;function Om(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bm,Om);pt[t]=new Et(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bm,Om);pt[t]=new Et(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bm,Om);pt[t]=new Et(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new Et(e,1,!1,e.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pt[e]=new Et(e,1,!1,e.toLowerCase(),null,!0,!0)});function km(e,t,r,n){var i=pt.hasOwnProperty(t)?pt[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sM(t,r,i,n)&&(r=null),n||i===null?iM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fr=rM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nc=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),Pi=Symbol.for("react.fragment"),Mm=Symbol.for("react.strict_mode"),Rg=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),M0=Symbol.for("react.context"),Dm=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),Nm=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),D0=Symbol.for("react.offscreen"),eS=Symbol.iterator;function lo(e){return e===null||typeof e!="object"?null:(e=eS&&e[eS]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Lp;function zu(e){if(Lp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Lp=t&&t[1]||""}return`
`+Lp+e}var xp=!1;function qp(e,t){if(!e||xp)return"";xp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=a);break}}}finally{xp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zu(e):""}function aM(e){switch(e.tag){case 5:return zu(e.type);case 16:return zu("Lazy");case 13:return zu("Suspense");case 19:return zu("SuspenseList");case 0:case 2:case 15:return e=qp(e.type,!1),e;case 11:return e=qp(e.type.render,!1),e;case 1:return e=qp(e.type,!0),e;default:return""}}function wg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pi:return"Fragment";case Ri:return"Portal";case Rg:return"Profiler";case Mm:return"StrictMode";case Pg:return"Suspense";case Eg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case M0:return(e.displayName||"Context")+".Consumer";case k0:return(e._context.displayName||"Context")+".Provider";case Dm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nm:return t=e.displayName||null,t!==null?t:wg(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return wg(e(t))}catch{}}return null}function uM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wg(t);case 8:return t===Mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cM(e){var t=N0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jc(e){e._valueTracker||(e._valueTracker=cM(e))}function j0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=N0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Tl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _g(e,t){var r=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z0(e,t){t=t.checked,t!=null&&km(e,"checked",t,!1)}function Tg(e,t){z0(e,t);var r=gn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ig(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ig(e,t.type,gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ig(e,t,r){(t!=="number"||Tl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Lu=Array.isArray;function Ni(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gn(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ag(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error($(92));if(Lu(r)){if(1<r.length)throw Error($(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gn(r)}}function L0(e,t){var r=gn(t.value),n=gn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function iS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function x0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?x0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zc,q0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zc=zc||document.createElement("div"),zc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lM=["Webkit","ms","Moz","O"];Object.keys(Uu).forEach(function(e){lM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uu[t]=Uu[e]})});function B0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Uu.hasOwnProperty(e)&&Uu[e]?(""+t).trim():t+"px"}function F0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=B0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var pM=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Og(e,t){if(t){if(pM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function kg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=null;function jm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dg=null,ji=null,zi=null;function oS(e){if(e=Sc(e)){if(typeof Dg!="function")throw Error($(280));var t=e.stateNode;t&&(t=np(t),Dg(e.stateNode,e.type,t))}}function U0(e){ji?zi?zi.push(e):zi=[e]:ji=e}function V0(){if(ji){var e=ji,t=zi;if(zi=ji=null,oS(e),t)for(e=0;e<t.length;e++)oS(t[e])}}function W0(e,t){return e(t)}function $0(){}var Bp=!1;function H0(e,t,r){if(Bp)return e(t,r);Bp=!0;try{return W0(e,t,r)}finally{Bp=!1,(ji!==null||zi!==null)&&($0(),V0())}}function Zu(e,t){var r=e.stateNode;if(r===null)return null;var n=np(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error($(231,t,typeof r));return r}var Ng=!1;if(Lr)try{var po={};Object.defineProperty(po,"passive",{get:function(){Ng=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Ng=!1}function dM(e,t,r,n,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(l){this.onError(l)}}var Vu=!1,Il=null,Al=!1,jg=null,hM={onError:function(e){Vu=!0,Il=e}};function fM(e,t,r,n,i,o,s,a,u){Vu=!1,Il=null,dM.apply(hM,arguments)}function vM(e,t,r,n,i,o,s,a,u){if(fM.apply(this,arguments),Vu){if(Vu){var c=Il;Vu=!1,Il=null}else throw Error($(198));Al||(Al=!0,jg=c)}}function pi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function K0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sS(e){if(pi(e)!==e)throw Error($(188))}function gM(e){var t=e.alternate;if(!t){if(t=pi(e),t===null)throw Error($(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return sS(i),e;if(o===n)return sS(i),t;o=o.sibling}throw Error($(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error($(189))}}if(r.alternate!==n)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?e:t}function G0(e){return e=gM(e),e!==null?J0(e):null}function J0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=J0(e);if(t!==null)return t;e=e.sibling}return null}var Q0=Bt.unstable_scheduleCallback,aS=Bt.unstable_cancelCallback,mM=Bt.unstable_shouldYield,yM=Bt.unstable_requestPaint,We=Bt.unstable_now,SM=Bt.unstable_getCurrentPriorityLevel,zm=Bt.unstable_ImmediatePriority,Y0=Bt.unstable_UserBlockingPriority,bl=Bt.unstable_NormalPriority,CM=Bt.unstable_LowPriority,X0=Bt.unstable_IdlePriority,Zl=null,Sr=null;function RM(e){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Zl,e,void 0,(e.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:wM,PM=Math.log,EM=Math.LN2;function wM(e){return e>>>=0,e===0?32:31-(PM(e)/EM|0)|0}var Lc=64,xc=4194304;function xu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ol(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=xu(a):(o&=s,o!==0&&(n=xu(o)))}else s=r&~i,s!==0?n=xu(s):o!==0&&(n=xu(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-cr(t),i=1<<r,n|=e[r],t&=~i;return n}function _M(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-cr(o),a=1<<s,u=i[s];u===-1?(!(a&r)||a&n)&&(i[s]=_M(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function zg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Z0(){var e=Lc;return Lc<<=1,!(Lc&4194240)&&(Lc=64),e}function Fp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cr(t),e[t]=r}function IM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-cr(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function Lm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-cr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var we=0;function eA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tA,xm,rA,nA,iA,Lg=!1,qc=[],un=null,cn=null,ln=null,ec=new Map,tc=new Map,rn=[],AM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uS(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":ec.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(t.pointerId)}}function ho(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Sc(t),t!==null&&xm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function bM(e,t,r,n,i){switch(t){case"focusin":return un=ho(un,e,t,r,n,i),!0;case"dragenter":return cn=ho(cn,e,t,r,n,i),!0;case"mouseover":return ln=ho(ln,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return ec.set(o,ho(ec.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,tc.set(o,ho(tc.get(o)||null,e,t,r,n,i)),!0}return!1}function oA(e){var t=Xn(e.target);if(t!==null){var r=pi(t);if(r!==null){if(t=r.tag,t===13){if(t=K0(r),t!==null){e.blockedOn=t,iA(e.priority,function(){rA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Mg=n,r.target.dispatchEvent(n),Mg=null}else return t=Sc(r),t!==null&&xm(t),e.blockedOn=r,!1;t.shift()}return!0}function cS(e,t,r){fl(e)&&r.delete(t)}function OM(){Lg=!1,un!==null&&fl(un)&&(un=null),cn!==null&&fl(cn)&&(cn=null),ln!==null&&fl(ln)&&(ln=null),ec.forEach(cS),tc.forEach(cS)}function fo(e,t){e.blockedOn===t&&(e.blockedOn=null,Lg||(Lg=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,OM)))}function rc(e){function t(i){return fo(i,e)}if(0<qc.length){fo(qc[0],e);for(var r=1;r<qc.length;r++){var n=qc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(un!==null&&fo(un,e),cn!==null&&fo(cn,e),ln!==null&&fo(ln,e),ec.forEach(t),tc.forEach(t),r=0;r<rn.length;r++)n=rn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<rn.length&&(r=rn[0],r.blockedOn===null);)oA(r),r.blockedOn===null&&rn.shift()}var Li=Fr.ReactCurrentBatchConfig,kl=!0;function kM(e,t,r,n){var i=we,o=Li.transition;Li.transition=null;try{we=1,qm(e,t,r,n)}finally{we=i,Li.transition=o}}function MM(e,t,r,n){var i=we,o=Li.transition;Li.transition=null;try{we=4,qm(e,t,r,n)}finally{we=i,Li.transition=o}}function qm(e,t,r,n){if(kl){var i=xg(e,t,r,n);if(i===null)Yp(e,t,n,Ml,r),uS(e,n);else if(bM(i,e,t,r,n))n.stopPropagation();else if(uS(e,n),t&4&&-1<AM.indexOf(e)){for(;i!==null;){var o=Sc(i);if(o!==null&&tA(o),o=xg(e,t,r,n),o===null&&Yp(e,t,n,Ml,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Yp(e,t,n,null,r)}}var Ml=null;function xg(e,t,r,n){if(Ml=null,e=jm(n),e=Xn(e),e!==null)if(t=pi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=K0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ml=e,null}function sA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SM()){case zm:return 1;case Y0:return 4;case bl:case CM:return 16;case X0:return 536870912;default:return 16}default:return 16}}var on=null,Bm=null,vl=null;function aA(){if(vl)return vl;var e,t=Bm,r=t.length,n,i="value"in on?on.value:on.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[o-n];n++);return vl=i.slice(e,1<n?1-n:void 0)}function gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bc(){return!0}function lS(){return!1}function Ut(e){function t(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bc:lS,this.isPropagationStopped=lS,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bc)},persist:function(){},isPersistent:Bc}),t}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fm=Ut(Ji),yc=Le({},Ji,{view:0,detail:0}),DM=Ut(yc),Up,Vp,vo,ep=Le({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Um,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vo&&(vo&&e.type==="mousemove"?(Up=e.screenX-vo.screenX,Vp=e.screenY-vo.screenY):Vp=Up=0,vo=e),Up)},movementY:function(e){return"movementY"in e?e.movementY:Vp}}),pS=Ut(ep),NM=Le({},ep,{dataTransfer:0}),jM=Ut(NM),zM=Le({},yc,{relatedTarget:0}),Wp=Ut(zM),LM=Le({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),xM=Ut(LM),qM=Le({},Ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BM=Ut(qM),FM=Le({},Ji,{data:0}),dS=Ut(FM),UM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $M(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=WM[e])?!!t[e]:!1}function Um(){return $M}var HM=Le({},yc,{key:function(e){if(e.key){var t=UM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?VM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Um,charCode:function(e){return e.type==="keypress"?gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),KM=Ut(HM),GM=Le({},ep,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hS=Ut(GM),JM=Le({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Um}),QM=Ut(JM),YM=Le({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),XM=Ut(YM),ZM=Le({},ep,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eD=Ut(ZM),tD=[9,13,27,32],Vm=Lr&&"CompositionEvent"in window,Wu=null;Lr&&"documentMode"in document&&(Wu=document.documentMode);var rD=Lr&&"TextEvent"in window&&!Wu,uA=Lr&&(!Vm||Wu&&8<Wu&&11>=Wu),fS=" ",vS=!1;function cA(e,t){switch(e){case"keyup":return tD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ei=!1;function nD(e,t){switch(e){case"compositionend":return lA(t);case"keypress":return t.which!==32?null:(vS=!0,fS);case"textInput":return e=t.data,e===fS&&vS?null:e;default:return null}}function iD(e,t){if(Ei)return e==="compositionend"||!Vm&&cA(e,t)?(e=aA(),vl=Bm=on=null,Ei=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uA&&t.locale!=="ko"?null:t.data;default:return null}}var oD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!oD[e.type]:t==="textarea"}function pA(e,t,r,n){U0(n),t=Dl(t,"onChange"),0<t.length&&(r=new Fm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $u=null,nc=null;function sD(e){PA(e,0)}function tp(e){var t=Ti(e);if(j0(t))return e}function aD(e,t){if(e==="change")return t}var dA=!1;if(Lr){var $p;if(Lr){var Hp="oninput"in document;if(!Hp){var mS=document.createElement("div");mS.setAttribute("oninput","return;"),Hp=typeof mS.oninput=="function"}$p=Hp}else $p=!1;dA=$p&&(!document.documentMode||9<document.documentMode)}function yS(){$u&&($u.detachEvent("onpropertychange",hA),nc=$u=null)}function hA(e){if(e.propertyName==="value"&&tp(nc)){var t=[];pA(t,nc,e,jm(e)),H0(sD,t)}}function uD(e,t,r){e==="focusin"?(yS(),$u=t,nc=r,$u.attachEvent("onpropertychange",hA)):e==="focusout"&&yS()}function cD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tp(nc)}function lD(e,t){if(e==="click")return tp(t)}function pD(e,t){if(e==="input"||e==="change")return tp(t)}function dD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pr=typeof Object.is=="function"?Object.is:dD;function ic(e,t){if(pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Cg.call(t,i)||!pr(e[i],t[i]))return!1}return!0}function SS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function CS(e,t){var r=SS(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=SS(r)}}function fA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vA(){for(var e=window,t=Tl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Tl(e.document)}return t}function Wm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hD(e){var t=vA(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fA(r.ownerDocument.documentElement,r)){if(n!==null&&Wm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=CS(r,o);var s=CS(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fD=Lr&&"documentMode"in document&&11>=document.documentMode,wi=null,qg=null,Hu=null,Bg=!1;function RS(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bg||wi==null||wi!==Tl(n)||(n=wi,"selectionStart"in n&&Wm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hu&&ic(Hu,n)||(Hu=n,n=Dl(qg,"onSelect"),0<n.length&&(t=new Fm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=wi)))}function Fc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _i={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},Kp={},gA={};Lr&&(gA=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function rp(e){if(Kp[e])return Kp[e];if(!_i[e])return e;var t=_i[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in gA)return Kp[e]=t[r];return e}var mA=rp("animationend"),yA=rp("animationiteration"),SA=rp("animationstart"),CA=rp("transitionend"),RA=new Map,PS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(e,t){RA.set(e,t),li(t,[e])}for(var Gp=0;Gp<PS.length;Gp++){var Jp=PS[Gp],vD=Jp.toLowerCase(),gD=Jp[0].toUpperCase()+Jp.slice(1);yn(vD,"on"+gD)}yn(mA,"onAnimationEnd");yn(yA,"onAnimationIteration");yn(SA,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(CA,"onTransitionEnd");Bi("onMouseEnter",["mouseout","mouseover"]);Bi("onMouseLeave",["mouseout","mouseover"]);Bi("onPointerEnter",["pointerout","pointerover"]);Bi("onPointerLeave",["pointerout","pointerover"]);li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));li("onBeforeInput",["compositionend","keypress","textInput","paste"]);li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mD=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function ES(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,vM(n,t,void 0,e),e.currentTarget=null}function PA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;ES(i,a,c),o=u}else for(s=0;s<n.length;s++){if(a=n[s],u=a.instance,c=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;ES(i,a,c),o=u}}}if(Al)throw e=jg,Al=!1,jg=null,e}function ke(e,t){var r=t[$g];r===void 0&&(r=t[$g]=new Set);var n=e+"__bubble";r.has(n)||(EA(t,e,2,!1),r.add(n))}function Qp(e,t,r){var n=0;t&&(n|=4),EA(r,e,n,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function oc(e){if(!e[Uc]){e[Uc]=!0,O0.forEach(function(r){r!=="selectionchange"&&(mD.has(r)||Qp(r,!1,e),Qp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uc]||(t[Uc]=!0,Qp("selectionchange",!1,t))}}function EA(e,t,r,n){switch(sA(t)){case 1:var i=kM;break;case 4:i=MM;break;default:i=qm}r=i.bind(null,t,r,e),i=void 0,!Ng||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Yp(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Xn(a),s===null)return;if(u=s.tag,u===5||u===6){n=o=s;continue e}a=a.parentNode}}n=n.return}H0(function(){var c=o,l=jm(r),p=[];e:{var d=RA.get(e);if(d!==void 0){var h=Fm,f=e;switch(e){case"keypress":if(gl(r)===0)break e;case"keydown":case"keyup":h=KM;break;case"focusin":f="focus",h=Wp;break;case"focusout":f="blur",h=Wp;break;case"beforeblur":case"afterblur":h=Wp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=pS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=jM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=QM;break;case mA:case yA:case SA:h=xM;break;case CA:h=XM;break;case"scroll":h=DM;break;case"wheel":h=eD;break;case"copy":case"cut":case"paste":h=BM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=hS}var v=(t&4)!==0,y=!v&&e==="scroll",g=v?d!==null?d+"Capture":null:d;v=[];for(var m=c,S;m!==null;){S=m;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,g!==null&&(C=Zu(m,g),C!=null&&v.push(sc(m,C,S)))),y)break;m=m.return}0<v.length&&(d=new h(d,f,null,r,l),p.push({event:d,listeners:v}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&r!==Mg&&(f=r.relatedTarget||r.fromElement)&&(Xn(f)||f[xr]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=r.relatedTarget||r.toElement,h=c,f=f?Xn(f):null,f!==null&&(y=pi(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=c),h!==f)){if(v=pS,C="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=hS,C="onPointerLeave",g="onPointerEnter",m="pointer"),y=h==null?d:Ti(h),S=f==null?d:Ti(f),d=new v(C,m+"leave",h,r,l),d.target=y,d.relatedTarget=S,C=null,Xn(l)===c&&(v=new v(g,m+"enter",f,r,l),v.target=S,v.relatedTarget=y,C=v),y=C,h&&f)t:{for(v=h,g=f,m=0,S=v;S;S=yi(S))m++;for(S=0,C=g;C;C=yi(C))S++;for(;0<m-S;)v=yi(v),m--;for(;0<S-m;)g=yi(g),S--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=yi(v),g=yi(g)}v=null}else v=null;h!==null&&wS(p,d,h,v,!1),f!==null&&y!==null&&wS(p,y,f,v,!0)}}e:{if(d=c?Ti(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=aD;else if(gS(d))if(dA)P=pD;else{P=cD;var E=uD}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=lD);if(P&&(P=P(e,c))){pA(p,P,r,l);break e}E&&E(e,d,c),e==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&Ig(d,"number",d.value)}switch(E=c?Ti(c):window,e){case"focusin":(gS(E)||E.contentEditable==="true")&&(wi=E,qg=c,Hu=null);break;case"focusout":Hu=qg=wi=null;break;case"mousedown":Bg=!0;break;case"contextmenu":case"mouseup":case"dragend":Bg=!1,RS(p,r,l);break;case"selectionchange":if(fD)break;case"keydown":case"keyup":RS(p,r,l)}var R;if(Vm)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ei?cA(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(uA&&r.locale!=="ko"&&(Ei||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ei&&(R=aA()):(on=l,Bm="value"in on?on.value:on.textContent,Ei=!0)),E=Dl(c,T),0<E.length&&(T=new dS(T,e,null,r,l),p.push({event:T,listeners:E}),R?T.data=R:(R=lA(r),R!==null&&(T.data=R)))),(R=rD?nD(e,r):iD(e,r))&&(c=Dl(c,"onBeforeInput"),0<c.length&&(l=new dS("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:c}),l.data=R))}PA(p,t)})}function sc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dl(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Zu(e,r),o!=null&&n.unshift(sc(e,o,i)),o=Zu(e,t),o!=null&&n.push(sc(e,o,i))),e=e.return}return n}function yi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wS(e,t,r,n,i){for(var o=t._reactName,s=[];r!==null&&r!==n;){var a=r,u=a.alternate,c=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&c!==null&&(a=c,i?(u=Zu(r,o),u!=null&&s.unshift(sc(r,u,a))):i||(u=Zu(r,o),u!=null&&s.push(sc(r,u,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var yD=/\r\n?/g,SD=/\u0000|\uFFFD/g;function _S(e){return(typeof e=="string"?e:""+e).replace(yD,`
`).replace(SD,"")}function Vc(e,t,r){if(t=_S(t),_S(e)!==t&&r)throw Error($(425))}function Nl(){}var Fg=null,Ug=null;function Vg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wg=typeof setTimeout=="function"?setTimeout:void 0,CD=typeof clearTimeout=="function"?clearTimeout:void 0,TS=typeof Promise=="function"?Promise:void 0,RD=typeof queueMicrotask=="function"?queueMicrotask:typeof TS<"u"?function(e){return TS.resolve(null).then(e).catch(PD)}:Wg;function PD(e){setTimeout(function(){throw e})}function Xp(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),rc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);rc(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function IS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),yr="__reactFiber$"+Qi,ac="__reactProps$"+Qi,xr="__reactContainer$"+Qi,$g="__reactEvents$"+Qi,ED="__reactListeners$"+Qi,wD="__reactHandles$"+Qi;function Xn(e){var t=e[yr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xr]||r[yr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=IS(e);e!==null;){if(r=e[yr])return r;e=IS(e)}return t}e=r,r=e.parentNode}return null}function Sc(e){return e=e[yr]||e[xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ti(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function np(e){return e[ac]||null}var Hg=[],Ii=-1;function Sn(e){return{current:e}}function Me(e){0>Ii||(e.current=Hg[Ii],Hg[Ii]=null,Ii--)}function Te(e,t){Ii++,Hg[Ii]=e.current,e.current=t}var mn={},gt=Sn(mn),bt=Sn(!1),ii=mn;function Fi(e,t){var r=e.type.contextTypes;if(!r)return mn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(e){return e=e.childContextTypes,e!=null}function jl(){Me(bt),Me(gt)}function AS(e,t,r){if(gt.current!==mn)throw Error($(168));Te(gt,t),Te(bt,r)}function wA(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error($(108,uM(e)||"Unknown",i));return Le({},r,n)}function zl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,ii=gt.current,Te(gt,e),Te(bt,bt.current),!0}function bS(e,t,r){var n=e.stateNode;if(!n)throw Error($(169));r?(e=wA(e,t,ii),n.__reactInternalMemoizedMergedChildContext=e,Me(bt),Me(gt),Te(gt,e)):Me(bt),Te(bt,r)}var Dr=null,ip=!1,Zp=!1;function _A(e){Dr===null?Dr=[e]:Dr.push(e)}function _D(e){ip=!0,_A(e)}function Cn(){if(!Zp&&Dr!==null){Zp=!0;var e=0,t=we;try{var r=Dr;for(we=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Dr=null,ip=!1}catch(i){throw Dr!==null&&(Dr=Dr.slice(e+1)),Q0(zm,Cn),i}finally{we=t,Zp=!1}}return null}var Ai=[],bi=0,Ll=null,xl=0,Qt=[],Yt=0,oi=null,Nr=1,jr="";function Kn(e,t){Ai[bi++]=xl,Ai[bi++]=Ll,Ll=e,xl=t}function TA(e,t,r){Qt[Yt++]=Nr,Qt[Yt++]=jr,Qt[Yt++]=oi,oi=e;var n=Nr;e=jr;var i=32-cr(n)-1;n&=~(1<<i),r+=1;var o=32-cr(t)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Nr=1<<32-cr(t)+i|r<<i|n,jr=o+e}else Nr=1<<o|r<<i|n,jr=e}function $m(e){e.return!==null&&(Kn(e,1),TA(e,1,0))}function Hm(e){for(;e===Ll;)Ll=Ai[--bi],Ai[bi]=null,xl=Ai[--bi],Ai[bi]=null;for(;e===oi;)oi=Qt[--Yt],Qt[Yt]=null,jr=Qt[--Yt],Qt[Yt]=null,Nr=Qt[--Yt],Qt[Yt]=null}var qt=null,xt=null,De=!1,ur=null;function IA(e,t){var r=Xt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function OS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qt=e,xt=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=oi!==null?{id:Nr,overflow:jr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Xt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qt=e,xt=null,!0):!1;default:return!1}}function Kg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gg(e){if(De){var t=xt;if(t){var r=t;if(!OS(e,t)){if(Kg(e))throw Error($(418));t=pn(r.nextSibling);var n=qt;t&&OS(e,t)?IA(n,r):(e.flags=e.flags&-4097|2,De=!1,qt=e)}}else{if(Kg(e))throw Error($(418));e.flags=e.flags&-4097|2,De=!1,qt=e}}}function kS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qt=e}function Wc(e){if(e!==qt)return!1;if(!De)return kS(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vg(e.type,e.memoizedProps)),t&&(t=xt)){if(Kg(e))throw AA(),Error($(418));for(;t;)IA(e,t),t=pn(t.nextSibling)}if(kS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){xt=pn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=qt?pn(e.stateNode.nextSibling):null;return!0}function AA(){for(var e=xt;e;)e=pn(e.nextSibling)}function Ui(){xt=qt=null,De=!1}function Km(e){ur===null?ur=[e]:ur.push(e)}var TD=Fr.ReactCurrentBatchConfig;function go(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var n=r.stateNode}if(!n)throw Error($(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error($(284));if(!r._owner)throw Error($(290,e))}return e}function $c(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function MS(e){var t=e._init;return t(e._payload)}function bA(e){function t(g,m){if(e){var S=g.deletions;S===null?(g.deletions=[m],g.flags|=16):S.push(m)}}function r(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=vn(g,m),g.index=0,g.sibling=null,g}function o(g,m,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<m?(g.flags|=2,m):S):(g.flags|=2,m)):(g.flags|=1048576,m)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,m,S,C){return m===null||m.tag!==6?(m=sd(S,g.mode,C),m.return=g,m):(m=i(m,S),m.return=g,m)}function u(g,m,S,C){var P=S.type;return P===Pi?l(g,m,S.props.children,C,S.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===en&&MS(P)===m.type)?(C=i(m,S.props),C.ref=go(g,m,S),C.return=g,C):(C=El(S.type,S.key,S.props,null,g.mode,C),C.ref=go(g,m,S),C.return=g,C)}function c(g,m,S,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=ad(S,g.mode,C),m.return=g,m):(m=i(m,S.children||[]),m.return=g,m)}function l(g,m,S,C,P){return m===null||m.tag!==7?(m=ri(S,g.mode,C,P),m.return=g,m):(m=i(m,S),m.return=g,m)}function p(g,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=sd(""+m,g.mode,S),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Nc:return S=El(m.type,m.key,m.props,null,g.mode,S),S.ref=go(g,null,m),S.return=g,S;case Ri:return m=ad(m,g.mode,S),m.return=g,m;case en:var C=m._init;return p(g,C(m._payload),S)}if(Lu(m)||lo(m))return m=ri(m,g.mode,S,null),m.return=g,m;$c(g,m)}return null}function d(g,m,S,C){var P=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:a(g,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Nc:return S.key===P?u(g,m,S,C):null;case Ri:return S.key===P?c(g,m,S,C):null;case en:return P=S._init,d(g,m,P(S._payload),C)}if(Lu(S)||lo(S))return P!==null?null:l(g,m,S,C,null);$c(g,S)}return null}function h(g,m,S,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(S)||null,a(m,g,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Nc:return g=g.get(C.key===null?S:C.key)||null,u(m,g,C,P);case Ri:return g=g.get(C.key===null?S:C.key)||null,c(m,g,C,P);case en:var E=C._init;return h(g,m,S,E(C._payload),P)}if(Lu(C)||lo(C))return g=g.get(S)||null,l(m,g,C,P,null);$c(m,C)}return null}function f(g,m,S,C){for(var P=null,E=null,R=m,T=m=0,B=null;R!==null&&T<S.length;T++){R.index>T?(B=R,R=null):B=R.sibling;var q=d(g,R,S[T],C);if(q===null){R===null&&(R=B);break}e&&R&&q.alternate===null&&t(g,R),m=o(q,m,T),E===null?P=q:E.sibling=q,E=q,R=B}if(T===S.length)return r(g,R),De&&Kn(g,T),P;if(R===null){for(;T<S.length;T++)R=p(g,S[T],C),R!==null&&(m=o(R,m,T),E===null?P=R:E.sibling=R,E=R);return De&&Kn(g,T),P}for(R=n(g,R);T<S.length;T++)B=h(R,g,T,S[T],C),B!==null&&(e&&B.alternate!==null&&R.delete(B.key===null?T:B.key),m=o(B,m,T),E===null?P=B:E.sibling=B,E=B);return e&&R.forEach(function(K){return t(g,K)}),De&&Kn(g,T),P}function v(g,m,S,C){var P=lo(S);if(typeof P!="function")throw Error($(150));if(S=P.call(S),S==null)throw Error($(151));for(var E=P=null,R=m,T=m=0,B=null,q=S.next();R!==null&&!q.done;T++,q=S.next()){R.index>T?(B=R,R=null):B=R.sibling;var K=d(g,R,q.value,C);if(K===null){R===null&&(R=B);break}e&&R&&K.alternate===null&&t(g,R),m=o(K,m,T),E===null?P=K:E.sibling=K,E=K,R=B}if(q.done)return r(g,R),De&&Kn(g,T),P;if(R===null){for(;!q.done;T++,q=S.next())q=p(g,q.value,C),q!==null&&(m=o(q,m,T),E===null?P=q:E.sibling=q,E=q);return De&&Kn(g,T),P}for(R=n(g,R);!q.done;T++,q=S.next())q=h(R,g,T,q.value,C),q!==null&&(e&&q.alternate!==null&&R.delete(q.key===null?T:q.key),m=o(q,m,T),E===null?P=q:E.sibling=q,E=q);return e&&R.forEach(function(D){return t(g,D)}),De&&Kn(g,T),P}function y(g,m,S,C){if(typeof S=="object"&&S!==null&&S.type===Pi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Nc:e:{for(var P=S.key,E=m;E!==null;){if(E.key===P){if(P=S.type,P===Pi){if(E.tag===7){r(g,E.sibling),m=i(E,S.props.children),m.return=g,g=m;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===en&&MS(P)===E.type){r(g,E.sibling),m=i(E,S.props),m.ref=go(g,E,S),m.return=g,g=m;break e}r(g,E);break}else t(g,E);E=E.sibling}S.type===Pi?(m=ri(S.props.children,g.mode,C,S.key),m.return=g,g=m):(C=El(S.type,S.key,S.props,null,g.mode,C),C.ref=go(g,m,S),C.return=g,g=C)}return s(g);case Ri:e:{for(E=S.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){r(g,m.sibling),m=i(m,S.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else t(g,m);m=m.sibling}m=ad(S,g.mode,C),m.return=g,g=m}return s(g);case en:return E=S._init,y(g,m,E(S._payload),C)}if(Lu(S))return f(g,m,S,C);if(lo(S))return v(g,m,S,C);$c(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(r(g,m.sibling),m=i(m,S),m.return=g,g=m):(r(g,m),m=sd(S,g.mode,C),m.return=g,g=m),s(g)):r(g,m)}return y}var Vi=bA(!0),OA=bA(!1),ql=Sn(null),Bl=null,Oi=null,Gm=null;function Jm(){Gm=Oi=Bl=null}function Qm(e){var t=ql.current;Me(ql),e._currentValue=t}function Jg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function xi(e,t){Bl=e,Gm=Oi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(At=!0),e.firstContext=null)}function er(e){var t=e._currentValue;if(Gm!==e)if(e={context:e,memoizedValue:t,next:null},Oi===null){if(Bl===null)throw Error($(308));Oi=e,Bl.dependencies={lanes:0,firstContext:e}}else Oi=Oi.next=e;return t}var Zn=null;function Ym(e){Zn===null?Zn=[e]:Zn.push(e)}function kA(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Ym(t)):(r.next=i.next,i.next=r),t.interleaved=r,qr(e,n)}function qr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var tn=!1;function Xm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Pe&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,qr(e,r)}return i=n.interleaved,i===null?(t.next=t,Ym(n)):(t.next=i.next,i.next=t),n.interleaved=t,qr(e,r)}function ml(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lm(e,r)}}function DS(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fl(e,t,r,n){var i=e.updateQueue;tn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var l=e.alternate;l!==null&&(l=l.updateQueue,a=l.lastBaseUpdate,a!==s&&(a===null?l.firstBaseUpdate=c:a.next=c,l.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,l=c=u=null,a=o;do{var d=a.lane,h=a.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,v=a;switch(d=t,h=r,v.tag){case 1:if(f=v.payload,typeof f=="function"){p=f.call(h,p,d);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=v.payload,d=typeof f=="function"?f.call(h,p,d):f,d==null)break e;p=Le({},p,d);break e;case 2:tn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},l===null?(c=l=h,u=p):l=l.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);ai|=s,e.lanes=s,e.memoizedState=p}}function NS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error($(191,i));i.call(n)}}}var Cc={},Cr=Sn(Cc),uc=Sn(Cc),cc=Sn(Cc);function ei(e){if(e===Cc)throw Error($(174));return e}function Zm(e,t){switch(Te(cc,t),Te(uc,e),Te(Cr,Cc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bg(t,e)}Me(Cr),Te(Cr,t)}function Wi(){Me(Cr),Me(uc),Me(cc)}function DA(e){ei(cc.current);var t=ei(Cr.current),r=bg(t,e.type);t!==r&&(Te(uc,e),Te(Cr,r))}function ey(e){uc.current===e&&(Me(Cr),Me(uc))}var je=Sn(0);function Ul(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ed=[];function ty(){for(var e=0;e<ed.length;e++)ed[e]._workInProgressVersionPrimary=null;ed.length=0}var yl=Fr.ReactCurrentDispatcher,td=Fr.ReactCurrentBatchConfig,si=0,ze=null,Ze=null,ot=null,Vl=!1,Ku=!1,lc=0,ID=0;function ht(){throw Error($(321))}function ry(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!pr(e[r],t[r]))return!1;return!0}function ny(e,t,r,n,i,o){if(si=o,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yl.current=e===null||e.memoizedState===null?kD:MD,e=r(n,i),Ku){o=0;do{if(Ku=!1,lc=0,25<=o)throw Error($(301));o+=1,ot=Ze=null,t.updateQueue=null,yl.current=DD,e=r(n,i)}while(Ku)}if(yl.current=Wl,t=Ze!==null&&Ze.next!==null,si=0,ot=Ze=ze=null,Vl=!1,t)throw Error($(300));return e}function iy(){var e=lc!==0;return lc=0,e}function gr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ze.memoizedState=ot=e:ot=ot.next=e,ot}function tr(){if(Ze===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=ot===null?ze.memoizedState:ot.next;if(t!==null)ot=t,Ze=e;else{if(e===null)throw Error($(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},ot===null?ze.memoizedState=ot=e:ot=ot.next=e}return ot}function pc(e,t){return typeof t=="function"?t(e):t}function rd(e){var t=tr(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var n=Ze,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,u=null,c=o;do{var l=c.lane;if((si&l)===l)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var p={lane:l,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=p,s=n):u=u.next=p,ze.lanes|=l,ai|=l}c=c.next}while(c!==null&&c!==o);u===null?s=n:u.next=a,pr(n,t.memoizedState)||(At=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,ze.lanes|=o,ai|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nd(e){var t=tr(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);pr(o,t.memoizedState)||(At=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function NA(){}function jA(e,t){var r=ze,n=tr(),i=t(),o=!pr(n.memoizedState,i);if(o&&(n.memoizedState=i,At=!0),n=n.queue,oy(xA.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,dc(9,LA.bind(null,r,n,i,t),void 0,null),st===null)throw Error($(349));si&30||zA(r,t,i)}return i}function zA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function LA(e,t,r,n){t.value=r,t.getSnapshot=n,qA(t)&&BA(e)}function xA(e,t,r){return r(function(){qA(t)&&BA(e)})}function qA(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!pr(e,r)}catch{return!0}}function BA(e){var t=qr(e,1);t!==null&&lr(t,e,1,-1)}function jS(e){var t=gr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:e},t.queue=e,e=e.dispatch=OD.bind(null,ze,e),[t.memoizedState,e]}function dc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function FA(){return tr().memoizedState}function Sl(e,t,r,n){var i=gr();ze.flags|=e,i.memoizedState=dc(1|t,r,void 0,n===void 0?null:n)}function op(e,t,r,n){var i=tr();n=n===void 0?null:n;var o=void 0;if(Ze!==null){var s=Ze.memoizedState;if(o=s.destroy,n!==null&&ry(n,s.deps)){i.memoizedState=dc(t,r,o,n);return}}ze.flags|=e,i.memoizedState=dc(1|t,r,o,n)}function zS(e,t){return Sl(8390656,8,e,t)}function oy(e,t){return op(2048,8,e,t)}function UA(e,t){return op(4,2,e,t)}function VA(e,t){return op(4,4,e,t)}function WA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $A(e,t,r){return r=r!=null?r.concat([e]):null,op(4,4,WA.bind(null,t,e),r)}function sy(){}function HA(e,t){var r=tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ry(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function KA(e,t){var r=tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ry(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function GA(e,t,r){return si&21?(pr(r,t)||(r=Z0(),ze.lanes|=r,ai|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,At=!0),e.memoizedState=r)}function AD(e,t){var r=we;we=r!==0&&4>r?r:4,e(!0);var n=td.transition;td.transition={};try{e(!1),t()}finally{we=r,td.transition=n}}function JA(){return tr().memoizedState}function bD(e,t,r){var n=fn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},QA(e))YA(t,r);else if(r=kA(e,t,r,n),r!==null){var i=Rt();lr(r,e,n,i),XA(r,t,n)}}function OD(e,t,r){var n=fn(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(QA(e))YA(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,pr(a,s)){var u=t.interleaved;u===null?(i.next=i,Ym(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}r=kA(e,t,i,n),r!==null&&(i=Rt(),lr(r,e,n,i),XA(r,t,n))}}function QA(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function YA(e,t){Ku=Vl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function XA(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lm(e,r)}}var Wl={readContext:er,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},kD={readContext:er,useCallback:function(e,t){return gr().memoizedState=[e,t===void 0?null:t],e},useContext:er,useEffect:zS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Sl(4194308,4,WA.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Sl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sl(4,2,e,t)},useMemo:function(e,t){var r=gr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=bD.bind(null,ze,e),[n.memoizedState,e]},useRef:function(e){var t=gr();return e={current:e},t.memoizedState=e},useState:jS,useDebugValue:sy,useDeferredValue:function(e){return gr().memoizedState=e},useTransition:function(){var e=jS(!1),t=e[0];return e=AD.bind(null,e[1]),gr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ze,i=gr();if(De){if(r===void 0)throw Error($(407));r=r()}else{if(r=t(),st===null)throw Error($(349));si&30||zA(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,zS(xA.bind(null,n,o,e),[e]),n.flags|=2048,dc(9,LA.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=gr(),t=st.identifierPrefix;if(De){var r=jr,n=Nr;r=(n&~(1<<32-cr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=lc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ID++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},MD={readContext:er,useCallback:HA,useContext:er,useEffect:oy,useImperativeHandle:$A,useInsertionEffect:UA,useLayoutEffect:VA,useMemo:KA,useReducer:rd,useRef:FA,useState:function(){return rd(pc)},useDebugValue:sy,useDeferredValue:function(e){var t=tr();return GA(t,Ze.memoizedState,e)},useTransition:function(){var e=rd(pc)[0],t=tr().memoizedState;return[e,t]},useMutableSource:NA,useSyncExternalStore:jA,useId:JA,unstable_isNewReconciler:!1},DD={readContext:er,useCallback:HA,useContext:er,useEffect:oy,useImperativeHandle:$A,useInsertionEffect:UA,useLayoutEffect:VA,useMemo:KA,useReducer:nd,useRef:FA,useState:function(){return nd(pc)},useDebugValue:sy,useDeferredValue:function(e){var t=tr();return Ze===null?t.memoizedState=e:GA(t,Ze.memoizedState,e)},useTransition:function(){var e=nd(pc)[0],t=tr().memoizedState;return[e,t]},useMutableSource:NA,useSyncExternalStore:jA,useId:JA,unstable_isNewReconciler:!1};function sr(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Qg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Le({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var sp={isMounted:function(e){return(e=e._reactInternals)?pi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Rt(),i=fn(e),o=zr(n,i);o.payload=t,r!=null&&(o.callback=r),t=dn(e,o,i),t!==null&&(lr(t,e,i,n),ml(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Rt(),i=fn(e),o=zr(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=dn(e,o,i),t!==null&&(lr(t,e,i,n),ml(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Rt(),n=fn(e),i=zr(r,n);i.tag=2,t!=null&&(i.callback=t),t=dn(e,i,n),t!==null&&(lr(t,e,n,r),ml(t,e,n))}};function LS(e,t,r,n,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,s):t.prototype&&t.prototype.isPureReactComponent?!ic(r,n)||!ic(i,o):!0}function ZA(e,t,r){var n=!1,i=mn,o=t.contextType;return typeof o=="object"&&o!==null?o=er(o):(i=Ot(t)?ii:gt.current,n=t.contextTypes,o=(n=n!=null)?Fi(e,i):mn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sp,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xS(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&sp.enqueueReplaceState(t,t.state,null)}function Yg(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Xm(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=er(o):(o=Ot(t)?ii:gt.current,i.context=Fi(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Qg(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sp.enqueueReplaceState(i,i.state,null),Fl(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function $i(e,t){try{var r="",n=t;do r+=aM(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function id(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Xg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ND=typeof WeakMap=="function"?WeakMap:Map;function eb(e,t,r){r=zr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,um=n),Xg(e,t)},r}function tb(e,t,r){r=zr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Xg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Xg(e,t),typeof n!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function qS(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ND;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=GD.bind(null,e,t,r),t.then(e,e))}function BS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function FS(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=zr(-1,1),t.tag=2,dn(r,t,1))),r.lanes|=1),e)}var jD=Fr.ReactCurrentOwner,At=!1;function Ct(e,t,r,n){t.child=e===null?OA(t,null,r,n):Vi(t,e.child,r,n)}function US(e,t,r,n,i){r=r.render;var o=t.ref;return xi(t,i),n=ny(e,t,r,n,o,i),r=iy(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Br(e,t,i)):(De&&r&&$m(t),t.flags|=1,Ct(e,t,n,i),t.child)}function VS(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!fy(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,rb(e,t,o,n,i)):(e=El(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:ic,r(s,n)&&e.ref===t.ref)return Br(e,t,i)}return t.flags|=1,e=vn(o,n),e.ref=t.ref,e.return=t,t.child=e}function rb(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(ic(o,n)&&e.ref===t.ref)if(At=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(At=!0);else return t.lanes=e.lanes,Br(e,t,i)}return Zg(e,t,r,n,i)}function nb(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Mi,Lt),Lt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Mi,Lt),Lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Te(Mi,Lt),Lt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Te(Mi,Lt),Lt|=n;return Ct(e,t,i,r),t.child}function ib(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Zg(e,t,r,n,i){var o=Ot(r)?ii:gt.current;return o=Fi(t,o),xi(t,i),r=ny(e,t,r,n,o,i),n=iy(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Br(e,t,i)):(De&&n&&$m(t),t.flags|=1,Ct(e,t,r,i),t.child)}function WS(e,t,r,n,i){if(Ot(r)){var o=!0;zl(t)}else o=!1;if(xi(t,i),t.stateNode===null)Cl(e,t),ZA(t,r,n),Yg(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=er(c):(c=Ot(r)?ii:gt.current,c=Fi(t,c));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||u!==c)&&xS(t,s,n,c),tn=!1;var d=t.memoizedState;s.state=d,Fl(t,n,s,i),u=t.memoizedState,a!==n||d!==u||bt.current||tn?(typeof l=="function"&&(Qg(t,r,l,n),u=t.memoizedState),(a=tn||LS(t,r,a,n,d,u,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),s.props=n,s.state=u,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,MA(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:sr(t.type,a),s.props=c,p=t.pendingProps,d=s.context,u=r.contextType,typeof u=="object"&&u!==null?u=er(u):(u=Ot(r)?ii:gt.current,u=Fi(t,u));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||d!==u)&&xS(t,s,n,u),tn=!1,d=t.memoizedState,s.state=d,Fl(t,n,s,i);var f=t.memoizedState;a!==p||d!==f||bt.current||tn?(typeof h=="function"&&(Qg(t,r,h,n),f=t.memoizedState),(c=tn||LS(t,r,c,n,d,f,u)||!1)?(l||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,f,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,f,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=u,n=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return em(e,t,r,n,o,i)}function em(e,t,r,n,i,o){ib(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&bS(t,r,!1),Br(e,t,o);n=t.stateNode,jD.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Vi(t,e.child,null,o),t.child=Vi(t,null,a,o)):Ct(e,t,a,o),t.memoizedState=n.state,i&&bS(t,r,!0),t.child}function ob(e){var t=e.stateNode;t.pendingContext?AS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&AS(e,t.context,!1),Zm(e,t.containerInfo)}function $S(e,t,r,n,i){return Ui(),Km(i),t.flags|=256,Ct(e,t,r,n),t.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function rm(e){return{baseLanes:e,cachePool:null,transitions:null}}function sb(e,t,r){var n=t.pendingProps,i=je.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Te(je,i&1),e===null)return Gg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,o?(n=t.mode,o=t.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=cp(s,n,0,null),e=ri(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=rm(r),t.memoizedState=tm,e):ay(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zD(e,t,s,n,a,i,r);if(o){o=n.fallback,s=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=vn(i,u),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=vn(a,o):(o=ri(o,s,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,s=e.child.memoizedState,s=s===null?rm(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~r,t.memoizedState=tm,n}return o=e.child,e=o.sibling,n=vn(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ay(e,t){return t=cp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hc(e,t,r,n){return n!==null&&Km(n),Vi(t,e.child,null,r),e=ay(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zD(e,t,r,n,i,o,s){if(r)return t.flags&256?(t.flags&=-257,n=id(Error($(422))),Hc(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=cp({mode:"visible",children:n.children},i,0,null),o=ri(o,i,s,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Vi(t,e.child,null,s),t.child.memoizedState=rm(s),t.memoizedState=tm,o);if(!(t.mode&1))return Hc(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error($(419)),n=id(o,n,void 0),Hc(e,t,s,n)}if(a=(s&e.childLanes)!==0,At||a){if(n=st,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,qr(e,i),lr(n,e,i,-1))}return hy(),n=id(Error($(421))),Hc(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=JD.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,xt=pn(i.nextSibling),qt=t,De=!0,ur=null,e!==null&&(Qt[Yt++]=Nr,Qt[Yt++]=jr,Qt[Yt++]=oi,Nr=e.id,jr=e.overflow,oi=t),t=ay(t,n.children),t.flags|=4096,t)}function HS(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jg(e.return,t,r)}function od(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function ab(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Ct(e,t,n.children,r),n=je.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&HS(e,r,t);else if(e.tag===19)HS(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Te(je,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Ul(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),od(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ul(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}od(t,!0,r,null,o);break;case"together":od(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Br(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ai|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,r=vn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function LD(e,t,r){switch(t.tag){case 3:ob(t),Ui();break;case 5:DA(t);break;case 1:Ot(t.type)&&zl(t);break;case 4:Zm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Te(ql,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Te(je,je.current&1),t.flags|=128,null):r&t.child.childLanes?sb(e,t,r):(Te(je,je.current&1),e=Br(e,t,r),e!==null?e.sibling:null);Te(je,je.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ab(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(je,je.current),n)break;return null;case 22:case 23:return t.lanes=0,nb(e,t,r)}return Br(e,t,r)}var ub,nm,cb,lb;ub=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};nm=function(){};cb=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ei(Cr.current);var o=null;switch(r){case"input":i=_g(e,i),n=_g(e,n),o=[];break;case"select":i=Le({},i,{value:void 0}),n=Le({},n,{value:void 0}),o=[];break;case"textarea":i=Ag(e,i),n=Ag(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Nl)}Og(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yu.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var u=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yu.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ke("scroll",e),o||a===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};lb=function(e,t,r,n){r!==n&&(t.flags|=4)};function mo(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function xD(e,t,r){var n=t.pendingProps;switch(Hm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return Ot(t.type)&&jl(),ft(t),null;case 3:return n=t.stateNode,Wi(),Me(bt),Me(gt),ty(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ur!==null&&(pm(ur),ur=null))),nm(e,t),ft(t),null;case 5:ey(t);var i=ei(cc.current);if(r=t.type,e!==null&&t.stateNode!=null)cb(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error($(166));return ft(t),null}if(e=ei(Cr.current),Wc(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[yr]=t,n[ac]=o,e=(t.mode&1)!==0,r){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(i=0;i<qu.length;i++)ke(qu[i],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":tS(n,o),ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ke("invalid",n);break;case"textarea":nS(n,o),ke("invalid",n)}Og(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Vc(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Vc(n.textContent,a,e),i=["children",""+a]):Yu.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ke("scroll",n)}switch(r){case"input":jc(n),rS(n,o,!0);break;case"textarea":jc(n),iS(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Nl)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=x0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[yr]=t,e[ac]=n,ub(e,t,!1,!1),t.stateNode=e;e:{switch(s=kg(r,n),r){case"dialog":ke("cancel",e),ke("close",e),i=n;break;case"iframe":case"object":case"embed":ke("load",e),i=n;break;case"video":case"audio":for(i=0;i<qu.length;i++)ke(qu[i],e);i=n;break;case"source":ke("error",e),i=n;break;case"img":case"image":case"link":ke("error",e),ke("load",e),i=n;break;case"details":ke("toggle",e),i=n;break;case"input":tS(e,n),i=_g(e,n),ke("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Le({},n,{value:void 0}),ke("invalid",e);break;case"textarea":nS(e,n),i=Ag(e,n),ke("invalid",e);break;default:i=n}Og(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?F0(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&q0(e,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Xu(e,u):typeof u=="number"&&Xu(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yu.hasOwnProperty(o)?u!=null&&o==="onScroll"&&ke("scroll",e):u!=null&&km(e,o,u,s))}switch(r){case"input":jc(e),rS(e,n,!1);break;case"textarea":jc(e),iS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gn(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Ni(e,!!n.multiple,o,!1):n.defaultValue!=null&&Ni(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Nl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)lb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error($(166));if(r=ei(cc.current),ei(Cr.current),Wc(t)){if(n=t.stateNode,r=t.memoizedProps,n[yr]=t,(o=n.nodeValue!==r)&&(e=qt,e!==null))switch(e.tag){case 3:Vc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vc(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yr]=t,t.stateNode=n}return ft(t),null;case 13:if(Me(je),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&xt!==null&&t.mode&1&&!(t.flags&128))AA(),Ui(),t.flags|=98560,o=!1;else if(o=Wc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error($(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[yr]=t}else Ui(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),o=!1}else ur!==null&&(pm(ur),ur=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?et===0&&(et=3):hy())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return Wi(),nm(e,t),e===null&&oc(t.stateNode.containerInfo),ft(t),null;case 10:return Qm(t.type._context),ft(t),null;case 17:return Ot(t.type)&&jl(),ft(t),null;case 19:if(Me(je),o=t.memoizedState,o===null)return ft(t),null;if(n=(t.flags&128)!==0,s=o.rendering,s===null)if(n)mo(o,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ul(e),s!==null){for(t.flags|=128,mo(o,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Te(je,je.current&1|2),t.child}e=e.sibling}o.tail!==null&&We()>Hi&&(t.flags|=128,n=!0,mo(o,!1),t.lanes=4194304)}else{if(!n)if(e=Ul(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!De)return ft(t),null}else 2*We()-o.renderingStartTime>Hi&&r!==1073741824&&(t.flags|=128,n=!0,mo(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(r=o.last,r!==null?r.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=We(),t.sibling=null,r=je.current,Te(je,n?r&1|2:r&1),t):(ft(t),null);case 22:case 23:return dy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Lt&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function qD(e,t){switch(Hm(t),t.tag){case 1:return Ot(t.type)&&jl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wi(),Me(bt),Me(gt),ty(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ey(t),null;case 13:if(Me(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Ui()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(je),null;case 4:return Wi(),null;case 10:return Qm(t.type._context),null;case 22:case 23:return dy(),null;case 24:return null;default:return null}}var Kc=!1,vt=!1,BD=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ki(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xe(e,t,n)}else r.current=null}function im(e,t,r){try{r()}catch(n){xe(e,t,n)}}var KS=!1;function FD(e,t){if(Fg=kl,e=vA(),Wm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,u=-1,c=0,l=0,p=e,d=null;t:for(;;){for(var h;p!==r||i!==0&&p.nodeType!==3||(a=s+i),p!==o||n!==0&&p.nodeType!==3||(u=s+n),p.nodeType===3&&(s+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===e)break t;if(d===r&&++c===i&&(a=s),d===o&&++l===n&&(u=s),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=a===-1||u===-1?null:{start:a,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ug={focusedElem:e,selectionRange:r},kl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var v=f.memoizedProps,y=f.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:sr(t.type,v),y);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){xe(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return f=KS,KS=!1,f}function Gu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&im(t,r,o)}i=i.next}while(i!==n)}}function ap(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function om(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function pb(e){var t=e.alternate;t!==null&&(e.alternate=null,pb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yr],delete t[ac],delete t[$g],delete t[ED],delete t[wD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function db(e){return e.tag===5||e.tag===3||e.tag===4}function GS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||db(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Nl));else if(n!==4&&(e=e.child,e!==null))for(sm(e,t,r),e=e.sibling;e!==null;)sm(e,t,r),e=e.sibling}function am(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(am(e,t,r),e=e.sibling;e!==null;)am(e,t,r),e=e.sibling}var ct=null,ar=!1;function Jr(e,t,r){for(r=r.child;r!==null;)hb(e,t,r),r=r.sibling}function hb(e,t,r){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Zl,r)}catch{}switch(r.tag){case 5:vt||ki(r,t);case 6:var n=ct,i=ar;ct=null,Jr(e,t,r),ct=n,ar=i,ct!==null&&(ar?(e=ct,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ct.removeChild(r.stateNode));break;case 18:ct!==null&&(ar?(e=ct,r=r.stateNode,e.nodeType===8?Xp(e.parentNode,r):e.nodeType===1&&Xp(e,r),rc(e)):Xp(ct,r.stateNode));break;case 4:n=ct,i=ar,ct=r.stateNode.containerInfo,ar=!0,Jr(e,t,r),ct=n,ar=i;break;case 0:case 11:case 14:case 15:if(!vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&im(r,t,s),i=i.next}while(i!==n)}Jr(e,t,r);break;case 1:if(!vt&&(ki(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){xe(r,t,a)}Jr(e,t,r);break;case 21:Jr(e,t,r);break;case 22:r.mode&1?(vt=(n=vt)||r.memoizedState!==null,Jr(e,t,r),vt=n):Jr(e,t,r);break;default:Jr(e,t,r)}}function JS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new BD),t.forEach(function(n){var i=QD.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ir(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,ar=!1;break e;case 3:ct=a.stateNode.containerInfo,ar=!0;break e;case 4:ct=a.stateNode.containerInfo,ar=!0;break e}a=a.return}if(ct===null)throw Error($(160));hb(o,s,i),ct=null,ar=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){xe(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fb(t,e),t=t.sibling}function fb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ir(t,e),vr(e),n&4){try{Gu(3,e,e.return),ap(3,e)}catch(v){xe(e,e.return,v)}try{Gu(5,e,e.return)}catch(v){xe(e,e.return,v)}}break;case 1:ir(t,e),vr(e),n&512&&r!==null&&ki(r,r.return);break;case 5:if(ir(t,e),vr(e),n&512&&r!==null&&ki(r,r.return),e.flags&32){var i=e.stateNode;try{Xu(i,"")}catch(v){xe(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=r!==null?r.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&z0(i,o),kg(a,s);var c=kg(a,o);for(s=0;s<u.length;s+=2){var l=u[s],p=u[s+1];l==="style"?F0(i,p):l==="dangerouslySetInnerHTML"?q0(i,p):l==="children"?Xu(i,p):km(i,l,p,c)}switch(a){case"input":Tg(i,o);break;case"textarea":L0(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Ni(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Ni(i,!!o.multiple,o.defaultValue,!0):Ni(i,!!o.multiple,o.multiple?[]:"",!1))}i[ac]=o}catch(v){xe(e,e.return,v)}}break;case 6:if(ir(t,e),vr(e),n&4){if(e.stateNode===null)throw Error($(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){xe(e,e.return,v)}}break;case 3:if(ir(t,e),vr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{rc(t.containerInfo)}catch(v){xe(e,e.return,v)}break;case 4:ir(t,e),vr(e);break;case 13:ir(t,e),vr(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ly=We())),n&4&&JS(e);break;case 22:if(l=r!==null&&r.memoizedState!==null,e.mode&1?(vt=(c=vt)||l,ir(t,e),vt=c):ir(t,e),vr(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!l&&e.mode&1)for(Z=e,l=e.child;l!==null;){for(p=Z=l;Z!==null;){switch(d=Z,h=d.child,d.tag){case 0:case 11:case 14:case 15:Gu(4,d,d.return);break;case 1:ki(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(v){xe(n,r,v)}}break;case 5:ki(d,d.return);break;case 22:if(d.memoizedState!==null){YS(p);continue}}h!==null?(h.return=d,Z=h):YS(p)}l=l.sibling}e:for(l=null,p=e;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=B0("display",s))}catch(v){xe(e,e.return,v)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(v){xe(e,e.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ir(t,e),vr(e),n&4&&JS(e);break;case 21:break;default:ir(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(db(r)){var n=r;break e}r=r.return}throw Error($(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Xu(i,""),n.flags&=-33);var o=GS(e);am(e,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=GS(e);sm(e,a,s);break;default:throw Error($(161))}}catch(u){xe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function UD(e,t,r){Z=e,vb(e)}function vb(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var i=Z,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Kc;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||vt;a=Kc;var c=vt;if(Kc=s,(vt=u)&&!c)for(Z=i;Z!==null;)s=Z,u=s.child,s.tag===22&&s.memoizedState!==null?XS(i):u!==null?(u.return=s,Z=u):XS(i);for(;o!==null;)Z=o,vb(o),o=o.sibling;Z=i,Kc=a,vt=c}QS(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Z=o):QS(e)}}function QS(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vt||ap(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!vt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:sr(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&NS(t,o,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}NS(t,s,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var l=c.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&rc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}vt||t.flags&512&&om(t)}catch(d){xe(t,t.return,d)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function YS(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function XS(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ap(4,t)}catch(u){xe(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(u){xe(t,i,u)}}var o=t.return;try{om(t)}catch(u){xe(t,o,u)}break;case 5:var s=t.return;try{om(t)}catch(u){xe(t,s,u)}}}catch(u){xe(t,t.return,u)}if(t===e){Z=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Z=a;break}Z=t.return}}var VD=Math.ceil,$l=Fr.ReactCurrentDispatcher,uy=Fr.ReactCurrentOwner,Zt=Fr.ReactCurrentBatchConfig,Pe=0,st=null,Ye=null,lt=0,Lt=0,Mi=Sn(0),et=0,hc=null,ai=0,up=0,cy=0,Ju=null,Tt=null,ly=0,Hi=1/0,Mr=null,Hl=!1,um=null,hn=null,Gc=!1,sn=null,Kl=0,Qu=0,cm=null,Rl=-1,Pl=0;function Rt(){return Pe&6?We():Rl!==-1?Rl:Rl=We()}function fn(e){return e.mode&1?Pe&2&&lt!==0?lt&-lt:TD.transition!==null?(Pl===0&&(Pl=Z0()),Pl):(e=we,e!==0||(e=window.event,e=e===void 0?16:sA(e.type)),e):1}function lr(e,t,r,n){if(50<Qu)throw Qu=0,cm=null,Error($(185));mc(e,r,n),(!(Pe&2)||e!==st)&&(e===st&&(!(Pe&2)&&(up|=r),et===4&&nn(e,lt)),kt(e,n),r===1&&Pe===0&&!(t.mode&1)&&(Hi=We()+500,ip&&Cn()))}function kt(e,t){var r=e.callbackNode;TM(e,t);var n=Ol(e,e===st?lt:0);if(n===0)r!==null&&aS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&aS(r),t===1)e.tag===0?_D(ZS.bind(null,e)):_A(ZS.bind(null,e)),RD(function(){!(Pe&6)&&Cn()}),r=null;else{switch(eA(n)){case 1:r=zm;break;case 4:r=Y0;break;case 16:r=bl;break;case 536870912:r=X0;break;default:r=bl}r=Eb(r,gb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gb(e,t){if(Rl=-1,Pl=0,Pe&6)throw Error($(327));var r=e.callbackNode;if(qi()&&e.callbackNode!==r)return null;var n=Ol(e,e===st?lt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Gl(e,n);else{t=n;var i=Pe;Pe|=2;var o=yb();(st!==e||lt!==t)&&(Mr=null,Hi=We()+500,ti(e,t));do try{HD();break}catch(a){mb(e,a)}while(!0);Jm(),$l.current=o,Pe=i,Ye!==null?t=0:(st=null,lt=0,t=et)}if(t!==0){if(t===2&&(i=zg(e),i!==0&&(n=i,t=lm(e,i))),t===1)throw r=hc,ti(e,0),nn(e,n),kt(e,We()),r;if(t===6)nn(e,n);else{if(i=e.current.alternate,!(n&30)&&!WD(i)&&(t=Gl(e,n),t===2&&(o=zg(e),o!==0&&(n=o,t=lm(e,o))),t===1))throw r=hc,ti(e,0),nn(e,n),kt(e,We()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error($(345));case 2:Gn(e,Tt,Mr);break;case 3:if(nn(e,n),(n&130023424)===n&&(t=ly+500-We(),10<t)){if(Ol(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Rt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wg(Gn.bind(null,e,Tt,Mr),t);break}Gn(e,Tt,Mr);break;case 4:if(nn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-cr(n);o=1<<s,s=t[s],s>i&&(i=s),n&=~o}if(n=i,n=We()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*VD(n/1960))-n,10<n){e.timeoutHandle=Wg(Gn.bind(null,e,Tt,Mr),n);break}Gn(e,Tt,Mr);break;case 5:Gn(e,Tt,Mr);break;default:throw Error($(329))}}}return kt(e,We()),e.callbackNode===r?gb.bind(null,e):null}function lm(e,t){var r=Ju;return e.current.memoizedState.isDehydrated&&(ti(e,t).flags|=256),e=Gl(e,t),e!==2&&(t=Tt,Tt=r,t!==null&&pm(t)),e}function pm(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function WD(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!pr(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t){for(t&=~cy,t&=~up,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-cr(t),n=1<<r;e[r]=-1,t&=~n}}function ZS(e){if(Pe&6)throw Error($(327));qi();var t=Ol(e,0);if(!(t&1))return kt(e,We()),null;var r=Gl(e,t);if(e.tag!==0&&r===2){var n=zg(e);n!==0&&(t=n,r=lm(e,n))}if(r===1)throw r=hc,ti(e,0),nn(e,t),kt(e,We()),r;if(r===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,Tt,Mr),kt(e,We()),null}function py(e,t){var r=Pe;Pe|=1;try{return e(t)}finally{Pe=r,Pe===0&&(Hi=We()+500,ip&&Cn())}}function ui(e){sn!==null&&sn.tag===0&&!(Pe&6)&&qi();var t=Pe;Pe|=1;var r=Zt.transition,n=we;try{if(Zt.transition=null,we=1,e)return e()}finally{we=n,Zt.transition=r,Pe=t,!(Pe&6)&&Cn()}}function dy(){Lt=Mi.current,Me(Mi)}function ti(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,CD(r)),Ye!==null)for(r=Ye.return;r!==null;){var n=r;switch(Hm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jl();break;case 3:Wi(),Me(bt),Me(gt),ty();break;case 5:ey(n);break;case 4:Wi();break;case 13:Me(je);break;case 19:Me(je);break;case 10:Qm(n.type._context);break;case 22:case 23:dy()}r=r.return}if(st=e,Ye=e=vn(e.current,null),lt=Lt=t,et=0,hc=null,cy=up=ai=0,Tt=Ju=null,Zn!==null){for(t=0;t<Zn.length;t++)if(r=Zn[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Zn=null}return e}function mb(e,t){do{var r=Ye;try{if(Jm(),yl.current=Wl,Vl){for(var n=ze.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Vl=!1}if(si=0,ot=Ze=ze=null,Ku=!1,lc=0,uy.current=null,r===null||r.return===null){et=1,hc=t,Ye=null;break}e:{var o=e,s=r.return,a=r,u=t;if(t=lt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,l=a,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=BS(s);if(h!==null){h.flags&=-257,FS(h,s,a,o,t),h.mode&1&&qS(o,c,t),t=h,u=c;var f=t.updateQueue;if(f===null){var v=new Set;v.add(u),t.updateQueue=v}else f.add(u);break e}else{if(!(t&1)){qS(o,c,t),hy();break e}u=Error($(426))}}else if(De&&a.mode&1){var y=BS(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),FS(y,s,a,o,t),Km($i(u,a));break e}}o=u=$i(u,a),et!==4&&(et=2),Ju===null?Ju=[o]:Ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=eb(o,u,t);DS(o,g);break e;case 1:a=u;var m=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(hn===null||!hn.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=tb(o,a,t);DS(o,C);break e}}o=o.return}while(o!==null)}Cb(r)}catch(P){t=P,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function yb(){var e=$l.current;return $l.current=Wl,e===null?Wl:e}function hy(){(et===0||et===3||et===2)&&(et=4),st===null||!(ai&268435455)&&!(up&268435455)||nn(st,lt)}function Gl(e,t){var r=Pe;Pe|=2;var n=yb();(st!==e||lt!==t)&&(Mr=null,ti(e,t));do try{$D();break}catch(i){mb(e,i)}while(!0);if(Jm(),Pe=r,$l.current=n,Ye!==null)throw Error($(261));return st=null,lt=0,et}function $D(){for(;Ye!==null;)Sb(Ye)}function HD(){for(;Ye!==null&&!mM();)Sb(Ye)}function Sb(e){var t=Pb(e.alternate,e,Lt);e.memoizedProps=e.pendingProps,t===null?Cb(e):Ye=t,uy.current=null}function Cb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=qD(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ye=null;return}}else if(r=xD(r,t,Lt),r!==null){Ye=r;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);et===0&&(et=5)}function Gn(e,t,r){var n=we,i=Zt.transition;try{Zt.transition=null,we=1,KD(e,t,r,n)}finally{Zt.transition=i,we=n}return null}function KD(e,t,r,n){do qi();while(sn!==null);if(Pe&6)throw Error($(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(IM(e,o),e===st&&(Ye=st=null,lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gc||(Gc=!0,Eb(bl,function(){return qi(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Zt.transition,Zt.transition=null;var s=we;we=1;var a=Pe;Pe|=4,uy.current=null,FD(e,r),fb(r,e),hD(Ug),kl=!!Fg,Ug=Fg=null,e.current=r,UD(r),yM(),Pe=a,we=s,Zt.transition=o}else e.current=r;if(Gc&&(Gc=!1,sn=e,Kl=i),o=e.pendingLanes,o===0&&(hn=null),RM(r.stateNode),kt(e,We()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=um,um=null,e;return Kl&1&&e.tag!==0&&qi(),o=e.pendingLanes,o&1?e===cm?Qu++:(Qu=0,cm=e):Qu=0,Cn(),null}function qi(){if(sn!==null){var e=eA(Kl),t=Zt.transition,r=we;try{if(Zt.transition=null,we=16>e?16:e,sn===null)var n=!1;else{if(e=sn,sn=null,Kl=0,Pe&6)throw Error($(331));var i=Pe;for(Pe|=4,Z=e.current;Z!==null;){var o=Z,s=o.child;if(Z.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(Z=c;Z!==null;){var l=Z;switch(l.tag){case 0:case 11:case 15:Gu(8,l,o)}var p=l.child;if(p!==null)p.return=l,Z=p;else for(;Z!==null;){l=Z;var d=l.sibling,h=l.return;if(pb(l),l===c){Z=null;break}if(d!==null){d.return=h,Z=d;break}Z=h}}}var f=o.alternate;if(f!==null){var v=f.child;if(v!==null){f.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Z=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Z=s;else e:for(;Z!==null;){if(o=Z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Gu(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Z=g;break e}Z=o.return}}var m=e.current;for(Z=m;Z!==null;){s=Z;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Z=S;else e:for(s=m;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ap(9,a)}}catch(P){xe(a,a.return,P)}if(a===s){Z=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Z=C;break e}Z=a.return}}if(Pe=i,Cn(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Zl,e)}catch{}n=!0}return n}finally{we=r,Zt.transition=t}}return!1}function eC(e,t,r){t=$i(r,t),t=eb(e,t,1),e=dn(e,t,1),t=Rt(),e!==null&&(mc(e,1,t),kt(e,t))}function xe(e,t,r){if(e.tag===3)eC(e,e,r);else for(;t!==null;){if(t.tag===3){eC(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hn===null||!hn.has(n))){e=$i(r,e),e=tb(t,e,1),t=dn(t,e,1),e=Rt(),t!==null&&(mc(t,1,e),kt(t,e));break}}t=t.return}}function GD(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&r,st===e&&(lt&r)===r&&(et===4||et===3&&(lt&130023424)===lt&&500>We()-ly?ti(e,0):cy|=r),kt(e,t)}function Rb(e,t){t===0&&(e.mode&1?(t=xc,xc<<=1,!(xc&130023424)&&(xc=4194304)):t=1);var r=Rt();e=qr(e,t),e!==null&&(mc(e,t,r),kt(e,r))}function JD(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Rb(e,r)}function QD(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(t),Rb(e,r)}var Pb;Pb=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)At=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return At=!1,LD(e,t,r);At=!!(e.flags&131072)}else At=!1,De&&t.flags&1048576&&TA(t,xl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Cl(e,t),e=t.pendingProps;var i=Fi(t,gt.current);xi(t,r),i=ny(null,t,n,e,i,r);var o=iy();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ot(n)?(o=!0,zl(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xm(t),i.updater=sp,t.stateNode=i,i._reactInternals=t,Yg(t,n,e,r),t=em(null,t,n,!0,o,r)):(t.tag=0,De&&o&&$m(t),Ct(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Cl(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=XD(n),e=sr(n,e),i){case 0:t=Zg(null,t,n,e,r);break e;case 1:t=WS(null,t,n,e,r);break e;case 11:t=US(null,t,n,e,r);break e;case 14:t=VS(null,t,n,sr(n.type,e),r);break e}throw Error($(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sr(n,i),Zg(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sr(n,i),WS(e,t,n,i,r);case 3:e:{if(ob(t),e===null)throw Error($(387));n=t.pendingProps,o=t.memoizedState,i=o.element,MA(e,t),Fl(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=$i(Error($(423)),t),t=$S(e,t,n,r,i);break e}else if(n!==i){i=$i(Error($(424)),t),t=$S(e,t,n,r,i);break e}else for(xt=pn(t.stateNode.containerInfo.firstChild),qt=t,De=!0,ur=null,r=OA(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ui(),n===i){t=Br(e,t,r);break e}Ct(e,t,n,r)}t=t.child}return t;case 5:return DA(t),e===null&&Gg(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Vg(n,i)?s=null:o!==null&&Vg(n,o)&&(t.flags|=32),ib(e,t),Ct(e,t,s,r),t.child;case 6:return e===null&&Gg(t),null;case 13:return sb(e,t,r);case 4:return Zm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Vi(t,null,n,r):Ct(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sr(n,i),US(e,t,n,i,r);case 7:return Ct(e,t,t.pendingProps,r),t.child;case 8:return Ct(e,t,t.pendingProps.children,r),t.child;case 12:return Ct(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Te(ql,n._currentValue),n._currentValue=s,o!==null)if(pr(o.value,s)){if(o.children===i.children&&!bt.current){t=Br(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=zr(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var l=c.pending;l===null?u.next=u:(u.next=l.next,l.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Jg(o.return,r,t),a.lanes|=r;break}u=u.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),Jg(s,r,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ct(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,xi(t,r),i=er(i),n=n(i),t.flags|=1,Ct(e,t,n,r),t.child;case 14:return n=t.type,i=sr(n,t.pendingProps),i=sr(n.type,i),VS(e,t,n,i,r);case 15:return rb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sr(n,i),Cl(e,t),t.tag=1,Ot(n)?(e=!0,zl(t)):e=!1,xi(t,r),ZA(t,n,i),Yg(t,n,i,r),em(null,t,n,!0,e,r);case 19:return ab(e,t,r);case 22:return nb(e,t,r)}throw Error($(156,t.tag))};function Eb(e,t){return Q0(e,t)}function YD(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,r,n){return new YD(e,t,r,n)}function fy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XD(e){if(typeof e=="function")return fy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dm)return 11;if(e===Nm)return 14}return 2}function vn(e,t){var r=e.alternate;return r===null?(r=Xt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function El(e,t,r,n,i,o){var s=2;if(n=e,typeof e=="function")fy(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Pi:return ri(r.children,i,o,t);case Mm:s=8,i|=8;break;case Rg:return e=Xt(12,r,t,i|2),e.elementType=Rg,e.lanes=o,e;case Pg:return e=Xt(13,r,t,i),e.elementType=Pg,e.lanes=o,e;case Eg:return e=Xt(19,r,t,i),e.elementType=Eg,e.lanes=o,e;case D0:return cp(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k0:s=10;break e;case M0:s=9;break e;case Dm:s=11;break e;case Nm:s=14;break e;case en:s=16,n=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Xt(s,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function ri(e,t,r,n){return e=Xt(7,e,n,t),e.lanes=r,e}function cp(e,t,r,n){return e=Xt(22,e,n,t),e.elementType=D0,e.lanes=r,e.stateNode={isHidden:!1},e}function sd(e,t,r){return e=Xt(6,e,null,t),e.lanes=r,e}function ad(e,t,r){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZD(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fp(0),this.expirationTimes=Fp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vy(e,t,r,n,i,o,s,a,u){return e=new ZD(e,t,r,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Xt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xm(o),e}function eN(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function wb(e){if(!e)return mn;e=e._reactInternals;e:{if(pi(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var r=e.type;if(Ot(r))return wA(e,r,t)}return t}function _b(e,t,r,n,i,o,s,a,u){return e=vy(r,n,!0,e,i,o,s,a,u),e.context=wb(null),r=e.current,n=Rt(),i=fn(r),o=zr(n,i),o.callback=t??null,dn(r,o,i),e.current.lanes=i,mc(e,i,n),kt(e,n),e}function lp(e,t,r,n){var i=t.current,o=Rt(),s=fn(i);return r=wb(r),t.context===null?t.context=r:t.pendingContext=r,t=zr(o,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=dn(i,t,s),e!==null&&(lr(e,i,s,o),ml(e,i,s)),s}function Jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gy(e,t){tC(e,t),(e=e.alternate)&&tC(e,t)}function tN(){return null}var Tb=typeof reportError=="function"?reportError:function(e){console.error(e)};function my(e){this._internalRoot=e}pp.prototype.render=my.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));lp(e,t,null,null)};pp.prototype.unmount=my.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ui(function(){lp(null,e,null,null)}),t[xr]=null}};function pp(e){this._internalRoot=e}pp.prototype.unstable_scheduleHydration=function(e){if(e){var t=nA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rn.length&&t!==0&&t<rn[r].priority;r++);rn.splice(r,0,e),r===0&&oA(e)}};function yy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rC(){}function rN(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=Jl(s);o.call(c)}}var s=_b(t,n,e,0,null,!1,!1,"",rC);return e._reactRootContainer=s,e[xr]=s.current,oc(e.nodeType===8?e.parentNode:e),ui(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Jl(u);a.call(c)}}var u=vy(e,0,!1,null,null,!1,!1,"",rC);return e._reactRootContainer=u,e[xr]=u.current,oc(e.nodeType===8?e.parentNode:e),ui(function(){lp(t,u,r,n)}),u}function hp(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=Jl(s);a.call(u)}}lp(t,s,e,i)}else s=rN(r,t,e,i,n);return Jl(s)}tA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xu(t.pendingLanes);r!==0&&(Lm(t,r|1),kt(t,We()),!(Pe&6)&&(Hi=We()+500,Cn()))}break;case 13:ui(function(){var n=qr(e,1);if(n!==null){var i=Rt();lr(n,e,1,i)}}),gy(e,1)}};xm=function(e){if(e.tag===13){var t=qr(e,134217728);if(t!==null){var r=Rt();lr(t,e,134217728,r)}gy(e,134217728)}};rA=function(e){if(e.tag===13){var t=fn(e),r=qr(e,t);if(r!==null){var n=Rt();lr(r,e,t,n)}gy(e,t)}};nA=function(){return we};iA=function(e,t){var r=we;try{return we=e,t()}finally{we=r}};Dg=function(e,t,r){switch(t){case"input":if(Tg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=np(n);if(!i)throw Error($(90));j0(n),Tg(n,i)}}}break;case"textarea":L0(e,r);break;case"select":t=r.value,t!=null&&Ni(e,!!r.multiple,t,!1)}};W0=py;$0=ui;var nN={usingClientEntryPoint:!1,Events:[Sc,Ti,np,U0,V0,py]},yo={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iN={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=G0(e),e===null?null:e.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||tN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{Zl=Jc.inject(iN),Sr=Jc}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;Ft.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(t))throw Error($(200));return eN(e,t,null,r)};Ft.createRoot=function(e,t){if(!yy(e))throw Error($(299));var r=!1,n="",i=Tb;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=vy(e,1,!1,null,null,r,!1,n,i),e[xr]=t.current,oc(e.nodeType===8?e.parentNode:e),new my(t)};Ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=G0(t),e=e===null?null:e.stateNode,e};Ft.flushSync=function(e){return ui(e)};Ft.hydrate=function(e,t,r){if(!dp(t))throw Error($(200));return hp(null,e,t,!0,r)};Ft.hydrateRoot=function(e,t,r){if(!yy(e))throw Error($(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=Tb;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=_b(t,null,e,1,r??null,i,!1,o,s),e[xr]=t.current,oc(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new pp(t)};Ft.render=function(e,t,r){if(!dp(t))throw Error($(200));return hp(null,e,t,!1,r)};Ft.unmountComponentAtNode=function(e){if(!dp(e))throw Error($(40));return e._reactRootContainer?(ui(function(){hp(null,null,e,!1,function(){e._reactRootContainer=null,e[xr]=null})}),!0):!1};Ft.unstable_batchedUpdates=py;Ft.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!dp(r))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return hp(e,t,r,!1,n)};Ft.version="18.3.1-next-f1338f8080-20240426";function Ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ib)}catch(e){console.error(e)}}Ib(),I0.exports=Ft;var oN=I0.exports,nC=oN;Sg.createRoot=nC.createRoot,Sg.hydrateRoot=nC.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fc.apply(this,arguments)}var an;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(an||(an={}));const iC="popstate";function sN(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:s,hash:a}=n.location;return dm("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:bb(i)}return uN(t,r,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ab(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aN(){return Math.random().toString(36).substr(2,8)}function oC(e,t){return{usr:e.state,key:e.key,idx:t}}function dm(e,t,r,n){return r===void 0&&(r=null),fc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Yi(t):t,{state:r,key:t&&t.key||n||aN()})}function bb(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Yi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function uN(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,s=i.history,a=an.Pop,u=null,c=l();c==null&&(c=0,s.replaceState(fc({},s.state,{idx:c}),""));function l(){return(s.state||{idx:null}).idx}function p(){a=an.Pop;let y=l(),g=y==null?null:y-c;c=y,u&&u({action:a,location:v.location,delta:g})}function d(y,g){a=an.Push;let m=dm(v.location,y,g);c=l()+1;let S=oC(m,c),C=v.createHref(m);try{s.pushState(S,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(C)}o&&u&&u({action:a,location:v.location,delta:1})}function h(y,g){a=an.Replace;let m=dm(v.location,y,g);c=l();let S=oC(m,c),C=v.createHref(m);s.replaceState(S,"",C),o&&u&&u({action:a,location:v.location,delta:0})}function f(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof y=="string"?y:bb(y);return m=m.replace(/ $/,"%20"),tt(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let v={get action(){return a},get location(){return e(i,s)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(iC,p),u=y,()=>{i.removeEventListener(iC,p),u=null}},createHref(y){return t(i,y)},createURL:f,encodeLocation(y){let g=f(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:h,go(y){return s.go(y)}};return v}var sC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sC||(sC={}));function cN(e,t,r){return r===void 0&&(r="/"),lN(e,t,r,!1)}function lN(e,t,r,n){let i=typeof t=="string"?Yi(t):t,o=Mb(i.pathname||"/",r);if(o==null)return null;let s=Ob(e);pN(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let c=PN(o);a=CN(s[u],c,n)}return a}function Ob(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(tt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let c=ni([n,u.relativePath]),l=r.concat(u);o.children&&o.children.length>0&&(tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Ob(o.children,t,l,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:yN(c,o.index),routesMeta:l})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of kb(o.path))i(o,s,u)}),t}function kb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let s=kb(n.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function pN(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:SN(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const dN=/^:[\w-]+$/,hN=3,fN=2,vN=1,gN=10,mN=-2,aC=e=>e==="*";function yN(e,t){let r=e.split("/"),n=r.length;return r.some(aC)&&(n+=mN),t&&(n+=fN),r.filter(i=>!aC(i)).reduce((i,o)=>i+(dN.test(o)?hN:o===""?vN:gN),n)}function SN(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function CN(e,t,r){let{routesMeta:n}=e,i={},o="/",s=[];for(let a=0;a<n.length;++a){let u=n[a],c=a===n.length-1,l=o==="/"?t:t.slice(o.length)||"/",p=uC({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},l),d=u.route;if(!p&&c&&r&&!n[n.length-1].route.index&&(p=uC({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},l)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:ni([o,p.pathname]),pathnameBase:AN(ni([o,p.pathnameBase])),route:d}),p.pathnameBase!=="/"&&(o=ni([o,p.pathnameBase]))}return s}function uC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=RN(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,l,p)=>{let{paramName:d,isOptional:h}=l;if(d==="*"){let v=a[p]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const f=a[p];return h&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:e}}function RN(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ab(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(n.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function PN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ab(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Mb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function EN(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Yi(e):e;return{pathname:r?r.startsWith("/")?r:wN(r,t):t,search:bN(n),hash:ON(i)}}function wN(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ud(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _N(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function TN(e,t){let r=_N(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function IN(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Yi(e):(i=fc({},e),tt(!i.pathname||!i.pathname.includes("?"),ud("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),ud("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),ud("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=r;else{let p=t.length-1;if(!n&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),p-=1;i.pathname=d.join("/")}a=p>=0?t[p]:"/"}let u=EN(i,a),c=s&&s!=="/"&&s.endsWith("/"),l=(o||s===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||l)&&(u.pathname+="/"),u}const ni=e=>e.join("/").replace(/\/\/+/g,"/"),AN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ON=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Db=["post","put","patch","delete"];new Set(Db);const MN=["get",...Db];new Set(MN);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vc.apply(this,arguments)}const Sy=H.createContext(null),DN=H.createContext(null),fp=H.createContext(null),vp=H.createContext(null),Xi=H.createContext({outlet:null,matches:[],isDataRoute:!1}),Nb=H.createContext(null);function gp(){return H.useContext(vp)!=null}function Cy(){return gp()||tt(!1),H.useContext(vp).location}function jb(e){H.useContext(fp).static||H.useLayoutEffect(e)}function di(){let{isDataRoute:e}=H.useContext(Xi);return e?HN():NN()}function NN(){gp()||tt(!1);let e=H.useContext(Sy),{basename:t,future:r,navigator:n}=H.useContext(fp),{matches:i}=H.useContext(Xi),{pathname:o}=Cy(),s=JSON.stringify(TN(i,r.v7_relativeSplatPath)),a=H.useRef(!1);return jb(()=>{a.current=!0}),H.useCallback(function(c,l){if(l===void 0&&(l={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let p=IN(c,JSON.parse(s),o,l.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ni([t,p.pathname])),(l.replace?n.replace:n.push)(p,l.state,l)},[t,n,s,o,e])}function jN(e,t){return zN(e,t)}function zN(e,t,r,n){gp()||tt(!1);let{navigator:i}=H.useContext(fp),{matches:o}=H.useContext(Xi),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=Cy(),l;if(t){var p;let y=typeof t=="string"?Yi(t):t;u==="/"||(p=y.pathname)!=null&&p.startsWith(u)||tt(!1),l=y}else l=c;let d=l.pathname||"/",h=d;if(u!=="/"){let y=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let f=cN(e,{pathname:h}),v=FN(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ni([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:ni([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return t&&v?H.createElement(vp.Provider,{value:{location:vc({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:an.Pop}},v):v}function LN(){let e=$N(),t=kN(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),r?H.createElement("pre",{style:i},r):null,null)}const xN=H.createElement(LN,null);class qN extends H.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?H.createElement(Xi.Provider,{value:this.props.routeContext},H.createElement(Nb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function BN(e){let{routeContext:t,match:r,children:n}=e,i=H.useContext(Sy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(Xi.Provider,{value:t},n)}function FN(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if((o=r)!=null&&o.errors)e=r.matches;else return null}let s=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let l=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);l>=0||tt(!1),s=s.slice(0,Math.min(s.length,l+1))}let u=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let l=0;l<s.length;l++){let p=s[l];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=l),p.route.id){let{loaderData:d,errors:h}=r,f=p.route.loader&&d[p.route.id]===void 0&&(!h||h[p.route.id]===void 0);if(p.route.lazy||f){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((l,p,d)=>{let h,f=!1,v=null,y=null;r&&(h=a&&p.route.id?a[p.route.id]:void 0,v=p.route.errorElement||xN,u&&(c<0&&d===0?(f=!0,y=null):c===d&&(f=!0,y=p.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,d+1)),m=()=>{let S;return h?S=v:f?S=y:p.route.Component?S=H.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=l,H.createElement(BN,{match:p,routeContext:{outlet:l,matches:g,isDataRoute:r!=null},children:S})};return r&&(p.route.ErrorBoundary||p.route.errorElement||d===0)?H.createElement(qN,{location:r.location,revalidation:r.revalidation,component:v,error:h,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var zb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zb||{}),Ql=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ql||{});function UN(e){let t=H.useContext(Sy);return t||tt(!1),t}function VN(e){let t=H.useContext(DN);return t||tt(!1),t}function WN(e){let t=H.useContext(Xi);return t||tt(!1),t}function Lb(e){let t=WN(),r=t.matches[t.matches.length-1];return r.route.id||tt(!1),r.route.id}function $N(){var e;let t=H.useContext(Nb),r=VN(Ql.UseRouteError),n=Lb(Ql.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function HN(){let{router:e}=UN(zb.UseNavigateStable),t=Lb(Ql.UseNavigateStable),r=H.useRef(!1);return jb(()=>{r.current=!0}),H.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,vc({fromRouteId:t},o)))},[e,t])}function Yr(e){tt(!1)}function KN(e){let{basename:t="/",children:r=null,location:n,navigationType:i=an.Pop,navigator:o,static:s=!1,future:a}=e;gp()&&tt(!1);let u=t.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:u,navigator:o,static:s,future:vc({v7_relativeSplatPath:!1},a)}),[u,a,o,s]);typeof n=="string"&&(n=Yi(n));let{pathname:l="/",search:p="",hash:d="",state:h=null,key:f="default"}=n,v=H.useMemo(()=>{let y=Mb(l,u);return y==null?null:{location:{pathname:y,search:p,hash:d,state:h,key:f},navigationType:i}},[u,l,p,d,h,f,i]);return v==null?null:H.createElement(fp.Provider,{value:c},H.createElement(vp.Provider,{children:r,value:v}))}function GN(e){let{children:t,location:r}=e;return jN(hm(t),r)}new Promise(()=>{});function hm(e,t){t===void 0&&(t=[]);let r=[];return H.Children.forEach(e,(n,i)=>{if(!H.isValidElement(n))return;let o=[...t,i];if(n.type===H.Fragment){r.push.apply(r,hm(n.props.children,o));return}n.type!==Yr&&tt(!1),!n.props.index||!n.props.children||tt(!1);let s={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=hm(n.props.children,o)),r.push(s)}),r}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const JN="6";try{window.__reactRouterVersion=JN}catch{}const QN="startTransition",cC=Gk[QN];function YN(e){let{basename:t,children:r,future:n,window:i}=e,o=H.useRef();o.current==null&&(o.current=sN({window:i,v5Compat:!0}));let s=o.current,[a,u]=H.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},l=H.useCallback(p=>{c&&cC?cC(()=>u(p)):u(p)},[u,c]);return H.useLayoutEffect(()=>s.listen(l),[s,l]),H.createElement(KN,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:s,future:n})}var lC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lC||(lC={}));var pC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(pC||(pC={}));const XN="_container_1aoqx_1",ZN="_homeBox_1aoqx_19",dC={container:XN,homeBox:ZN},ej=()=>{const e=di(),[t,r]=H.useState("");H.useEffect(()=>{var i;((i=localStorage.getItem("name"))==null?void 0:i.length)>0&&(localStorage.removeItem("name"),window.location.reload()),localStorage.getItem("token")||e("/login")},[e]);const n=()=>{localStorage.setItem("name",t),e("/test")};return N.jsx("div",{className:dC.container,children:N.jsxs("div",{className:dC.homeBox,children:[N.jsx("h1",{children:"Take Test"}),N.jsx("h3",{children:"Name:"}),N.jsx("input",{type:"text",value:t,onChange:i=>r(i.target.value)}),N.jsx("button",{onClick:n,children:"Proceed"})]})})},tj="/assets/first-CUWndqQ4.svg",rj="_container_jn6zv_1",nj="_right_jn6zv_29",ij="_buttonContainer_jn6zv_69",oj="_first_jn6zv_111",sj="_second_jn6zv_121",So={container:rj,right:nj,buttonContainer:ij,first:oj,second:sj},aj=()=>{const e=window.innerWidth<=768,t=!e&&window.innerWidth<=1024;let r={height:500,width:500};return e?r={height:220,width:220}:t&&(r={height:300,width:300}),N.jsxs("div",{className:So.container,children:[N.jsx("img",{src:tj,alt:"first",style:r}),N.jsxs("div",{className:So.right,children:[N.jsx("h1",{children:"Schonell Test - Sankalp x Daira"}),N.jsx("p",{children:"Welcome to Schonell Test, a simple and easy way to test your reading age."}),N.jsx("p",{children:"Click on the link below to get started."}),N.jsxs("div",{className:So.buttonContainer,children:[N.jsx("button",{onClick:()=>window.location.replace("/login"),className:So.first,children:"Login"}),N.jsx("button",{onClick:()=>window.location.replace("/signup"),className:So.second,children:"Sign Up"})]})]})]})},uj="_container_5hq53_1",cj="_loginBox_5hq53_19",Yl={container:uj,loginBox:cj},mp="https://sankalp-server.onrender.com",lj=()=>{const[e,t]=H.useState(""),[r,n]=H.useState(""),i=di();H.useEffect(()=>{localStorage.getItem("token")&&i("/home")},[i]);const o=async()=>{if((e==null?void 0:e.length)===0||(r==null?void 0:r.length)===0){alert("Please enter username and password");return}const s=await fetch(`${mp}/api/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})});if(s.status===200){const a=await s.json();localStorage.setItem("token",a),window.location.reload()}else{const a=await s.json();alert(a.message)}};return N.jsx("div",{className:Yl.container,children:N.jsxs("div",{className:Yl.loginBox,children:[N.jsx("h1",{children:"Login"}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"username",children:"Username"}),N.jsx("input",{type:"text",id:"username",name:"username",value:e,onChange:s=>t(s.target.value)}),N.jsx("label",{htmlFor:"password",children:"Password"}),N.jsx("input",{type:"password",id:"password",name:"password",value:r,onChange:s=>n(s.target.value)}),N.jsx("button",{onClick:o,children:"Login"})]})]})})},pj="_navbarContainer_1dqnz_1",dj="_hide_1dqnz_21",hC={navbarContainer:pj,hide:dj},hj=()=>{const[e,t]=H.useState(!1),[r,n]=H.useState(!1),i=di(),o=Cy();H.useEffect(()=>{if((()=>{localStorage.getItem("token")?t(!0):t(!1)})(),o.pathname==="/test"){if(window.innerWidth<=768)return;n(!0)}else n(!1)},[o.pathname]);const s=()=>{localStorage.removeItem("token"),localStorage.getItem("name")&&localStorage.removeItem("name"),t(!1),i("/")};return N.jsxs("div",{className:`${hC.navbarContainer} ${r?hC.hide:""}`,children:[N.jsx("h1",{onClick:()=>i("/"),children:"Sankalp x Daira"}),e?N.jsxs("ul",{children:[N.jsx("li",{onClick:()=>i("/home"),children:"Test"}),N.jsx("li",{onClick:()=>i("/result"),children:"Result"}),N.jsx("li",{onClick:s,children:"Logout"})]}):N.jsxs("ul",{children:[N.jsx("li",{onClick:()=>i("/login"),children:"Login"}),N.jsx("li",{onClick:()=>i("/signup"),children:"Signup"})]})]})},fj="_container_18pcu_1",vj="_resultBox_18pcu_21",fC={container:fj,resultBox:vj},gj=()=>{const[e,t]=H.useState([]),[r,n]=H.useState(!1),i=di();return H.useEffect(()=>{localStorage.getItem("token")?n(!0):(n(!1),i("/login")),(async()=>{const s=await fetch(`${mp}/api/result`,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.status===200){const a=await s.json();t(a)}else{const a=await s.json();alert(a.message)}})()},[i]),N.jsx("div",{className:fC.container,children:N.jsxs("div",{className:fC.resultBox,children:[N.jsx("h1",{children:"Results"}),r&&N.jsxs("table",{children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{children:"Test Name"}),N.jsx("th",{children:"Score"}),N.jsx("th",{children:"Reading Age"})]})}),N.jsx("tbody",{children:e.map((o,s)=>N.jsxs("tr",{children:[N.jsx("td",{children:o.name}),N.jsx("td",{children:o.score}),N.jsx("td",{children:o.readingAge})]},s))})]})]})})},mj=()=>{const[e,t]=H.useState(""),[r,n]=H.useState(""),[i,o]=H.useState(""),[s,a]=H.useState(""),[u,c]=H.useState(""),[l,p]=H.useState(""),[d,h]=H.useState(""),f=di();H.useEffect(()=>{localStorage.getItem("token")&&f("/home")},[f]);const v=async()=>{if((e==null?void 0:e.length)===0||(r==null?void 0:r.length)===0||(i==null?void 0:i.length)===0||(s==null?void 0:s.length)===0||(u==null?void 0:u.length)===0||(l==null?void 0:l.length)===0||(d==null?void 0:d.length)===0){alert("Please fill in all the required fields");return}const y=await fetch(`${mp}/api/user/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,name:i,age:s,class:u,parentEducation:l,languages:d})});if(y.status===200){const g=await y.json();localStorage.setItem("token",g.id),console.log(g),alert("Account created successfully. Redirecting..."),window.location.reload()}else{const g=await y.json();alert(g.message)}};return N.jsx("div",{className:Yl.container,children:N.jsxs("div",{className:Yl.loginBox,children:[N.jsx("h1",{children:"Signup"}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"name",children:"Name"}),N.jsx("input",{type:"text",id:"name",name:"name",value:i,onChange:y=>o(y.target.value)}),N.jsx("label",{htmlFor:"age",children:"Age"}),N.jsx("input",{type:"text",id:"age",name:"age",value:s,onChange:y=>a(y.target.value)}),N.jsx("label",{htmlFor:"class",children:"Class"}),N.jsx("input",{type:"text",id:"class",name:"class",value:u,onChange:y=>c(y.target.value)}),N.jsx("label",{htmlFor:"parentEducation",children:"Educational Qualification of Parents"}),N.jsx("input",{type:"text",id:"parentEducation",name:"parentEducation",value:l,onChange:y=>p(y.target.value)}),N.jsx("label",{htmlFor:"languages",children:"Spoken Languages"}),N.jsx("input",{type:"text",id:"languages",name:"languages",value:d,onChange:y=>h(y.target.value)}),N.jsx("label",{htmlFor:"username",children:"Username"}),N.jsx("input",{type:"text",id:"username",name:"username",value:e,onChange:y=>t(y.target.value)}),N.jsx("label",{htmlFor:"password",children:"Password"}),N.jsx("input",{type:"password",id:"password",name:"password",value:r,onChange:y=>n(y.target.value)}),N.jsx("button",{onClick:v,children:"Create Account"})]})]})})};var Ry={},xb={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(xb);var rt=xb.exports,cd={},ld={exports:{}},vC;function Rc(){return vC||(vC=1,function(e){function t(r){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ld)),ld.exports}var pd={exports:{}},gC;function Rn(){return gC||(gC=1,function(e){function t(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(pd)),pd.exports}var dd={},Si={},hd={exports:{}},mC;function yj(){return mC||(mC=1,function(e){var t=Rc().default;function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},i=Object.prototype,o=i.hasOwnProperty,s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(_,w,j){return Object.defineProperty(_,w,{value:j,enumerable:!0,configurable:!0,writable:!0}),_[w]}try{l({},"")}catch{l=function(j,O,z){return j[O]=z}}function p(_,w,j,O){var z=w&&w.prototype instanceof f?w:f,I=Object.create(z.prototype),b=new q(O||[]);return I._invoke=function(L,W,F){var ie="suspendedStart";return function(J,Se){if(ie==="executing")throw new Error("Generator is already running");if(ie==="completed"){if(J==="throw")throw Se;return D()}for(F.method=J,F.arg=Se;;){var Q=F.delegate;if(Q){var X=R(Q,F);if(X){if(X===h)continue;return X}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(ie==="suspendedStart")throw ie="completed",F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);ie="executing";var ge=d(L,W,F);if(ge.type==="normal"){if(ie=F.done?"completed":"suspendedYield",ge.arg===h)continue;return{value:ge.arg,done:F.done}}ge.type==="throw"&&(ie="completed",F.method="throw",F.arg=ge.arg)}}}(_,j,b),I}function d(_,w,j){try{return{type:"normal",arg:_.call(w,j)}}catch(O){return{type:"throw",arg:O}}}n.wrap=p;var h={};function f(){}function v(){}function y(){}var g={};l(g,a,function(){return this});var m=Object.getPrototypeOf,S=m&&m(m(K([])));S&&S!==i&&o.call(S,a)&&(g=S);var C=y.prototype=f.prototype=Object.create(g);function P(_){["next","throw","return"].forEach(function(w){l(_,w,function(j){return this._invoke(w,j)})})}function E(_,w){function j(z,I,b,L){var W=d(_[z],_,I);if(W.type!=="throw"){var F=W.arg,ie=F.value;return ie&&t(ie)=="object"&&o.call(ie,"__await")?w.resolve(ie.__await).then(function(J){j("next",J,b,L)},function(J){j("throw",J,b,L)}):w.resolve(ie).then(function(J){F.value=J,b(F)},function(J){return j("throw",J,b,L)})}L(W.arg)}var O;this._invoke=function(z,I){function b(){return new w(function(L,W){j(z,I,L,W)})}return O=O?O.then(b,b):b()}}function R(_,w){var j=_.iterator[w.method];if(j===void 0){if(w.delegate=null,w.method==="throw"){if(_.iterator.return&&(w.method="return",w.arg=void 0,R(_,w),w.method==="throw"))return h;w.method="throw",w.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var O=d(j,_.iterator,w.arg);if(O.type==="throw")return w.method="throw",w.arg=O.arg,w.delegate=null,h;var z=O.arg;return z?z.done?(w[_.resultName]=z.value,w.next=_.nextLoc,w.method!=="return"&&(w.method="next",w.arg=void 0),w.delegate=null,h):z:(w.method="throw",w.arg=new TypeError("iterator result is not an object"),w.delegate=null,h)}function T(_){var w={tryLoc:_[0]};1 in _&&(w.catchLoc=_[1]),2 in _&&(w.finallyLoc=_[2],w.afterLoc=_[3]),this.tryEntries.push(w)}function B(_){var w=_.completion||{};w.type="normal",delete w.arg,_.completion=w}function q(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(T,this),this.reset(!0)}function K(_){if(_){var w=_[a];if(w)return w.call(_);if(typeof _.next=="function")return _;if(!isNaN(_.length)){var j=-1,O=function z(){for(;++j<_.length;)if(o.call(_,j))return z.value=_[j],z.done=!1,z;return z.value=void 0,z.done=!0,z};return O.next=O}}return{next:D}}function D(){return{value:void 0,done:!0}}return v.prototype=y,l(C,"constructor",y),l(y,"constructor",v),v.displayName=l(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(_){var w=typeof _=="function"&&_.constructor;return!!w&&(w===v||(w.displayName||w.name)==="GeneratorFunction")},n.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,y):(_.__proto__=y,l(_,c,"GeneratorFunction")),_.prototype=Object.create(C),_},n.awrap=function(_){return{__await:_}},P(E.prototype),l(E.prototype,u,function(){return this}),n.AsyncIterator=E,n.async=function(_,w,j,O,z){z===void 0&&(z=Promise);var I=new E(p(_,w,j,O),z);return n.isGeneratorFunction(w)?I:I.next().then(function(b){return b.done?b.value:I.next()})},P(C),l(C,c,"Generator"),l(C,a,function(){return this}),l(C,"toString",function(){return"[object Generator]"}),n.keys=function(_){var w=[];for(var j in _)w.push(j);return w.reverse(),function O(){for(;w.length;){var z=w.pop();if(z in _)return O.value=z,O.done=!1,O}return O.done=!0,O}},n.values=K,q.prototype={constructor:q,reset:function(w){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!w)for(var j in this)j.charAt(0)==="t"&&o.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=void 0)},stop:function(){this.done=!0;var w=this.tryEntries[0].completion;if(w.type==="throw")throw w.arg;return this.rval},dispatchException:function(w){if(this.done)throw w;var j=this;function O(F,ie){return b.type="throw",b.arg=w,j.next=F,ie&&(j.method="next",j.arg=void 0),!!ie}for(var z=this.tryEntries.length-1;z>=0;--z){var I=this.tryEntries[z],b=I.completion;if(I.tryLoc==="root")return O("end");if(I.tryLoc<=this.prev){var L=o.call(I,"catchLoc"),W=o.call(I,"finallyLoc");if(L&&W){if(this.prev<I.catchLoc)return O(I.catchLoc,!0);if(this.prev<I.finallyLoc)return O(I.finallyLoc)}else if(L){if(this.prev<I.catchLoc)return O(I.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return O(I.finallyLoc)}}}},abrupt:function(w,j){for(var O=this.tryEntries.length-1;O>=0;--O){var z=this.tryEntries[O];if(z.tryLoc<=this.prev&&o.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var I=z;break}}I&&(w==="break"||w==="continue")&&I.tryLoc<=j&&j<=I.finallyLoc&&(I=null);var b=I?I.completion:{};return b.type=w,b.arg=j,I?(this.method="next",this.next=I.finallyLoc,h):this.complete(b)},complete:function(w,j){if(w.type==="throw")throw w.arg;return w.type==="break"||w.type==="continue"?this.next=w.arg:w.type==="return"?(this.rval=this.arg=w.arg,this.method="return",this.next="end"):w.type==="normal"&&j&&(this.next=j),h},finish:function(w){for(var j=this.tryEntries.length-1;j>=0;--j){var O=this.tryEntries[j];if(O.finallyLoc===w)return this.complete(O.completion,O.afterLoc),B(O),h}},catch:function(w){for(var j=this.tryEntries.length-1;j>=0;--j){var O=this.tryEntries[j];if(O.tryLoc===w){var z=O.completion;if(z.type==="throw"){var I=z.arg;B(O)}return I}}throw new Error("illegal catch attempt")},delegateYield:function(w,j,O){return this.delegate={iterator:K(w),resultName:j,nextLoc:O},this.method==="next"&&(this.arg=void 0),h}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(hd)),hd.exports}var fd,yC;function Rr(){if(yC)return fd;yC=1;var e=yj()();fd=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return fd}var vd={exports:{}},gd={exports:{}},md={exports:{}},SC;function qb(){return SC||(SC=1,function(e){function t(r,n){(n==null||n>r.length)&&(n=r.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=r[i];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(md)),md.exports}var CC;function Sj(){return CC||(CC=1,function(e){var t=qb();function r(n){if(Array.isArray(n))return t(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(gd)),gd.exports}var yd={exports:{}},RC;function Cj(){return RC||(RC=1,function(e){function t(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(yd)),yd.exports}var Sd={exports:{}},PC;function Rj(){return PC||(PC=1,function(e){var t=qb();function r(n,i){if(n){if(typeof n=="string")return t(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(n,i)}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Sd)),Sd.exports}var Cd={exports:{}},EC;function Pj(){return EC||(EC=1,function(e){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Cd)),Cd.exports}var wC;function Bb(){return wC||(wC=1,function(e){var t=Sj(),r=Cj(),n=Rj(),i=Pj();function o(s){return t(s)||r(s)||n(s)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(vd)),vd.exports}var Rd={exports:{}},_C;function Pr(){return _C||(_C=1,function(e){function t(n,i,o,s,a,u,c){try{var l=n[u](c),p=l.value}catch(d){o(d);return}l.done?i(p):Promise.resolve(p).then(s,a)}function r(n){return function(){var i=this,o=arguments;return new Promise(function(s,a){var u=n.apply(i,o);function c(p){t(u,s,a,c,l,"next",p)}function l(p){t(u,s,a,c,l,"throw",p)}c(void 0)})}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Rd)),Rd.exports}var Pd={exports:{}},TC;function Ur(){return TC||(TC=1,function(e){function t(n,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function r(n,i,o){return i&&t(n.prototype,i),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Pd)),Pd.exports}var Ed={exports:{}},IC;function Vr(){return IC||(IC=1,function(e){function t(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ed)),Ed.exports}var wd={exports:{}},_d={exports:{}},AC;function Py(){return AC||(AC=1,function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_d)),_d.exports}var bC;function Pc(){return bC||(bC=1,function(e){var t=Py();function r(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&t(n,i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(wd)),wd.exports}var Td={exports:{}},Id={exports:{}},OC;function Fb(){return OC||(OC=1,function(e){function t(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Id)),Id.exports}var kC;function Ec(){return kC||(kC=1,function(e){var t=Rc().default,r=Fb();function n(i,o){if(o&&(t(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Td)),Td.exports}var Ad={exports:{}},MC;function hi(){return MC||(MC=1,function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ad)),Ad.exports}var Jt={},bd={exports:{}},Od={exports:{}},DC;function Ub(){return DC||(DC=1,function(e){var t=hi();function r(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=t(n),n!==null););return n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Od)),Od.exports}var NC;function Ej(){return NC||(NC=1,function(e){var t=Ub(),r=Rn();function n(o,s,a,u){return typeof Reflect<"u"&&Reflect.set?n=Reflect.set:n=function(l,p,d,h){var f=t(l,p),v;if(f){if(v=Object.getOwnPropertyDescriptor(f,p),v.set)return v.set.call(h,d),!0;if(!v.writable)return!1}if(v=Object.getOwnPropertyDescriptor(h,p),v){if(!v.writable)return!1;v.value=d,Object.defineProperty(h,p,v)}else r(h,p,d);return!0},n(o,s,a,u)}function i(o,s,a,u,c){var l=n(o,s,a,u||o);if(!l&&c)throw new Error("failed to set property");return a}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(bd)),bd.exports}var kd={exports:{}},jC;function wj(){return jC||(jC=1,function(e){var t=Ub();function r(){return typeof Reflect<"u"&&Reflect.get?(e.exports=r=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=r=function(i,o,s){var a=t(i,o);if(a){var u=Object.getOwnPropertyDescriptor(a,o);return u.get?u.get.call(arguments.length<3?i:s):u.value}},e.exports.__esModule=!0,e.exports.default=e.exports),r.apply(this,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(kd)),kd.exports}var Md={exports:{}},Dd={exports:{}},zC;function _j(){return zC||(zC=1,function(e){function t(r){return Function.toString.call(r).indexOf("[native code]")!==-1}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Dd)),Dd.exports}var Nd={exports:{}},jd={exports:{}},LC;function Tj(){return LC||(LC=1,function(e){function t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(jd)),jd.exports}var xC;function Ij(){return xC||(xC=1,function(e){var t=Py(),r=Tj();function n(i,o,s){return r()?(e.exports=n=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=n=function(u,c,l){var p=[null];p.push.apply(p,c);var d=Function.bind.apply(u,p),h=new d;return l&&t(h,l.prototype),h},e.exports.__esModule=!0,e.exports.default=e.exports),n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Nd)),Nd.exports}var qC;function Aj(){return qC||(qC=1,function(e){var t=hi(),r=Py(),n=_j(),i=Ij();function o(s){var a=typeof Map=="function"?new Map:void 0;return e.exports=o=function(c){if(c===null||!n(c))return c;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(c))return a.get(c);a.set(c,l)}function l(){return i(c,arguments,t(this).constructor)}return l.prototype=Object.create(c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),r(l,c)},e.exports.__esModule=!0,e.exports.default=e.exports,o(s)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(Md)),Md.exports}var BC;function yp(){if(BC)return Jt;BC=1,Object.defineProperty(Jt,"__esModule",{value:!0});var e=Bb(),t=Ej(),r=wj(),n=Fb(),i=Pc(),o=Ec(),s=hi(),a=Aj(),u=Rn(),c=Vr(),l=Ur(),p=Rc();function d(A){return A&&typeof A=="object"&&"default"in A?A:{default:A}}var h=d(e),f=d(t),v=d(r),y=d(n),g=d(i),m=d(o),S=d(s),C=d(a),P=d(u),E=d(c),R=d(l),T=d(p);function B(A){var M=q();return function(){var x=S.default(A),G;if(M){var Y=S.default(this).constructor;G=Reflect.construct(x,arguments,Y)}else G=x.apply(this,arguments);return m.default(this,G)}}function q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function K(A,M){var k=Object.keys(A);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(A);M&&(x=x.filter(function(G){return Object.getOwnPropertyDescriptor(A,G).enumerable})),k.push.apply(k,x)}return k}function D(A){for(var M=1;M<arguments.length;M++){var k=arguments[M]!=null?arguments[M]:{};M%2?K(Object(k),!0).forEach(function(x){P.default(A,x,k[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(k)):K(Object(k)).forEach(function(x){Object.defineProperty(A,x,Object.getOwnPropertyDescriptor(k,x))})}return A}function _(A,M){if(!A){for(var k=arguments.length,x=new Array(k>2?k-2:0),G=2;G<k;G++)x[G-2]=arguments[G];throw new TypeError(w(M,x))}}function w(A,M){var k=0;return A.replace(/%[os]/g,function(){return j(M[k++])})}function j(A){return T.default(A)!=="object"||A===null?String(A):Object.prototype.toString.call(A)}var O;function z(A){_(typeof A=="function"||A===void 0,"The error handler must be a function or undefined, but got %o.",A),O=A}function I(A){try{var M=A instanceof Error?A:new Error(j(A));if(O){O(M);return}if(typeof dispatchEvent=="function"&&typeof ErrorEvent=="function")dispatchEvent(new ErrorEvent("error",{error:M,message:M.message}));else if(typeof process<"u"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)}catch{}}var b=typeof window<"u"?window:typeof self<"u"?self:typeof ae<"u"?ae:typeof globalThis<"u"?globalThis:void 0,L;function W(A){_(typeof A=="function"||A===void 0,"The warning handler must be a function or undefined, but got %o.",A),L=A}var F=function(){function A(M,k){E.default(this,A),this.code=M,this.message=k}return R.default(A,[{key:"warn",value:function(){var k;try{for(var x,G=arguments.length,Y=new Array(G),pe=0;pe<G;pe++)Y[pe]=arguments[pe];if(L){L(D(D({},this),{},{args:Y}));return}var Oe=((k=new Error().stack)!==null&&k!==void 0?k:"").replace(/^(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?\n){2}/g,`
`);(x=console).warn.apply(x,[this.message].concat(Y,[Oe]))}catch{}}}]),A}(),ie=new F("W01","Unable to initialize event under dispatching."),J=new F("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),Se=new F("W03","Assigning any truthy value to 'returnValue' property has no effect."),Q=new F("W04","Unable to preventDefault on non-cancelable events."),X=new F("W05","Unable to preventDefault inside passive event listener invocation."),ge=new F("W06","An event listener wasn't added because it has been added already: %o, %o"),de=new F("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),te=new F("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),qe=new F("W09","Event attribute handler must be a function: %o"),Ee=function(){R.default(A,null,[{key:"NONE",get:function(){return Be}},{key:"CAPTURING_PHASE",get:function(){return oe}},{key:"AT_TARGET",get:function(){return Fe}},{key:"BUBBLING_PHASE",get:function(){return $e}}]);function A(M,k){E.default(this,A),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});var x=k??{};it.set(this,{type:String(M),bubbles:!!x.bubbles,cancelable:!!x.cancelable,composed:!!x.composed,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}return R.default(A,[{key:"composedPath",value:function(){var k=he(this).currentTarget;return k?[k]:[]}},{key:"stopPropagation",value:function(){he(this).stopPropagationFlag=!0}},{key:"stopImmediatePropagation",value:function(){var k=he(this);k.stopPropagationFlag=k.stopImmediatePropagationFlag=!0}},{key:"preventDefault",value:function(){mt(he(this))}},{key:"initEvent",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Y=he(this);if(Y.dispatchFlag){ie.warn();return}it.set(this,D(D({},Y),{},{type:String(k),bubbles:!!x,cancelable:!!G,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1}))}},{key:"type",get:function(){return he(this).type}},{key:"target",get:function(){return he(this).target}},{key:"srcElement",get:function(){return he(this).target}},{key:"currentTarget",get:function(){return he(this).currentTarget}},{key:"NONE",get:function(){return Be}},{key:"CAPTURING_PHASE",get:function(){return oe}},{key:"AT_TARGET",get:function(){return Fe}},{key:"BUBBLING_PHASE",get:function(){return $e}},{key:"eventPhase",get:function(){return he(this).dispatchFlag?2:0}},{key:"cancelBubble",get:function(){return he(this).stopPropagationFlag},set:function(k){k?he(this).stopPropagationFlag=!0:J.warn()}},{key:"bubbles",get:function(){return he(this).bubbles}},{key:"cancelable",get:function(){return he(this).cancelable}},{key:"returnValue",get:function(){return!he(this).canceledFlag},set:function(k){k?Se.warn():mt(he(this))}},{key:"defaultPrevented",get:function(){return he(this).canceledFlag}},{key:"composed",get:function(){return he(this).composed}},{key:"isTrusted",get:function(){return!1}},{key:"timeStamp",get:function(){return he(this).timeStamp}}]),A}(),Be=0,oe=1,Fe=2,$e=3,it=new WeakMap;function he(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"this",k=it.get(A);return _(k!=null,"'%s' must be an object that Event constructor created, but got another one: %o",M,A),k}function mt(A){if(A.inPassiveListenerFlag){X.warn();return}if(!A.cancelable){Q.warn();return}A.canceledFlag=!0}Object.defineProperty(Ee,"NONE",{enumerable:!0}),Object.defineProperty(Ee,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty(Ee,"AT_TARGET",{enumerable:!0}),Object.defineProperty(Ee,"BUBBLING_PHASE",{enumerable:!0});for(var He=Object.getOwnPropertyNames(Ee.prototype),_e=0;_e<He.length;++_e)He[_e]!=="constructor"&&Object.defineProperty(Ee.prototype,He[_e],{enumerable:!0});typeof b<"u"&&typeof b.Event<"u"&&Object.setPrototypeOf(Ee.prototype,b.Event.prototype);function Ke(A){return b.DOMException?new b.DOMException(A,"InvalidStateError"):(U==null&&(U=function(M){g.default(x,M);var k=B(x);function x(G){var Y;return E.default(this,x),Y=k.call(this,G),Error.captureStackTrace&&Error.captureStackTrace(y.default(Y),x),Y}return R.default(x,[{key:"code",get:function(){return 11}},{key:"name",get:function(){return"InvalidStateError"}}]),x}(C.default(Error)),Object.defineProperties(U.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),fe(U),fe(U.prototype)),new U(A))}var U,re={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function fe(A){for(var M=Object.keys(re),k=function(Y){var pe=M[Y],Oe=re[pe];Object.defineProperty(A,pe,{get:function(){return Oe},configurable:!0,enumerable:!0})},x=0;x<M.length;++x)k(x)}var ce=function(A){g.default(k,A);var M=B(k);R.default(k,null,[{key:"wrap",value:function(G){return new(Ie(G))(G)}}]);function k(x){var G,Y,pe;E.default(this,k),pe=M.call(this,x.type,{bubbles:x.bubbles,cancelable:x.cancelable,composed:x.composed}),x.cancelBubble&&v.default((G=y.default(pe),S.default(k.prototype)),"stopPropagation",G).call(G),x.defaultPrevented&&v.default((Y=y.default(pe),S.default(k.prototype)),"preventDefault",Y).call(Y),ve.set(y.default(pe),{original:x});for(var Oe=Object.keys(x),dt=0;dt<Oe.length;++dt){var Nt=Oe[dt];Nt in y.default(pe)||Object.defineProperty(y.default(pe),Nt,se(x,Nt))}return pe}return R.default(k,[{key:"stopPropagation",value:function(){v.default(S.default(k.prototype),"stopPropagation",this).call(this);var G=Ge(this),Y=G.original;"stopPropagation"in Y&&Y.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){v.default(S.default(k.prototype),"stopImmediatePropagation",this).call(this);var G=Ge(this),Y=G.original;"stopImmediatePropagation"in Y&&Y.stopImmediatePropagation()}},{key:"preventDefault",value:function(){v.default(S.default(k.prototype),"preventDefault",this).call(this);var G=Ge(this),Y=G.original;"preventDefault"in Y&&Y.preventDefault()}},{key:"cancelBubble",get:function(){return v.default(S.default(k.prototype),"cancelBubble",this)},set:function(G){f.default(S.default(k.prototype),"cancelBubble",G,this,!0);var Y=Ge(this),pe=Y.original;"cancelBubble"in pe&&(pe.cancelBubble=G)}},{key:"returnValue",get:function(){return v.default(S.default(k.prototype),"returnValue",this)},set:function(G){f.default(S.default(k.prototype),"returnValue",G,this,!0);var Y=Ge(this),pe=Y.original;"returnValue"in pe&&(pe.returnValue=G)}},{key:"timeStamp",get:function(){var G=Ge(this),Y=G.original;return"timeStamp"in Y?Y.timeStamp:v.default(S.default(k.prototype),"timeStamp",this)}}]),k}(Ee),ve=new WeakMap;function Ge(A){var M=ve.get(A);return _(M!=null,"'this' is expected an Event object, but got",A),M}var Ce=new WeakMap;Ce.set(Object.prototype,ce),typeof b<"u"&&typeof b.Event<"u"&&Ce.set(b.Event.prototype,ce);function Ie(A){var M=Object.getPrototypeOf(A);if(M==null)return ce;var k=Ce.get(M);return k==null&&(k=le(Ie(M),M),Ce.set(M,k)),k}function le(A,M){for(var k=function(Y){g.default(Oe,Y);var pe=B(Oe);function Oe(){return E.default(this,Oe),pe.apply(this,arguments)}return Oe}(A),x=Object.keys(M),G=0;G<x.length;++G)Object.defineProperty(k.prototype,x[G],se(M,x[G]));return k}function se(A,M){var k=Object.getOwnPropertyDescriptor(A,M);return{get:function(){var G=Ge(this).original,Y=G[M];return typeof Y=="function"?Y.bind(G):Y},set:function(G){var Y=Ge(this).original;Y[M]=G},configurable:k.configurable,enumerable:k.enumerable}}function Ue(A,M,k,x,G,Y){return{callback:A,flags:(M?1:0)|(k?2:0)|(x?4:0),signal:G,signalListener:Y}}function Ae(A){A.flags|=8}function be(A){return(A.flags&1)===1}function Xe(A){return(A.flags&2)===2}function yt(A){return(A.flags&4)===4}function Je(A){return(A.flags&8)===8}function _t(A,M,k){var x=A.callback;try{typeof x=="function"?x.call(M,k):typeof x.handleEvent=="function"&&x.handleEvent(k)}catch(G){I(G)}}function $t(A,M,k){for(var x=A.listeners,G=0;G<x.length;++G)if(x[G].callback===M&&be(x[G])===k)return G;return-1}function Ht(A,M,k,x,G,Y){var pe;Y&&(pe=Kt.bind(null,A,M,k),Y.addEventListener("abort",pe));var Oe=Ue(M,k,x,G,Y,pe);return A.cow?(A.cow=!1,A.listeners=[].concat(h.default(A.listeners),[Oe])):A.listeners.push(Oe),Oe}function Kt(A,M,k){var x=$t(A,M,k);return x!==-1?Gt(A,x):!1}function Gt(A,M){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,x=A.listeners[M];return Ae(x),x.signal&&x.signal.removeEventListener("abort",x.signalListener),A.cow&&!k?(A.cow=!1,A.listeners=A.listeners.filter(function(G,Y){return Y!==M}),!1):(A.listeners.splice(M,1),!0)}function gi(){return Object.create(null)}function Re(A,M){var k;return(k=A[M])!==null&&k!==void 0?k:A[M]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}var Dt=function(){function A(){E.default(this,A),Ir.set(this,gi())}return R.default(A,[{key:"addEventListener",value:function(k,x,G){var Y=fr(this),pe=Kr(k,x,G),Oe=pe.callback,dt=pe.capture,Nt=pe.once,uo=pe.passive,co=pe.signal,kk=pe.type;if(!(Oe==null||co!=null&&co.aborted)){var jp=Re(Y,kk),Gy=$t(jp,Oe,dt);if(Gy!==-1){io(jp.listeners[Gy],uo,Nt,co);return}Ht(jp,Oe,dt,uo,Nt,co)}}},{key:"removeEventListener",value:function(k,x,G){var Y=fr(this),pe=_n(k,x,G),Oe=pe.callback,dt=pe.capture,Nt=pe.type,uo=Y[Nt];Oe!=null&&uo&&Kt(uo,Oe,dt)}},{key:"dispatchEvent",value:function(k){var x=fr(this)[String(k.type)];if(x==null)return!0;var G=k instanceof Ee?k:ce.wrap(k),Y=he(G,"event");if(Y.dispatchFlag)throw Ke("This event has been in dispatching.");if(Y.dispatchFlag=!0,Y.target=Y.currentTarget=this,!Y.stopPropagationFlag){var pe=x.cow,Oe=x.listeners;x.cow=!0;for(var dt=0;dt<Oe.length;++dt){var Nt=Oe[dt];if(!Je(Nt)&&(yt(Nt)&&Gt(x,dt,!pe)&&(dt-=1),Y.inPassiveListenerFlag=Xe(Nt),_t(Nt,this,G),Y.inPassiveListenerFlag=!1,Y.stopImmediatePropagationFlag))break}pe||(x.cow=!1)}return Y.target=null,Y.currentTarget=null,Y.stopImmediatePropagationFlag=!1,Y.stopPropagationFlag=!1,Y.dispatchFlag=!1,!Y.canceledFlag}}]),A}(),Ir=new WeakMap;function fr(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"this",k=Ir.get(A);return _(k!=null,"'%s' must be an object that EventTarget constructor created, but got another one: %o",M,A),k}function Kr(A,M,k){var x;return mi(M),T.default(k)==="object"&&k!==null?{type:String(A),callback:M??void 0,capture:!!k.capture,passive:!!k.passive,once:!!k.once,signal:(x=k.signal)!==null&&x!==void 0?x:void 0}:{type:String(A),callback:M??void 0,capture:!!k,passive:!1,once:!1,signal:void 0}}function _n(A,M,k){return mi(M),T.default(k)==="object"&&k!==null?{type:String(A),callback:M??void 0,capture:!!k.capture}:{type:String(A),callback:M??void 0,capture:!!k}}function mi(A){if(!(typeof A=="function"||T.default(A)==="object"&&A!==null&&typeof A.handleEvent=="function")){if(A==null||T.default(A)==="object"){te.warn(A);return}throw new TypeError(w(te.message,[A]))}}function io(A,M,k,x){ge.warn(be(A)?"capture":"bubble",A.callback),Xe(A)!==M&&de.warn("passive"),yt(A)!==k&&de.warn("once"),A.signal!==x&&de.warn("signal")}for(var Tn=Object.getOwnPropertyNames(Dt.prototype),Qe=0;Qe<Tn.length;++Qe)Tn[Qe]!=="constructor"&&Object.defineProperty(Dt.prototype,Tn[Qe],{enumerable:!0});typeof b<"u"&&typeof b.EventTarget<"u"&&Object.setPrototypeOf(Dt.prototype,b.EventTarget.prototype);function Gr(A,M){var k,x,G=fr(A,"target");return(x=(k=G[M])===null||k===void 0?void 0:k.attrCallback)!==null&&x!==void 0?x:null}function In(A,M,k){k!=null&&typeof k!="function"&&qe.warn(k),typeof k=="function"||T.default(k)==="object"&&k!==null?oo(A,M,k):so(A,M)}function oo(A,M,k){var x=Re(fr(A,"target"),String(M));x.attrCallback=k,x.attrListener==null&&(x.attrListener=Ht(x,ao(x),!1,!1,!1,void 0))}function so(A,M){var k=fr(A,"target"),x=k[String(M)];x&&x.attrListener&&(Kt(x,x.attrListener.callback,!1),x.attrCallback=x.attrListener=void 0)}function ao(A){return function(M){var k=A.attrCallback;typeof k=="function"&&k.call(this,M)}}function Ok(){for(var A=function(k){g.default(G,k);var x=B(G);function G(){return E.default(this,G),x.apply(this,arguments)}return G}(Dt),M=0;M<arguments.length;++M)Ky(A.prototype,M<0||arguments.length<=M?void 0:arguments[M]);return A}function Ky(A,M,k){Object.defineProperty(A,"on".concat(M),{get:function(){return Gr(this,M)},set:function(G){In(this,M,G)},configurable:!0,enumerable:!0})}return Jt.Event=Ee,Jt.EventTarget=Dt,Jt.default=Dt,Jt.defineCustomEventTarget=Ok,Jt.defineEventAttribute=Ky,Jt.getEventAttributeValue=Gr,Jt.setErrorHandler=z,Jt.setEventAttributeValue=In,Jt.setWarningHandler=W,Jt}var Qc={},Yc={},FC;function bj(){if(FC)return Yc;FC=1;var e=rt;Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.default=i;var t=e(Rn());function r(o,s){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);s&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),a.push.apply(a,u)}return a}function n(o){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?r(Object(a),!0).forEach(function(u){(0,t.default)(o,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(a,u))})}return o}function i(o,s){var a=n(n(n({},[].reduce.call(o,function(u,c,l){return u[l]=c,u},{})),s),{},(0,t.default)({length:o.length},Symbol.iterator,function(){return[].slice.call(a)[Symbol.iterator]()}));return a}return Yc}var Co={},zd={},Ld={},Ro={},xd={},Ne={},qd={},An={},Bd={},Po={},Xc={},UC;function Vb(){if(UC)return Xc;UC=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.default=r;let e;const t=new Uint8Array(16);function r(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Xc}var Ci={},Eo={},wo={},VC;function Oj(){if(VC)return wo;VC=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return wo.default=e,wo}var WC;function Sp(){if(WC)return Eo;WC=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.default=void 0;var e=t(Oj());function t(i){return i&&i.__esModule?i:{default:i}}function r(i){return typeof i=="string"&&e.default.test(i)}var n=r;return Eo.default=n,Eo}var $C;function Cp(){if($C)return Ci;$C=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.default=void 0,Ci.unsafeStringify=n;var e=t(Sp());function t(s){return s&&s.__esModule?s:{default:s}}const r=[];for(let s=0;s<256;++s)r.push((s+256).toString(16).slice(1));function n(s,a=0){return r[s[a+0]]+r[s[a+1]]+r[s[a+2]]+r[s[a+3]]+"-"+r[s[a+4]]+r[s[a+5]]+"-"+r[s[a+6]]+r[s[a+7]]+"-"+r[s[a+8]]+r[s[a+9]]+"-"+r[s[a+10]]+r[s[a+11]]+r[s[a+12]]+r[s[a+13]]+r[s[a+14]]+r[s[a+15]]}function i(s,a=0){const u=n(s,a);if(!(0,e.default)(u))throw TypeError("Stringified UUID is invalid");return u}var o=i;return Ci.default=o,Ci}var HC;function kj(){if(HC)return Po;HC=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.default=void 0;var e=r(Vb()),t=Cp();function r(c){return c&&c.__esModule?c:{default:c}}let n,i,o=0,s=0;function a(c,l,p){let d=l&&p||0;const h=l||new Array(16);c=c||{};let f=c.node||n,v=c.clockseq!==void 0?c.clockseq:i;if(f==null||v==null){const P=c.random||(c.rng||e.default)();f==null&&(f=n=[P[0]|1,P[1],P[2],P[3],P[4],P[5]]),v==null&&(v=i=(P[6]<<8|P[7])&16383)}let y=c.msecs!==void 0?c.msecs:Date.now(),g=c.nsecs!==void 0?c.nsecs:s+1;const m=y-o+(g-s)/1e4;if(m<0&&c.clockseq===void 0&&(v=v+1&16383),(m<0||y>o)&&c.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=y,s=g,i=v,y+=122192928e5;const S=((y&268435455)*1e4+g)%4294967296;h[d++]=S>>>24&255,h[d++]=S>>>16&255,h[d++]=S>>>8&255,h[d++]=S&255;const C=y/4294967296*1e4&268435455;h[d++]=C>>>8&255,h[d++]=C&255,h[d++]=C>>>24&15|16,h[d++]=C>>>16&255,h[d++]=v>>>8|128,h[d++]=v&255;for(let P=0;P<6;++P)h[d+P]=f[P];return l||(0,t.unsafeStringify)(h)}var u=a;return Po.default=u,Po}var _o={},Qr={},To={},KC;function Wb(){if(KC)return To;KC=1,Object.defineProperty(To,"__esModule",{value:!0}),To.default=void 0;var e=t(Sp());function t(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");let o;const s=new Uint8Array(16);return s[0]=(o=parseInt(i.slice(0,8),16))>>>24,s[1]=o>>>16&255,s[2]=o>>>8&255,s[3]=o&255,s[4]=(o=parseInt(i.slice(9,13),16))>>>8,s[5]=o&255,s[6]=(o=parseInt(i.slice(14,18),16))>>>8,s[7]=o&255,s[8]=(o=parseInt(i.slice(19,23),16))>>>8,s[9]=o&255,s[10]=(o=parseInt(i.slice(24,36),16))/1099511627776&255,s[11]=o/4294967296&255,s[12]=o>>>24&255,s[13]=o>>>16&255,s[14]=o>>>8&255,s[15]=o&255,s}var n=r;return To.default=n,To}var GC;function $b(){if(GC)return Qr;GC=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.URL=Qr.DNS=void 0,Qr.default=s;var e=Cp(),t=r(Wb());function r(a){return a&&a.__esModule?a:{default:a}}function n(a){a=unescape(encodeURIComponent(a));const u=[];for(let c=0;c<a.length;++c)u.push(a.charCodeAt(c));return u}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Qr.DNS=i;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Qr.URL=o;function s(a,u,c){function l(p,d,h,f){var v;if(typeof p=="string"&&(p=n(p)),typeof d=="string"&&(d=(0,t.default)(d)),((v=d)===null||v===void 0?void 0:v.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+p.length);if(y.set(d),y.set(p,d.length),y=c(y),y[6]=y[6]&15|u,y[8]=y[8]&63|128,h){f=f||0;for(let g=0;g<16;++g)h[f+g]=y[g];return h}return(0,e.unsafeStringify)(y)}try{l.name=a}catch{}return l.DNS=i,l.URL=o,l}return Qr}var Io={},JC;function Mj(){if(JC)return Io;JC=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.default=void 0;function e(h){if(typeof h=="string"){const f=unescape(encodeURIComponent(h));h=new Uint8Array(f.length);for(let v=0;v<f.length;++v)h[v]=f.charCodeAt(v)}return t(n(i(h),h.length*8))}function t(h){const f=[],v=h.length*32,y="0123456789abcdef";for(let g=0;g<v;g+=8){const m=h[g>>5]>>>g%32&255,S=parseInt(y.charAt(m>>>4&15)+y.charAt(m&15),16);f.push(S)}return f}function r(h){return(h+64>>>9<<4)+14+1}function n(h,f){h[f>>5]|=128<<f%32,h[r(f)-1]=f;let v=1732584193,y=-271733879,g=-1732584194,m=271733878;for(let S=0;S<h.length;S+=16){const C=v,P=y,E=g,R=m;v=u(v,y,g,m,h[S],7,-680876936),m=u(m,v,y,g,h[S+1],12,-389564586),g=u(g,m,v,y,h[S+2],17,606105819),y=u(y,g,m,v,h[S+3],22,-1044525330),v=u(v,y,g,m,h[S+4],7,-176418897),m=u(m,v,y,g,h[S+5],12,1200080426),g=u(g,m,v,y,h[S+6],17,-1473231341),y=u(y,g,m,v,h[S+7],22,-45705983),v=u(v,y,g,m,h[S+8],7,1770035416),m=u(m,v,y,g,h[S+9],12,-1958414417),g=u(g,m,v,y,h[S+10],17,-42063),y=u(y,g,m,v,h[S+11],22,-1990404162),v=u(v,y,g,m,h[S+12],7,1804603682),m=u(m,v,y,g,h[S+13],12,-40341101),g=u(g,m,v,y,h[S+14],17,-1502002290),y=u(y,g,m,v,h[S+15],22,1236535329),v=c(v,y,g,m,h[S+1],5,-165796510),m=c(m,v,y,g,h[S+6],9,-1069501632),g=c(g,m,v,y,h[S+11],14,643717713),y=c(y,g,m,v,h[S],20,-373897302),v=c(v,y,g,m,h[S+5],5,-701558691),m=c(m,v,y,g,h[S+10],9,38016083),g=c(g,m,v,y,h[S+15],14,-660478335),y=c(y,g,m,v,h[S+4],20,-405537848),v=c(v,y,g,m,h[S+9],5,568446438),m=c(m,v,y,g,h[S+14],9,-1019803690),g=c(g,m,v,y,h[S+3],14,-187363961),y=c(y,g,m,v,h[S+8],20,1163531501),v=c(v,y,g,m,h[S+13],5,-1444681467),m=c(m,v,y,g,h[S+2],9,-51403784),g=c(g,m,v,y,h[S+7],14,1735328473),y=c(y,g,m,v,h[S+12],20,-1926607734),v=l(v,y,g,m,h[S+5],4,-378558),m=l(m,v,y,g,h[S+8],11,-2022574463),g=l(g,m,v,y,h[S+11],16,1839030562),y=l(y,g,m,v,h[S+14],23,-35309556),v=l(v,y,g,m,h[S+1],4,-1530992060),m=l(m,v,y,g,h[S+4],11,1272893353),g=l(g,m,v,y,h[S+7],16,-155497632),y=l(y,g,m,v,h[S+10],23,-1094730640),v=l(v,y,g,m,h[S+13],4,681279174),m=l(m,v,y,g,h[S],11,-358537222),g=l(g,m,v,y,h[S+3],16,-722521979),y=l(y,g,m,v,h[S+6],23,76029189),v=l(v,y,g,m,h[S+9],4,-640364487),m=l(m,v,y,g,h[S+12],11,-421815835),g=l(g,m,v,y,h[S+15],16,530742520),y=l(y,g,m,v,h[S+2],23,-995338651),v=p(v,y,g,m,h[S],6,-198630844),m=p(m,v,y,g,h[S+7],10,1126891415),g=p(g,m,v,y,h[S+14],15,-1416354905),y=p(y,g,m,v,h[S+5],21,-57434055),v=p(v,y,g,m,h[S+12],6,1700485571),m=p(m,v,y,g,h[S+3],10,-1894986606),g=p(g,m,v,y,h[S+10],15,-1051523),y=p(y,g,m,v,h[S+1],21,-2054922799),v=p(v,y,g,m,h[S+8],6,1873313359),m=p(m,v,y,g,h[S+15],10,-30611744),g=p(g,m,v,y,h[S+6],15,-1560198380),y=p(y,g,m,v,h[S+13],21,1309151649),v=p(v,y,g,m,h[S+4],6,-145523070),m=p(m,v,y,g,h[S+11],10,-1120210379),g=p(g,m,v,y,h[S+2],15,718787259),y=p(y,g,m,v,h[S+9],21,-343485551),v=o(v,C),y=o(y,P),g=o(g,E),m=o(m,R)}return[v,y,g,m]}function i(h){if(h.length===0)return[];const f=h.length*8,v=new Uint32Array(r(f));for(let y=0;y<f;y+=8)v[y>>5]|=(h[y/8]&255)<<y%32;return v}function o(h,f){const v=(h&65535)+(f&65535);return(h>>16)+(f>>16)+(v>>16)<<16|v&65535}function s(h,f){return h<<f|h>>>32-f}function a(h,f,v,y,g,m){return o(s(o(o(f,h),o(y,m)),g),v)}function u(h,f,v,y,g,m,S){return a(f&v|~f&y,h,f,g,m,S)}function c(h,f,v,y,g,m,S){return a(f&y|v&~y,h,f,g,m,S)}function l(h,f,v,y,g,m,S){return a(f^v^y,h,f,g,m,S)}function p(h,f,v,y,g,m,S){return a(v^(f|~y),h,f,g,m,S)}var d=e;return Io.default=d,Io}var QC;function Dj(){if(QC)return _o;QC=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.default=void 0;var e=r($b()),t=r(Mj());function r(o){return o&&o.__esModule?o:{default:o}}var i=(0,e.default)("v3",48,t.default);return _o.default=i,_o}var Ao={},bo={},YC;function Nj(){if(YC)return bo;YC=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return bo.default=t,bo}var XC;function jj(){if(XC)return Ao;XC=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var e=n(Nj()),t=n(Vb()),r=Cp();function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a,u){if(e.default.randomUUID&&!a&&!s)return e.default.randomUUID();s=s||{};const c=s.random||(s.rng||t.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,a){u=u||0;for(let l=0;l<16;++l)a[u+l]=c[l];return a}return(0,r.unsafeStringify)(c)}var o=i;return Ao.default=o,Ao}var Oo={},ko={},ZC;function zj(){if(ZC)return ko;ZC=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.default=void 0;function e(i,o,s,a){switch(i){case 0:return o&s^~o&a;case 1:return o^s^a;case 2:return o&s^o&a^s&a;case 3:return o^s^a}}function t(i,o){return i<<o|i>>>32-o}function r(i){const o=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const l=unescape(encodeURIComponent(i));i=[];for(let p=0;p<l.length;++p)i.push(l.charCodeAt(p))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const a=i.length/4+2,u=Math.ceil(a/16),c=new Array(u);for(let l=0;l<u;++l){const p=new Uint32Array(16);for(let d=0;d<16;++d)p[d]=i[l*64+d*4]<<24|i[l*64+d*4+1]<<16|i[l*64+d*4+2]<<8|i[l*64+d*4+3];c[l]=p}c[u-1][14]=(i.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(i.length-1)*8&4294967295;for(let l=0;l<u;++l){const p=new Uint32Array(80);for(let g=0;g<16;++g)p[g]=c[l][g];for(let g=16;g<80;++g)p[g]=t(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);let d=s[0],h=s[1],f=s[2],v=s[3],y=s[4];for(let g=0;g<80;++g){const m=Math.floor(g/20),S=t(d,5)+e(m,h,f,v)+y+o[m]+p[g]>>>0;y=v,v=f,f=t(h,30)>>>0,h=d,d=S}s[0]=s[0]+d>>>0,s[1]=s[1]+h>>>0,s[2]=s[2]+f>>>0,s[3]=s[3]+v>>>0,s[4]=s[4]+y>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,s[0]&255,s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,s[1]&255,s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,s[2]&255,s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,s[3]&255,s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,s[4]&255]}var n=r;return ko.default=n,ko}var eR;function Lj(){if(eR)return Oo;eR=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.default=void 0;var e=r($b()),t=r(zj());function r(o){return o&&o.__esModule?o:{default:o}}var i=(0,e.default)("v5",80,t.default);return Oo.default=i,Oo}var Mo={},tR;function xj(){if(tR)return Mo;tR=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Mo.default=e,Mo}var Do={},rR;function qj(){if(rR)return Do;rR=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.default=void 0;var e=t(Sp());function t(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var n=r;return Do.default=n,Do}var nR;function Bj(){return nR||(nR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.default}});var t=l(kj()),r=l(Dj()),n=l(jj()),i=l(Lj()),o=l(xj()),s=l(qj()),a=l(Sp()),u=l(Cp()),c=l(Wb());function l(p){return p&&p.__esModule?p:{default:p}}}(Bd)),Bd}var iR;function fi(){if(iR)return An;iR=1,Object.defineProperty(An,"__esModule",{value:!0}),An.createNoDashGuid=An.createGuid=void 0;const e=Bj(),t=()=>e.v4();An.createGuid=t;const r=()=>t().replace(new RegExp("-","g"),"").toUpperCase();return An.createNoDashGuid=r,An}var oR;function wc(){return oR||(oR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=fi();(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(e.EventType||(e.EventType={}));class r{constructor(i,o){this.privName=i,this.privEventId=t.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=o,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=r}(qd)),qd}var sR;function Fj(){if(sR)return Ne;sR=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.AudioStreamNodeErrorEvent=Ne.AudioStreamNodeDetachedEvent=Ne.AudioStreamNodeAttachedEvent=Ne.AudioStreamNodeAttachingEvent=Ne.AudioStreamNodeEvent=Ne.AudioSourceErrorEvent=Ne.AudioSourceOffEvent=Ne.AudioSourceReadyEvent=Ne.AudioSourceInitializingEvent=Ne.AudioSourceEvent=void 0;const e=wc();class t extends e.PlatformEvent{constructor(d,h,f=e.EventType.Info){super(d,f),this.privAudioSourceId=h}get audioSourceId(){return this.privAudioSourceId}}Ne.AudioSourceEvent=t;class r extends t{constructor(d){super("AudioSourceInitializingEvent",d)}}Ne.AudioSourceInitializingEvent=r;class n extends t{constructor(d){super("AudioSourceReadyEvent",d)}}Ne.AudioSourceReadyEvent=n;class i extends t{constructor(d){super("AudioSourceOffEvent",d)}}Ne.AudioSourceOffEvent=i;class o extends t{constructor(d,h){super("AudioSourceErrorEvent",d,e.EventType.Error),this.privError=h}get error(){return this.privError}}Ne.AudioSourceErrorEvent=o;class s extends t{constructor(d,h,f){super(d,h),this.privAudioNodeId=f}get audioNodeId(){return this.privAudioNodeId}}Ne.AudioStreamNodeEvent=s;class a extends s{constructor(d,h){super("AudioStreamNodeAttachingEvent",d,h)}}Ne.AudioStreamNodeAttachingEvent=a;class u extends s{constructor(d,h){super("AudioStreamNodeAttachedEvent",d,h)}}Ne.AudioStreamNodeAttachedEvent=u;class c extends s{constructor(d,h){super("AudioStreamNodeDetachedEvent",d,h)}}Ne.AudioStreamNodeDetachedEvent=c;class l extends s{constructor(d,h,f){super("AudioStreamNodeErrorEvent",d,h),this.privError=f}get error(){return this.privError}}return Ne.AudioStreamNodeErrorEvent=l,Ne}var Ve={},aR;function Uj(){if(aR)return Ve;aR=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.ConnectionMessageSentEvent=Ve.ConnectionMessageReceivedEvent=Ve.ConnectionEstablishErrorEvent=Ve.ConnectionErrorEvent=Ve.ConnectionClosedEvent=Ve.ConnectionEstablishedEvent=Ve.ConnectionStartEvent=Ve.ConnectionEvent=Ve.ServiceEvent=void 0;const e=wc();class t extends e.PlatformEvent{constructor(p,d,h=e.EventType.Info){super(p,h),this.privJsonResult=d}get jsonString(){return this.privJsonResult}}Ve.ServiceEvent=t;class r extends e.PlatformEvent{constructor(p,d,h=e.EventType.Info){super(p,h),this.privConnectionId=d}get connectionId(){return this.privConnectionId}}Ve.ConnectionEvent=r;class n extends r{constructor(p,d,h){super("ConnectionStartEvent",p),this.privUri=d,this.privHeaders=h}get uri(){return this.privUri}get headers(){return this.privHeaders}}Ve.ConnectionStartEvent=n;class i extends r{constructor(p){super("ConnectionEstablishedEvent",p)}}Ve.ConnectionEstablishedEvent=i;class o extends r{constructor(p,d,h){super("ConnectionClosedEvent",p,e.EventType.Debug),this.privReason=h,this.privStatusCode=d}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Ve.ConnectionClosedEvent=o;class s extends r{constructor(p,d,h){super("ConnectionErrorEvent",p,e.EventType.Debug),this.privMessage=d,this.privType=h}get message(){return this.privMessage}get type(){return this.privType}}Ve.ConnectionErrorEvent=s;class a extends r{constructor(p,d,h){super("ConnectionEstablishErrorEvent",p,e.EventType.Error),this.privStatusCode=d,this.privReason=h}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Ve.ConnectionEstablishErrorEvent=a;class u extends r{constructor(p,d,h){super("ConnectionMessageReceivedEvent",p),this.privNetworkReceivedTime=d,this.privMessage=h}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}Ve.ConnectionMessageReceivedEvent=u;class c extends r{constructor(p,d,h){super("ConnectionMessageSentEvent",p),this.privNetworkSentTime=d,this.privMessage=h}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}return Ve.ConnectionMessageSentEvent=c,Ve}var Fd={},Ar={},uR;function Er(){if(uR)return Ar;uR=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.ObjectDisposedError=Ar.InvalidOperationError=Ar.ArgumentNullError=void 0;class e extends Error{constructor(i){super(i),this.name="ArgumentNull",this.message=i}}Ar.ArgumentNullError=e;class t extends Error{constructor(i){super(i),this.name="InvalidOperation",this.message=i}}Ar.InvalidOperationError=t;class r extends Error{constructor(i,o){super(o),this.name=i+"ObjectDisposed",this.message=o}}return Ar.ObjectDisposedError=r,Ar}var cR;function Hb(){return cR||(cR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=Er(),r=fi();var n;(function(o){o[o.Text=0]="Text",o[o.Binary=1]="Binary"})(n=e.MessageType||(e.MessageType={}));class i{constructor(s,a,u,c){if(this.privBody=null,s===n.Text&&a&&typeof a!="string")throw new t.InvalidOperationError("Payload must be a string");if(s===n.Binary&&a&&!(a instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=s,this.privBody=a,this.privHeaders=u||{},this.privId=c||r.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i}(Fd)),Fd}var No={},lR;function Vj(){if(lR)return No;lR=1,Object.defineProperty(No,"__esModule",{value:!0}),No.ConnectionOpenResponse=void 0;let e=class{constructor(r,n){this.privStatusCode=r,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return No.ConnectionOpenResponse=e,No}var jo={},pR;function Wj(){if(pR)return jo;pR=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.DeferralMap=void 0;let e=class{constructor(){this.privMap={}}add(r,n){this.privMap[r]=n}getId(r){return this.privMap[r]}complete(r,n){try{this.privMap[r].resolve(n)}catch(i){this.privMap[r].reject(i)}finally{this.privMap[r]=void 0}}};return jo.DeferralMap=e,jo}var bn={},dR;function Kb(){if(dR)return bn;dR=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.SendingAgentContextMessageEvent=bn.DialogEvent=void 0;const e=wc();class t extends e.PlatformEvent{constructor(i,o=e.EventType.Info){super(i,o)}}bn.DialogEvent=t;class r extends t{constructor(i){super("SendingAgentContextMessageEvent"),this.privAgentConfig=i}get agentConfig(){return this.privAgentConfig}}return bn.SendingAgentContextMessageEvent=r,bn}var zo={},Lo={},hR;function Gb(){if(hR)return Lo;hR=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.EventSource=void 0;const e=Er(),t=fi();let r=class{constructor(i){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=i}onEvent(i){if(this.isDisposed())throw new e.ObjectDisposedError("EventSource");if(this.metadata)for(const o in this.metadata)o&&i.metadata&&(i.metadata[o]||(i.metadata[o]=this.metadata[o]));for(const o in this.privEventListeners)o&&this.privEventListeners[o]&&this.privEventListeners[o](i)}attach(i){const o=t.createNoDashGuid();return this.privEventListeners[o]=i,{detach:()=>(delete this.privEventListeners[o],Promise.resolve())}}attachListener(i){return this.attach(o=>i.onEvent(o))}attachConsoleListener(i){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(o=>i.onEvent(o)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return Lo.EventSource=r,Lo}var fR;function $j(){if(fR)return zo;fR=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.Events=void 0;const e=Er(),t=Gb();let r=class fm{static setEventSource(i){if(!i)throw new e.ArgumentNullError("eventSource");fm.privInstance=i}static get instance(){return fm.privInstance}};return zo.Events=r,r.privInstance=new t.EventSource,zo}var Ud={},vR;function Hj(){return vR||(vR=1,Object.defineProperty(Ud,"__esModule",{value:!0})),Ud}var Vd={},gR;function Kj(){return gR||(gR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))}(Vd)),Vd}var Wd={},mR;function Gj(){return mR||(mR=1,Object.defineProperty(Wd,"__esModule",{value:!0})),Wd}var $d={},yR;function Jj(){return yR||(yR=1,Object.defineProperty($d,"__esModule",{value:!0})),$d}var Hd={},SR;function Qj(){return SR||(SR=1,Object.defineProperty(Hd,"__esModule",{value:!0})),Hd}var Kd={},CR;function Yj(){return CR||(CR=1,Object.defineProperty(Kd,"__esModule",{value:!0})),Kd}var Gd={},RR;function Xj(){return RR||(RR=1,Object.defineProperty(Gd,"__esModule",{value:!0})),Gd}var Jd={},PR;function Zj(){return PR||(PR=1,Object.defineProperty(Jd,"__esModule",{value:!0})),Jd}var Qd={},ER;function ez(){return ER||(ER=1,Object.defineProperty(Qd,"__esModule",{value:!0})),Qd}var Yd={},wR;function tz(){return wR||(wR=1,Object.defineProperty(Yd,"__esModule",{value:!0})),Yd}var xo={},_R;function Jb(){if(_R)return xo;_R=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.List=void 0;const e=Er();let t=class Jn{constructor(n){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],n)for(const i of n)this.privList.push(i)}get(n){return this.throwIfDisposed(),this.privList[n]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(n){this.throwIfDisposed(),this.insertAt(this.privList.length,n)}insertAt(n,i){this.throwIfDisposed(),n===0?this.privList.unshift(i):n===this.privList.length?this.privList.push(i):this.privList.splice(n,0,i),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(n){return this.throwIfDisposed(),this.remove(n,1)[0]}remove(n,i){this.throwIfDisposed();const o=this.privList.splice(n,i);return this.triggerSubscriptions(this.privRemoveSubscriptions),o}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[i]=n,{detach:()=>(delete this.privAddSubscriptions[i],Promise.resolve())}}onRemoved(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[i]=n,{detach:()=>(delete this.privRemoveSubscriptions[i],Promise.resolve())}}onDisposed(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[i]=n,{detach:()=>(delete this.privDisposedSubscriptions[i],Promise.resolve())}}join(n){return this.throwIfDisposed(),this.privList.join(n)}toArray(){const n=Array();return this.privList.forEach(i=>{n.push(i)}),n}any(n){return this.throwIfDisposed(),n?this.where(n).length()>0:this.length()>0}all(n){return this.throwIfDisposed(),this.where(n).length()===this.length()}forEach(n){this.throwIfDisposed();for(let i=0;i<this.length();i++)n(this.privList[i],i)}select(n){this.throwIfDisposed();const i=[];for(let o=0;o<this.privList.length;o++)i.push(n(this.privList[o],o));return new Jn(i)}where(n){this.throwIfDisposed();const i=new Jn;for(let o=0;o<this.privList.length;o++)n(this.privList[o],o)&&i.add(this.privList[o]);return i}orderBy(n){this.throwIfDisposed();const o=this.toArray().sort(n);return new Jn(o)}orderByDesc(n){return this.throwIfDisposed(),this.orderBy((i,o)=>n(o,i))}clone(){return this.throwIfDisposed(),new Jn(this.toArray())}concat(n){return this.throwIfDisposed(),new Jn(this.privList.concat(n.toArray()))}concatArray(n){return this.throwIfDisposed(),new Jn(this.privList.concat(n))}isDisposed(){return this.privList==null}dispose(n){this.isDisposed()||(this.privDisposeReason=n,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new e.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(n){if(n)for(const i in n)i&&n[i]()}};return xo.List=t,xo}var Xd={},TR;function Qb(){return TR||(TR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(a){a[a.None=0]="None",a[a.Resolved=1]="Resolved",a[a.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class r{constructor(u){this.throwIfError=()=>{if(this.isError)throw this.error},u.on(c=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=c)},c=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=c)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=r;class n{constructor(){this.setResult=u=>{this.privOnSetResult(u)},this.setError=u=>{this.privOnSetError(u)},this.on=(u,c)=>{this.privOnSetResult=u,this.privOnSetError=c}}}e.PromiseResultEventSource=n;class i{constructor(){this.resolve=u=>(this.privResolve(u),this),this.reject=u=>(this.privReject(u),this),this.privPromise=new Promise((u,c)=>{this.privResolve=u,this.privReject=c})}get promise(){return this.privPromise}}e.Deferred=i;class o{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(u){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(u);for(let c=0;c<this.privSuccessHandlers.length;c++)this.executeSuccessCallback(u,this.privSuccessHandlers[c],this.privErrorHandlers[c]);this.detachHandlers()}reject(u){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(u);for(const c of this.privErrorHandlers)this.executeErrorCallback(u,c);this.detachHandlers()}on(u,c){u==null&&(u=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(u),this.privErrorHandlers.push(c)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,u,c):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,c),this.detachHandlers())}executeSuccessCallback(u,c,l){try{c(u)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(u,c){if(c)try{c(u)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${u}'`)}else throw new Error(`'Unhandled error: ${u}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=o;function s(a,u,c){a.then(l=>{try{u&&u(l)}catch(p){if(c)try{if(p instanceof Error){const d=p;c(d.name+": "+d.message)}else c(p)}catch{}}},l=>{if(c)try{if(l instanceof Error){const p=l;c(p.name+": "+p.message)}else c(l)}catch{}})}e.marshalPromiseToCallbacks=s}(Xd)),Xd}var qo={},IR;function Yb(){if(IR)return qo;IR=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.Queue=void 0;const e=Er(),t=Jb(),r=Qb();var n;(function(o){o[o.Dequeue=0]="Dequeue",o[o.Peek=1]="Peek"})(n||(n={}));let i=class{constructor(s){this.privPromiseStore=new t.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=s||new t.List,this.privDetachables=[],this.privSubscribers=new t.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(s){this.throwIfDispose(),this.enqueueFromPromise(new Promise(a=>a(s)))}enqueueFromPromise(s){this.throwIfDispose(),s.then(a=>{this.privList.add(a)},()=>{})}dequeue(){this.throwIfDispose();const s=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:s,type:n.Dequeue}),this.drain()),s.promise}peek(){this.throwIfDispose();const s=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:s,type:n.Peek}),this.drain()),s.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(s,a){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=a,this.privIsDisposing=!0;const u=this.privSubscribers;if(u){for(;u.length()>0;)u.removeFirst().deferral.resolve(void 0);this.privSubscribers===u&&(this.privSubscribers=u)}for(const c of this.privDetachables)await c.detach();if(this.privPromiseStore.length()>0&&s){const c=[];return this.privPromiseStore.toArray().forEach(l=>{c.push(l)}),Promise.all(c).finally(()=>{this.privSubscribers=null,this.privList.forEach(l=>{s(l)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(s){await this.drainAndDispose(null,s)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const s=this.privSubscribers,a=this.privList;if(s&&a){for(;a.length()>0&&s.length()>0&&!this.privIsDisposing;){const u=s.removeFirst();if(u.type===n.Peek)u.deferral.resolve(a.first());else{const c=a.removeFirst();u.deferral.resolve(c)}}this.privSubscribers===s&&(this.privSubscribers=s),this.privList===a&&(this.privList=a)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new e.InvalidOperationError(this.privDisposeReason):new e.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new e.InvalidOperationError("Queue disposing")}};return qo.Queue=i,qo}var Bo={},AR;function rz(){if(AR)return Bo;AR=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.RawWebsocketMessage=void 0;const e=Hb(),t=Er(),r=fi();let n=class{constructor(o,s,a){if(this.privPayload=null,!s)throw new t.ArgumentNullError("payload");if(o===e.MessageType.Binary&&Object.getPrototypeOf(s).constructor.name!=="ArrayBuffer")throw new t.InvalidOperationError("Payload must be ArrayBuffer");if(o===e.MessageType.Text&&typeof s!="string")throw new t.InvalidOperationError("Payload must be a string");this.privMessageType=o,this.privPayload=s,this.privId=a||r.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===e.MessageType.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===e.MessageType.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return Bo.RawWebsocketMessage=n,Bo}var Fo={},bR;function nz(){if(bR)return Fo;bR=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.RiffPcmEncoder=void 0;let e=class{constructor(r,n){this.privActualSampleRate=r,this.privDesiredSampleRate=n}encode(r){const n=this.downSampleAudioFrame(r,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const i=n.length*2,o=new ArrayBuffer(i),s=new DataView(o);return this.floatTo16BitPCM(s,0,n),o}setString(r,n,i){for(let o=0;o<i.length;o++)r.setUint8(n+o,i.charCodeAt(o))}floatTo16BitPCM(r,n,i){for(let o=0;o<i.length;o++,n+=2){const s=Math.max(-1,Math.min(1,i[o]));r.setInt16(n,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(r,n,i){if(!r)return null;if(i===n||i>n)return r;const o=n/i,s=Math.round(r.length/o),a=new Float32Array(s);let u=0,c=0;for(;c<s;){const l=Math.round((c+1)*o);let p=0,d=0;for(;u<l&&u<r.length;)p+=r[u++],d++;a[c++]=p/d}return a}};return Fo.RiffPcmEncoder=e,Fo}var Uo={},OR;function iz(){if(OR)return Uo;OR=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.Stream=void 0;const e=Er(),t=fi(),r=Yb();let n=class{constructor(o){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=o||t.createNoDashGuid(),this.privReaderQueue=new r.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(o){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(o)}catch{}}read(){if(this.privIsReadEnded)throw new e.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async o=>((o===void 0||o.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),o))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new r.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new e.InvalidOperationError("Stream closed")}};return Uo.Stream=n,Uo}var Zd={},kR;function Ey(){return kR||(kR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))}(Zd)),Zd}var Vo={},MR;function oz(){if(MR)return Vo;MR=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.ChunkedArrayBufferStream=void 0;const e=ne();let t=class extends e.Stream{constructor(n,i){super(i),this.privTargetChunkSize=n,this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const o=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),s=new Uint8Array(this.privNextBufferToWrite),a=new Uint8Array(n.buffer.slice(i,o+i));s.set(a,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=o,i+=o,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Vo.ChunkedArrayBufferStream=t,Vo}var eh={},DR;function sz(){return DR||(DR=1,Object.defineProperty(eh,"__esModule",{value:!0})),eh}var Wo={},NR;function az(){if(NR)return Wo;NR=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.Timeout=void 0;let e=class Xr{static load(){const r=new Map([[0,()=>{}]]),n=new Map,o="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(o);return s.addEventListener("message",({data:c})=>{if(Xr.isCallNotification(c)){const{params:{timerId:l}}=c,p=r.get(l);if(typeof p=="number"){const d=n.get(p);if(d===void 0||d!==l)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p(),r.delete(l);else throw new Error("The timer is in an undefined state.")}else if(Xr.isClearResponse(c)){const{id:l}=c,p=n.get(l);if(p===void 0)throw new Error("The timer is in an undefined state.");n.delete(l),r.delete(p)}else{const{error:{message:l}}=c;throw new Error(l)}}),{clearTimeout:c=>{const l=Math.random();n.set(l,c),r.set(c,l),s.postMessage({id:l,method:"clear",params:{timerId:c}})},setTimeout:(c,l)=>{const p=Math.random();return r.set(p,c),s.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:p}}),p}}}static loadWorkerTimers(){return()=>(Xr.workerTimers!==null||(Xr.workerTimers=Xr.load()),Xr.workerTimers)}static isCallNotification(r){return r.method!==void 0&&r.method==="call"}static isClearResponse(r){return r.error===null&&typeof r.id=="number"}};return Wo.Timeout=e,e.workerTimers=null,e.clearTimeout=t=>e.timers().clearTimeout(t),e.setTimeout=(t,r)=>e.timers().setTimeout(t,r),e.timers=e.loadWorkerTimers(),Wo}var me={},jR;function uz(){if(jR)return me;jR=1,Object.defineProperty(me,"__esModule",{value:!0}),me.OCSPCacheUpdateErrorEvent=me.OCSPResponseRetrievedEvent=me.OCSPCacheFetchErrorEvent=me.OCSPVerificationFailedEvent=me.OCSPCacheHitEvent=me.OCSPCacheEntryNeedsRefreshEvent=me.OCSPCacheEntryExpiredEvent=me.OCSPWSUpgradeStartedEvent=me.OCSPStapleReceivedEvent=me.OCSPCacheUpdateCompleteEvent=me.OCSPDiskCacheStoreEvent=me.OCSPMemoryCacheStoreEvent=me.OCSPCacheUpdateNeededEvent=me.OCSPDiskCacheHitEvent=me.OCSPCacheMissEvent=me.OCSPMemoryCacheHitEvent=me.OCSPEvent=void 0;const e=wc();class t extends e.PlatformEvent{constructor(S,C,P){super(S,C),this.privSignature=P}}me.OCSPEvent=t;class r extends t{constructor(S){super("OCSPMemoryCacheHitEvent",e.EventType.Debug,S)}}me.OCSPMemoryCacheHitEvent=r;class n extends t{constructor(S){super("OCSPCacheMissEvent",e.EventType.Debug,S)}}me.OCSPCacheMissEvent=n;class i extends t{constructor(S){super("OCSPDiskCacheHitEvent",e.EventType.Debug,S)}}me.OCSPDiskCacheHitEvent=i;class o extends t{constructor(S){super("OCSPCacheUpdateNeededEvent",e.EventType.Debug,S)}}me.OCSPCacheUpdateNeededEvent=o;class s extends t{constructor(S){super("OCSPMemoryCacheStoreEvent",e.EventType.Debug,S)}}me.OCSPMemoryCacheStoreEvent=s;class a extends t{constructor(S){super("OCSPDiskCacheStoreEvent",e.EventType.Debug,S)}}me.OCSPDiskCacheStoreEvent=a;class u extends t{constructor(S){super("OCSPCacheUpdateCompleteEvent",e.EventType.Debug,S)}}me.OCSPCacheUpdateCompleteEvent=u;class c extends t{constructor(){super("OCSPStapleReceivedEvent",e.EventType.Debug,"")}}me.OCSPStapleReceivedEvent=c;class l extends t{constructor(S){super("OCSPWSUpgradeStartedEvent",e.EventType.Debug,S)}}me.OCSPWSUpgradeStartedEvent=l;class p extends t{constructor(S,C){super("OCSPCacheEntryExpiredEvent",e.EventType.Debug,S),this.privExpireTime=C}}me.OCSPCacheEntryExpiredEvent=p;class d extends t{constructor(S,C,P){super("OCSPCacheEntryNeedsRefreshEvent",e.EventType.Debug,S),this.privExpireTime=P,this.privStartTime=C}}me.OCSPCacheEntryNeedsRefreshEvent=d;class h extends t{constructor(S,C,P){super("OCSPCacheHitEvent",e.EventType.Debug,S),this.privExpireTime=P,this.privExpireTimeString=new Date(P).toLocaleDateString(),this.privStartTime=C,this.privStartTimeString=new Date(C).toLocaleTimeString()}}me.OCSPCacheHitEvent=h;class f extends t{constructor(S,C){super("OCSPVerificationFailedEvent",e.EventType.Debug,S),this.privError=C}}me.OCSPVerificationFailedEvent=f;class v extends t{constructor(S,C){super("OCSPCacheFetchErrorEvent",e.EventType.Debug,S),this.privError=C}}me.OCSPCacheFetchErrorEvent=v;class y extends t{constructor(S){super("OCSPResponseRetrievedEvent",e.EventType.Debug,S)}}me.OCSPResponseRetrievedEvent=y;class g extends t{constructor(S,C){super("OCSPCacheUpdateErrorEvent",e.EventType.Debug,S),this.privError=C}}return me.OCSPCacheUpdateErrorEvent=g,me}var $o={},zR;function cz(){if(zR)return $o;zR=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.BackgroundEvent=void 0;const e=ne();class t extends e.PlatformEvent{constructor(n){super("BackgroundEvent",e.EventType.Error),this.privError=n}get error(){return this.privError}}return $o.BackgroundEvent=t,$o}var LR;function ne(){return LR||(LR=1,function(e){var t=ae&&ae.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s),Object.defineProperty(i,a,{enumerable:!0,get:function(){return o[s]}})}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),r=ae&&ae.__exportStar||function(i,o){for(var s in i)s!=="default"&&!o.hasOwnProperty(s)&&t(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(Fj(),e),r(Uj(),e),r(Hb(),e),r(Vj(),e),r(Wj(),e),r(Kb(),e),r(Er(),e),r($j(),e),r(Gb(),e),r(fi(),e),r(Hj(),e),r(Kj(),e),r(Gj(),e),r(Jj(),e),r(Qj(),e),r(Yj(),e),r(Xj(),e),r(Zj(),e),r(ez(),e),r(tz(),e),r(Jb(),e),r(wc(),e),r(Qb(),e),r(Yb(),e),r(rz(),e),r(nz(),e),r(iz(),e);var n=Ey();Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(oz(),e),r(sz(),e),r(az(),e),r(uz(),e),r(cz(),e)}(xd)),xd}var Ho={},xR;function wt(){if(xR)return Ho;xR=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.HeaderNames=void 0;let e=class{};return Ho.HeaderNames=e,e.AuthKey="Ocp-Apim-Subscription-Key",e.Authorization="Authorization",e.SpIDAuthKey="Apim-Subscription-Id",e.ConnectionId="X-ConnectionId",e.ContentType="Content-Type",e.CustomCommandsAppId="X-CommandsAppId",e.Path="Path",e.RequestId="X-RequestId",e.RequestStreamId="X-StreamId",e.RequestTimestamp="X-Timestamp",Ho}var Ko={},qR;function wy(){if(qR)return Ko;qR=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.AuthInfo=void 0;class e{constructor(r,n){this.privHeaderName=r,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return Ko.AuthInfo=e,Ko}var BR;function lz(){if(BR)return Ro;BR=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.CognitiveSubscriptionKeyAuthentication=void 0;const e=ne(),t=wt(),r=wy();let n=class{constructor(o){if(!o)throw new e.ArgumentNullError("subscriptionKey");this.privAuthInfo=new r.AuthInfo(t.HeaderNames.AuthKey,o)}fetch(o){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(o){return Promise.resolve(this.privAuthInfo)}};return Ro.CognitiveSubscriptionKeyAuthentication=n,Ro}var Go={},FR;function pz(){if(FR)return Go;FR=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.CognitiveTokenAuthentication=void 0;const e=ne(),t=wy(),r=wt();let n=class vm{constructor(o,s){if(!o)throw new e.ArgumentNullError("fetchCallback");if(!s)throw new e.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=o,this.privFetchOnExpiryCallback=s}fetch(o){return this.privFetchCallback(o).then(s=>new t.AuthInfo(r.HeaderNames.Authorization,s===void 0?void 0:vm.privTokenPrefix+s))}fetchOnExpiry(o){return this.privFetchOnExpiryCallback(o).then(s=>new t.AuthInfo(r.HeaderNames.Authorization,s===void 0?void 0:vm.privTokenPrefix+s))}};return Go.CognitiveTokenAuthentication=n,n.privTokenPrefix="Bearer ",Go}var th={},UR;function dz(){return UR||(UR=1,Object.defineProperty(th,"__esModule",{value:!0})),th}var rh={},VR;function hz(){return VR||(VR=1,Object.defineProperty(rh,"__esModule",{value:!0})),rh}var Jo={},nh={},Qo={};const fz={},vz=Object.freeze(Object.defineProperty({__proto__:null,default:fz},Symbol.toStringTag,{value:"Module"})),Yn=wm(vz);var ih={},WR;function Xb(){return WR||(WR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=ne();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})}(ih)),ih}var Yo={},$R;function ue(){if($R)return Yo;$R=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.Contracts=void 0;let e=class Qn{static throwIfNullOrUndefined(r,n){if(r==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(r,n){if(r===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(r,n){if(Qn.throwIfNullOrUndefined(r,n),(""+r).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(r,n,i){if(Qn.throwIfNullOrUndefined(r,n),(""+r).length>i)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(r,n,i){if(Qn.throwIfNullOrUndefined(r,n),(""+r).length<i)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+i.toString()+" characters)")}static throwIfDisposed(r){if(r)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(r,n){if(Qn.throwIfNullOrUndefined(r,n),r.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const i of r)Qn.throwIfNullOrWhitespace(i,n)}static throwIfFileDoesNotExist(r,n){Qn.throwIfNullOrWhitespace(r,n)}static throwIfNotUndefined(r,n){if(r!==void 0)throw new Error("throwIfNotUndefined:"+n)}};return Yo.Contracts=e,Yo}var HR;function gz(){if(HR)return Qo;HR=1;var e=ae&&ae.__createBinding||(Object.create?function(a,u,c,l){l===void 0&&(l=c),Object.defineProperty(a,l,{enumerable:!0,get:function(){return u[c]}})}:function(a,u,c,l){l===void 0&&(l=c),a[l]=u[c]}),t=ae&&ae.__setModuleDefault||(Object.create?function(a,u){Object.defineProperty(a,"default",{enumerable:!0,value:u})}:function(a,u){a.default=u}),r=ae&&ae.__importStar||function(a){if(a&&a.__esModule)return a;var u={};if(a!=null)for(var c in a)c!=="default"&&Object.hasOwnProperty.call(a,c)&&e(u,a,c);return t(u,a),u};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.ConsoleLoggingListener=void 0;const n=r(Yn),i=Xb(),o=ue();let s=class{constructor(u=i.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=u}set logPath(u){o.Contracts.throwIfNullOrUndefined(n.openSync,`
File System access not available`),this.privLogPath=u}set enableConsoleOutput(u){this.privEnableConsoleOutput=u}onEvent(u){if(u.eventType>=this.privLogLevelFilter){const c=this.toString(u);if(this.logCallback&&this.logCallback(c),this.privLogPath&&n.writeFileSync(this.privLogPath,c+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(u.eventType){case i.LogLevel.Debug:console.debug(c);break;case i.LogLevel.Info:console.info(c);break;case i.LogLevel.Warning:console.warn(c);break;case i.LogLevel.Error:console.error(c);break;default:console.log(c);break}}}toString(u){const c=[`${u.eventTime}`,`${u.name}`],l=u;for(const p in l)if(p&&u.hasOwnProperty(p)&&p!=="eventTime"&&p!=="eventType"&&p!=="eventId"&&p!=="name"&&p!=="constructor"){const d=l[p];let h="<NULL>";d!=null&&(typeof d=="number"||typeof d=="string"?h=d.toString():h=JSON.stringify(d)),c.push(`${p}: ${h}`)}return c.join(" | ")}};return Qo.ConsoleLoggingListener=s,Qo}var oh={},KR;function mz(){return KR||(KR=1,Object.defineProperty(oh,"__esModule",{value:!0})),oh}var sh={},ah={},GR;function vi(){return GR||(GR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(o,s,a,u){return new n(o,s,a,u)}static getWaveFormatPCM(o,s,a){return new n(o,s,a)}}e.AudioStreamFormat=r;class n extends r{constructor(o=16e3,s=16,a=1,u=t.PCM){super();let c=!0;switch(u){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:c=!1}if(this.bitsPerSample=s,this.samplesPerSec=o,this.channels=a,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),c){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(o){const s=window.AudioContext||window.webkitAudioContext||!1;if(s)return o!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new s({sampleRate:o}):new s;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(o,s,a){for(let u=0;u<a.length;u++)o.setUint8(s+u,a.charCodeAt(u))}}e.AudioStreamFormatImpl=n}(ah)),ah}var JR;function yz(){return JR||(JR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=ee(),r=ne(),n=vi();e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(s,a,u,c){this.privRecorder=s,this.deviceId=a,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=u||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=c||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(u){if(u instanceof Error){const c=u;this.privInitializeDeferral.reject(c.name+": "+c.message)}else this.privInitializeDeferral.reject(u);return this.privInitializeDeferral.promise}const s=window.navigator;let a=s.getUserMedia||s.webkitGetUserMedia||s.mozGetUserMedia||s.msGetUserMedia;if(s.mediaDevices&&(a=(u,c,l)=>{s.mediaDevices.getUserMedia(u).then(c).catch(l)}),a){const u=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):a({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},c=>{this.privMediaStream=c,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},c=>{const l=`Error occurred during microphone initialization: ${c}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(u).catch(c=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${c}`)}):u()}else{const u="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(u),this.onEvent(new r.AudioSourceErrorEvent(u,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(s){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,s)),this.listen(s).then(a=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,s)),{detach:async()=>(a.readEnded(),delete this.privStreams[s],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,s)),this.turnOff()),id:()=>s,read:()=>a.read()}))}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,s)))}async turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&a.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(s=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:s,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(s,a){if(s===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(a);else throw new Error("Property '"+s+"' is not supported on Microphone.")}getMicrophoneLabel(){const s="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(s);this.privMicrophoneLabel=s;const a=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(a===void 0)return Promise.resolve(this.privMicrophoneLabel);const u=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(c=>{for(const l of c)if(l.deviceId===a){this.privMicrophoneLabel=l.label;break}u.resolve(this.privMicrophoneLabel)},()=>u.resolve(this.privMicrophoneLabel)),u.promise}async listen(s){await this.turnOn();const a=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,s);this.privStreams[s]=a;try{this.privRecorder.record(this.privContext,this.privMediaStream,a)}catch(c){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,s,c)),c}return a}onEvent(s){this.privEvents.onEvent(s),r.Events.instance.onEvent(s)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let s=!1;"close"in this.privContext&&(s=!0),s?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(sh)),sh}var Xo={},QR;function Sz(){if(QR)return Xo;QR=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.FileAudioSource=void 0;const e=ee(),t=ne(),r=vi();let n=class{constructor(o,s,a){this.privStreams={},this.privHeaderEnd=44,this.privId=a||t.createNoDashGuid(),this.privEvents=new t.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=s||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(o){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,o));const s=await this.upload(o);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:async()=>{s.readEnded(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)),await this.turnOff()},id:()=>o,read:()=>s.read()})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const s=this.privStreams[o];s&&!s.isClosed&&s.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:e.type.File}))}readHeader(){const s=this.privSource.slice(0,4296),a=new t.Deferred,u=c=>{const l=new DataView(c),p=g=>String.fromCharCode(l.getUint8(g),l.getUint8(g+1),l.getUint8(g+2),l.getUint8(g+3));if(p(0)!=="RIFF"){a.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){a.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),f=l.getUint32(24,!0),v=l.getUint16(34,!0);let y=36+Math.max(d-16,0);for(;p(y)!=="data";y+=2)if(y>4288){a.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,a.resolve(r.AudioStreamFormat.getWaveFormatPCM(f,v,h))};if(typeof window<"u"&&typeof Blob<"u"&&s instanceof Blob){const c=new FileReader;c.onload=l=>{const p=l.target.result;u(p)},c.readAsArrayBuffer(s)}else{const c=s;u(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength))}return a.promise}async upload(o){const s=a=>{const u=`Error occurred while processing '${this.privFilename}'. ${a}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,o,u)),new Error(u)};try{await this.turnOn();const a=await this.privAudioFormatPromise,u=new t.ChunkedArrayBufferStream(a.avgBytesPerSec/10,o);this.privStreams[o]=u;const c=this.privSource.slice(this.privHeaderEnd),l=p=>{u.isClosed||(u.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),u.close())};if(typeof window<"u"&&typeof Blob<"u"&&c instanceof Blob){const p=new FileReader;p.onerror=d=>s(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(c)}else{const p=c;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return u}catch(a){s(a)}}onEvent(o){this.privEvents.onEvent(o),t.Events.instance.onEvent(o)}};return Xo.FileAudioSource=n,Xo}var Zo={},YR;function Cz(){if(YR)return Zo;YR=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.PcmRecorder=void 0;const e=ne();class t{constructor(n){this.privStopInputOnRelease=n}record(n,i,o){const a=new e.RiffPcmEncoder(n.sampleRate,16e3),u=n.createMediaStreamSource(i),c=()=>{const p=(()=>{let d=0;try{return n.createScriptProcessor(d,1,1)}catch{d=2048;let f=n.sampleRate;for(;d<16384&&f>=32e3;)d<<=1,f>>=1;return n.createScriptProcessor(d,1,1)}})();p.onaudioprocess=d=>{const h=d.inputBuffer.getChannelData(0);if(o&&!o.isClosed){const f=a.encode(h);f&&o.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()})}},u.connect(p),p.connect(n.destination),this.privMediaResources={scriptProcessorNode:p,source:u,stream:i}},l=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(n.audioWorklet&&!l){if(!this.privSpeechProcessorScript){const p=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,d=new Blob([p],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(d)}n.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const p=new AudioWorkletNode(n,"speech-processor");p.port.onmessage=d=>{const h=d.data;if(o&&!o.isClosed){const f=a.encode(h);f&&o.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()})}},u.connect(p),p.connect(n.destination),this.privMediaResources={scriptProcessorNode:p,source:u,stream:i}}).catch(()=>{c()})}else try{c()}catch(p){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${p}`)}}releaseMediaResources(n){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(n.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(i=>i.stop()),this.privMediaResources.source=null))}setWorkletUrl(n){this.privSpeechProcessorScript=n}}return Zo.PcmRecorder=t,Zo}var es={},ts={},XR;function Zb(){if(XR)return ts;XR=1;var e=ae&&ae.__createBinding||(Object.create?function(d,h,f,v){v===void 0&&(v=f),Object.defineProperty(d,v,{enumerable:!0,get:function(){return h[f]}})}:function(d,h,f,v){v===void 0&&(v=f),d[v]=h[f]}),t=ae&&ae.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),r=ae&&ae.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.hasOwnProperty.call(d,f)&&e(h,d,f);return t(h,d),h},n=ae&&ae.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ts,"__esModule",{value:!0}),ts.WebsocketMessageAdapter=void 0;const i=r(Yn),o=r(Yn),s=n(Yn),a=n(Yn),u=n(Yn),c=wt(),l=ne();let p=class gm{constructor(h,f,v,y,g,m){if(!h)throw new l.ArgumentNullError("uri");if(!v)throw new l.ArgumentNullError("messageFormatter");this.proxyInfo=y,this.privConnectionEvents=new l.EventSource,this.privConnectionId=f,this.privMessageFormatter=v,this.privConnectionState=l.ConnectionState.None,this.privUri=h,this.privHeaders=g,this.privEnableCompression=m,this.privHeaders[c.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===l.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new l.Deferred,this.privCertificateValidatedDeferral=new l.Deferred,this.privConnectionState=l.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!gm.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const h={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),h.agent=this.getAgent();let v=new URL(this.privUri).protocol;(v==null?void 0:v.toLocaleLowerCase())==="wss:"?v="https:":(v==null?void 0:v.toLocaleLowerCase())==="ws:"&&(v="http:"),h.agent.protocol=v,this.privWebsocketClient=new u.default(this.privUri,h)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new l.Queue,this.privDisconnectDeferral=new l.Deferred,this.privSendMessageQueue=new l.Queue,this.processSendQueue().catch(h=>{l.Events.instance.onEvent(new l.BackgroundEvent(h))})}catch(h){return this.privConnectionEstablishDeferral.resolve(new l.ConnectionOpenResponse(500,h)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new l.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=l.ConnectionState.Connected,this.onEvent(new l.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new l.ConnectionOpenResponse(200,""))},h=>{this.privConnectionEstablishDeferral.reject(h)})},this.privWebsocketClient.onerror=h=>{this.onEvent(new l.ConnectionErrorEvent(this.privConnectionId,h.message,h.type)),this.privLastErrorReceived=h.message},this.privWebsocketClient.onclose=h=>{this.privConnectionState===l.ConnectionState.Connecting?(this.privConnectionState=l.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new l.ConnectionOpenResponse(h.code,h.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=l.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new l.ConnectionClosedEvent(this.privConnectionId,h.code,h.reason))),this.onClose(h.code,h.reason).catch(f=>{l.Events.instance.onEvent(new l.BackgroundEvent(f))})},this.privWebsocketClient.onmessage=h=>{const f=new Date().toISOString();if(this.privConnectionState===l.ConnectionState.Connected){const v=new l.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(v.promise),h.data instanceof ArrayBuffer){const y=new l.RawWebsocketMessage(l.MessageType.Binary,h.data);this.privMessageFormatter.toConnectionMessage(y).then(g=>{this.onEvent(new l.ConnectionMessageReceivedEvent(this.privConnectionId,f,g)),v.resolve(g)},g=>{v.reject(`Invalid binary message format. Error: ${g}`)})}else{const y=new l.RawWebsocketMessage(l.MessageType.Text,h.data);this.privMessageFormatter.toConnectionMessage(y).then(g=>{this.onEvent(new l.ConnectionMessageReceivedEvent(this.privConnectionId,f,g)),v.resolve(g)},g=>{v.reject(`Invalid text message format. Error: ${g}`)})}}},this.privConnectionEstablishDeferral.promise}send(h){if(this.privConnectionState!==l.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${l.ConnectionState[this.privConnectionState]} state`);const f=new l.Deferred,v=new l.Deferred;return this.privSendMessageQueue.enqueueFromPromise(v.promise),this.privMessageFormatter.fromConnectionMessage(h).then(y=>{v.resolve({Message:h,RawWebsocketMessage:y,sendStatusDeferral:f})},y=>{v.reject(`Error formatting the message. ${y}`)}),f.promise}read(){return this.privConnectionState!==l.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(h){if(this.privWebsocketClient)this.privConnectionState!==l.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,h||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(h){try{if(!h)return Promise.resolve();if(this.onEvent(new l.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),h.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(h.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+h.Message.id+" "+new Error().stack);return Promise.resolve()}catch(f){return Promise.reject(`websocket send error: ${f}`)}}async onClose(h,f){const v=`Connection closed. ${h}: ${f}`;this.privConnectionState=l.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},v),await this.privSendMessageQueue.drainAndDispose(y=>{y.sendStatusDeferral.reject(v)},v)}async processSendQueue(){for(;;){const f=await this.privSendMessageQueue.dequeue();if(!f)return;try{await this.sendRawMessage(f),f.sendStatusDeferral.resolve()}catch(v){f.sendStatusDeferral.reject(v)}}}onEvent(h){this.privConnectionEvents.onEvent(h),l.Events.instance.onEvent(h)}getAgent(){const h=new s.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(h.proxyInfo=this.proxyInfo),h}static GetProxyAgent(h){const f={host:h.HostName,port:h.Port};return h.UserName?f.headers={"Proxy-Authentication":"Basic "+new Buffer(`${h.UserName}:${h.Password===void 0?"":h.Password}`).toString("base64")}:f.headers={},f.headers.requestOCSP="true",new a.default(f)}createConnection(h,f){let v;if(f={...f,requestOCSP:!0,servername:f.host},this.proxyInfo){const g=gm.GetProxyAgent(this.proxyInfo);v=new Promise((m,S)=>{g.callback(h,f,(C,P)=>{C?S(C):m(P)})})}else f.secureEndpoint?v=Promise.resolve(o.connect(f)):v=Promise.resolve(i.connect(f));return v}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return ts.WebsocketMessageAdapter=p,p.forceNpmWebSocket=!1,ts}var ZR;function Rz(){if(ZR)return es;ZR=1,Object.defineProperty(es,"__esModule",{value:!0}),es.WebsocketConnection=void 0;const e=ne(),t=Zb();let r=class{constructor(i,o,s,a,u,c=!1,l){if(this.privIsDisposed=!1,!i)throw new e.ArgumentNullError("uri");if(!a)throw new e.ArgumentNullError("messageFormatter");this.privMessageFormatter=a;let p="",d=0;if(o){for(const h in o)if(h){p+=d===0&&i.indexOf("?")===-1?"?":"&";const f=encodeURIComponent(h);p+=f;let v=o[h];v&&(v=encodeURIComponent(v),p+=`=${v}`),d++}}if(s){for(const h in s)if(h){p+=d===0&&i.indexOf("?")===-1?"?":"&";const f=encodeURIComponent(s[h]);p+=`${h}=${f}`,d++}}this.privUri=i+p,this.privId=l||e.createNoDashGuid(),this.privConnectionMessageAdapter=new t.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,u,s,c)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(i){return this.privConnectionMessageAdapter.send(i)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return es.WebsocketConnection=r,es}var rs={},eP;function Pz(){if(eP)return rs;eP=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.ReplayableAudioNode=void 0;let e=class{constructor(n,i){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=n,this.privBytesPerSecond=i}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const n=this.privReplayOffset-this.privBufferStartOffset;let i=Math.round(n*this.privBytesPerSecond*1e-7);i%2!==0&&i++;let o=0;for(;o<this.privBuffers.length&&i>=this.privBuffers[o].chunk.buffer.byteLength;)i-=this.privBuffers[o++].chunk.buffer.byteLength;if(o<this.privBuffers.length){const s=this.privBuffers[o].chunk.buffer.slice(i);return this.privReplayOffset+=s.byteLength/this.privBytesPerSecond*1e7,o===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:s,isEnd:!1,timeReceived:this.privBuffers[o].chunk.timeReceived})}}return this.privAudioNode.read().then(n=>(n&&n.buffer&&(this.privBuffers.push(new t(n,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=n.buffer.byteLength),n))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(n){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=n;const i=n-this.privBufferStartOffset;let o=Math.round(i*this.privBytesPerSecond*1e-7),s=0;for(;s<this.privBuffers.length&&o>=this.privBuffers[s].chunk.buffer.byteLength;)o-=this.privBuffers[s++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(n-o/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(s)}findTimeAtOffset(n){if(n<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const i of this.privBuffers){const o=i.byteOffset/this.privBytesPerSecond*1e7,s=o+i.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(n>=o&&n<=s)return i.chunk.timeReceived}return 0}};rs.ReplayableAudioNode=e;class t{constructor(n,i,o){this.chunk=n,this.serial=i,this.byteOffset=o}}return rs}var ns={},uh={},br={},is={},tP;function eO(){if(tP)return is;tP=1;var e=ae&&ae.__createBinding||(Object.create?function(s,a,u,c){c===void 0&&(c=u),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[u]}})}:function(s,a,u,c){c===void 0&&(c=u),s[c]=a[u]}),t=ae&&ae.__setModuleDefault||(Object.create?function(s,a){Object.defineProperty(s,"default",{enumerable:!0,value:a})}:function(s,a){s.default=a}),r=ae&&ae.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var u in s)u!=="default"&&Object.hasOwnProperty.call(s,u)&&e(a,s,u);return t(a,s),a};Object.defineProperty(is,"__esModule",{value:!0}),is.AudioFileWriter=void 0;const n=r(Yn),i=ue();let o=class{constructor(a){i.Contracts.throwIfNullOrUndefined(n.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=n.openSync(a,"w")}set format(a){i.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=a;let u=0;this.privAudioFormat.hasHeader&&(u=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=n.createWriteStream("",{fd:this.privFd,start:u,autoClose:!1}))}write(a){i.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(a.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),n.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),n.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return is.AudioFileWriter=o,is}var jt={},rP;function tO(){if(rP)return jt;rP=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.PullAudioInputStreamImpl=jt.PullAudioInputStream=jt.PushAudioInputStreamImpl=jt.PushAudioInputStream=jt.AudioInputStream=void 0;const e=ee(),t=ne(),r=fi(),n=V(),i=vi();let o=class{constructor(){}static createPushStream(p){return s.create(p)}static createPullStream(p,d){return u.create(p,d)}};jt.AudioInputStream=o;class s extends o{static create(p){return new a(p)}}jt.PushAudioInputStream=s;class a extends s{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let f=0;f<d.length;++f)d[f]=h[f];return d}}jt.PushAudioInputStreamImpl=a;class u extends o{constructor(){super()}static create(p,d){return new c(p,d)}}jt.PullAudioInputStream=u;class c extends u{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new t.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const f=new ArrayBuffer(this.privBufferSize-d),v=this.privCallback.read(f);if(h===void 0?h=f:new Int8Array(h).set(new Int8Array(f),d),v===0)break;d+=v}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}}return jt.PullAudioInputStreamImpl=c,jt}var zt={},os={},ch={},nP;function rO(){return nP||(nP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))}(ch)),ch}var iP;function _c(){if(iP)return os;iP=1,Object.defineProperty(os,"__esModule",{value:!0}),os.AudioOutputFormatImpl=void 0;const e=rO(),t=vi();class r extends t.AudioStreamFormatImpl{constructor(i,o,s,a,u,c,l,p,d){super(s,c,o,i),this.formatTag=i,this.avgBytesPerSec=a,this.blockAlign=u,this.priAudioFormatString=l,this.priRequestAudioFormatString=p,this.priHasHeader=d}static fromSpeechSynthesisOutputFormat(i){return i===void 0?r.getDefaultOutputFormat():r.fromSpeechSynthesisOutputFormatString(r.SpeechSynthesisOutputFormatToString[i])}static fromSpeechSynthesisOutputFormatString(i){switch(i){case"raw-8khz-8bit-mono-mulaw":return new r(t.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,i,i,!1);case"riff-16khz-16kbps-mono-siren":return new r(t.AudioFormatTag.Siren,1,16e3,2e3,40,0,i,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new r(t.AudioFormatTag.Siren,1,16e3,2e3,40,0,i,i,!1);case"audio-16khz-32kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,16e3,4096,2,16,i,i,!1);case"audio-16khz-128kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,16e3,16384,2,16,i,i,!1);case"audio-16khz-64kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,16e3,8192,2,16,i,i,!1);case"audio-24khz-48kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,24e3,6144,2,16,i,i,!1);case"audio-24khz-96kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,24e3,12288,2,16,i,i,!1);case"audio-24khz-160kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,24e3,20480,2,16,i,i,!1);case"raw-16khz-16bit-mono-truesilk":return new r(t.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,i,i,!1);case"riff-8khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,8e3,16e3,2,16,i,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,24e3,48e3,2,16,i,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new r(t.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,i,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,16e3,32e3,2,16,i,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,24e3,48e3,2,16,i,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,8e3,16e3,2,16,i,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new r(t.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,i,i,!1);case"ogg-24khz-16bit-mono-opus":return new r(t.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,i,i,!1);case"raw-48khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,48e3,96e3,2,16,i,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,48e3,96e3,2,16,i,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,48e3,12288,2,16,i,i,!1);case"audio-48khz-192kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,48e3,24576,2,16,i,i,!1);case"ogg-48khz-16bit-mono-opus":return new r(t.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,i,i,!1);case"webm-16khz-16bit-mono-opus":return new r(t.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,i,i,!1);case"webm-24khz-16bit-mono-opus":return new r(t.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,i,i,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new r(t.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,i,i,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new r(t.AudioFormatTag.OPUS,1,16e3,4e3,2,16,i,i,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new r(t.AudioFormatTag.OPUS,1,24e3,6e3,2,16,i,i,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new r(t.AudioFormatTag.OPUS,1,24e3,3e3,2,16,i,i,!1);case"audio-24khz-16bit-mono-flac":return new r(t.AudioFormatTag.FLAC,1,24e3,24e3,2,16,i,i,!1);case"audio-48khz-16bit-mono-flac":return new r(t.AudioFormatTag.FLAC,1,48e3,3e4,2,16,i,i,!1);case"raw-24khz-16bit-mono-truesilk":return new r(t.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,i,i,!1);case"raw-8khz-8bit-mono-alaw":return new r(t.AudioFormatTag.ALaw,1,8e3,8e3,1,8,i,i,!1);case"riff-8khz-8bit-mono-alaw":return new r(t.AudioFormatTag.ALaw,1,8e3,8e3,1,8,i,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,22050,44100,2,16,i,i,!1);case"riff-22050hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,22050,44100,2,16,i,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,44100,88200,2,16,i,i,!1);case"riff-44100hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,44100,88200,2,16,i,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new r(t.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,i,i,!1);case"g722-16khz-64kbps":return new r(t.AudioFormatTag.G722,1,16e3,8e3,2,16,i,i,!1);case"riff-16khz-16bit-mono-pcm":default:return new r(t.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return r.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(i){if(this.priHasHeader){const o=new DataView(this.privHeader);o.setUint32(4,i+this.privHeader.byteLength-8,!0),o.setUint32(40,i,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(i){if(!this.hasHeader)return i;this.updateHeader(i.byteLength);const o=new Uint8Array(i.byteLength+this.header.byteLength);return o.set(new Uint8Array(this.header),0),o.set(new Uint8Array(i),this.header.byteLength),o.buffer}}return os.AudioOutputFormatImpl=r,r.SpeechSynthesisOutputFormatToString={[e.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[e.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[e.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[e.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[e.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[e.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[e.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[e.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[e.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[e.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},os}var oP;function Zi(){if(oP)return zt;oP=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.PushAudioOutputStreamImpl=zt.PushAudioOutputStream=zt.PullAudioOutputStreamImpl=zt.PullAudioOutputStream=zt.AudioOutputStream=void 0;const e=ne(),t=ue(),r=_c();let n=class{constructor(){}static createPullStream(){return i.create()}};zt.AudioOutputStream=n;class i extends n{static create(){return new o}}zt.PullAudioOutputStream=i;class o extends i{constructor(){super(),this.privId=e.createNoDashGuid(),this.privStream=new e.Stream}set format(c){c==null&&(this.privFormat=r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=c}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(c){const l=new Int8Array(c);let p=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>c.byteLength)return l.set(this.privLastChunkView.slice(0,c.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(c.byteLength),Promise.resolve(c.byteLength);l.set(this.privLastChunkView),p=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;p<c.byteLength&&!this.privStream.isReadEnded;){const d=await this.privStream.read();if(d!==void 0&&!d.isEnd){let h;d.buffer.byteLength>c.byteLength-p?(h=d.buffer.slice(0,c.byteLength-p),this.privLastChunkView=new Int8Array(d.buffer.slice(c.byteLength-p))):h=d.buffer,l.set(new Int8Array(h),p),p+=h.byteLength}else this.privStream.readEnded()}return p}write(c){t.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:c,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}zt.PullAudioOutputStreamImpl=o;class s extends n{constructor(){super()}static create(c){return new a(c)}}zt.PushAudioOutputStream=s;class a extends s{constructor(c){super(),this.privId=e.createNoDashGuid(),this.privCallback=c}set format(c){}write(c){this.privCallback.write&&this.privCallback.write(c)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return zt.PushAudioOutputStreamImpl=a,zt}var sP;function iO(){if(sP)return br;sP=1,Object.defineProperty(br,"__esModule",{value:!0}),br.AudioOutputConfigImpl=br.AudioConfigImpl=br.AudioConfig=void 0;const e=at(),t=ue(),r=V(),n=eO(),i=tO(),o=Zi();let s=class nO{static fromDefaultMicrophoneInput(){const l=new e.PcmRecorder(!0);return new a(new e.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new e.PcmRecorder(!0);return new a(new e.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new a(new e.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new a(new i.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new a(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new e.PcmRecorder(!1);return new a(new e.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new u(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return nO.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new u(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new u(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new u(new o.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new u(l);if(l instanceof r.PullAudioOutputStream)return new u(l);throw new Error("Not Supported Type")}};br.AudioConfig=s;class a extends s{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(t.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}br.AudioConfigImpl=a;class u extends s{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return br.AudioOutputConfigImpl=u,br}var lh={},aP;function Ez(){return aP||(aP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))}(lh)),lh}var ss={},uP;function wz(){if(uP)return ss;uP=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.PullAudioInputStreamCallback=void 0;let e=class{};return ss.PullAudioInputStreamCallback=e,ss}var as={},cP;function _z(){if(cP)return as;cP=1,Object.defineProperty(as,"__esModule",{value:!0}),as.PushAudioOutputStreamCallback=void 0;let e=class{};return as.PushAudioOutputStreamCallback=e,as}var us={},lP;function Tz(){if(lP)return us;lP=1,Object.defineProperty(us,"__esModule",{value:!0}),us.KeywordRecognitionModel=void 0;const e=ue();let t=class{constructor(){this.privDisposed=!1}static fromFile(n){throw e.Contracts.throwIfFileDoesNotExist(n,"fileName"),new Error("Not yet implemented.")}static fromStream(n){throw e.Contracts.throwIfNull(n,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return us.KeywordRecognitionModel=t,us}var cs={},pP;function Iz(){if(pP)return cs;pP=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.SessionEventArgs=void 0;let e=class{constructor(r){this.privSessionId=r}get sessionId(){return this.privSessionId}};return cs.SessionEventArgs=e,cs}var ls={},dP;function Az(){if(dP)return ls;dP=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.RecognitionEventArgs=void 0;const e=V();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return ls.RecognitionEventArgs=t,ls}var ph={},hP;function bz(){return hP||(hP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))}(ph)),ph}var ps={},fP;function Oz(){if(fP)return ps;fP=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.IntentRecognitionEventArgs=void 0;const e=V();let t=class extends e.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return ps.IntentRecognitionEventArgs=t,ps}var ds={},vP;function kz(){if(vP)return ds;vP=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.RecognitionResult=void 0;let e=class{constructor(r,n,i,o,s,a,u,c,l,p){this.privResultId=r,this.privReason=n,this.privText=i,this.privDuration=o,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=u,this.privErrorDetails=c,this.privJson=l,this.privProperties=p}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return ds.RecognitionResult=e,ds}var hs={},gP;function Mz(){if(gP)return hs;gP=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.SpeechRecognitionResult=void 0;const e=V();let t=class extends e.RecognitionResult{constructor(n,i,o,s,a,u,c,l,p,d,h){super(n,i,o,s,a,u,c,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return hs.SpeechRecognitionResult=t,hs}var fs={},mP;function Dz(){if(mP)return fs;mP=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.IntentRecognitionResult=void 0;const e=V();let t=class extends e.SpeechRecognitionResult{constructor(n,i,o,s,a,u,c,l,p,d,h){super(i,o,s,a,u,c,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return fs.IntentRecognitionResult=t,fs}var On={},yP;function Nz(){if(yP)return On;yP=1,Object.defineProperty(On,"__esModule",{value:!0}),On.LanguageUnderstandingModelImpl=On.LanguageUnderstandingModel=void 0;const e=ue();let t=class{constructor(){}static fromEndpoint(i){e.Contracts.throwIfNull(i,"uri"),e.Contracts.throwIfNullOrWhitespace(i.hostname,"uri");const o=new r,s=i.host.indexOf(".");if(s===-1)throw new Error("Could not determine region from endpoint");o.region=i.host.substr(0,s);const a=i.pathname.lastIndexOf("/")+1;if(a===-1)throw new Error("Could not determine appId from endpoint");if(o.appId=i.pathname.substr(a),o.subscriptionKey=i.searchParams.get("subscription-key"),o.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return o}static fromAppId(i){e.Contracts.throwIfNullOrWhitespace(i,"appId");const o=new r;return o.appId=i,o}static fromSubscription(i,o,s){e.Contracts.throwIfNullOrWhitespace(i,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(o,"appId"),e.Contracts.throwIfNullOrWhitespace(s,"region");const a=new r;return a.appId=o,a.region=s,a.subscriptionKey=i,a}};On.LanguageUnderstandingModel=t;class r extends t{}return On.LanguageUnderstandingModelImpl=r,On}var Or={},SP;function jz(){if(SP)return Or;SP=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.MeetingTranscriptionEventArgs=Or.ConversationTranscriptionEventArgs=Or.SpeechRecognitionEventArgs=void 0;const e=V();let t=class extends e.RecognitionEventArgs{constructor(o,s,a){super(s,a),this.privResult=o}get result(){return this.privResult}};Or.SpeechRecognitionEventArgs=t;class r extends e.RecognitionEventArgs{constructor(o,s,a){super(s,a),this.privResult=o}get result(){return this.privResult}}Or.ConversationTranscriptionEventArgs=r;class n extends t{}return Or.MeetingTranscriptionEventArgs=n,Or}var vs={},gs={},CP;function Tc(){if(CP)return gs;CP=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.CancellationEventArgsBase=void 0;const e=V();let t=class extends e.RecognitionEventArgs{constructor(n,i,o,s,a){super(s,a),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return gs.CancellationEventArgsBase=t,gs}var RP;function zz(){if(RP)return vs;RP=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.SpeechRecognitionCanceledEventArgs=void 0;const e=Tc();let t=class extends e.CancellationEventArgsBase{};return vs.SpeechRecognitionCanceledEventArgs=t,vs}var ms={},PP;function Lz(){if(PP)return ms;PP=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.TranslationRecognitionEventArgs=void 0;const e=V();let t=class extends e.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return ms.TranslationRecognitionEventArgs=t,ms}var ys={},EP;function xz(){if(EP)return ys;EP=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.TranslationSynthesisEventArgs=void 0;const e=V();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return ys.TranslationSynthesisEventArgs=t,ys}var Ss={},wP;function sO(){if(wP)return Ss;wP=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.TranslationRecognitionResult=void 0;const e=V();let t=class oO extends e.SpeechRecognitionResult{constructor(n,i,o,s,a,u,c,l,p,d,h){super(i,o,s,a,u,c,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new oO(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Ss.TranslationRecognitionResult=t,Ss}var Cs={},_P;function qz(){if(_P)return Cs;_P=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.TranslationSynthesisResult=void 0;let e=class{constructor(r,n){this.privReason=r,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}};return Cs.TranslationSynthesisResult=e,Cs}var dh={},TP;function Bz(){return TP||(TP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))}(dh)),dh}var kn={},IP;function Fz(){if(IP)return kn;IP=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.SpeechConfigImpl=kn.SpeechConfig=void 0;const e=ee(),t=ue(),r=V();let n=class{constructor(){}static fromSubscription(s,a){t.Contracts.throwIfNullOrWhitespace(s,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),u.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),u}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.href),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromHost(s,a){t.Contracts.throwIfNull(s,"hostName");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,s.protocol+"//"+s.hostname+(s.port===""?"":":"+s.port)),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromAuthorizationToken(s,a){t.Contracts.throwIfNull(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),u.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,a),u.authorizationToken=s,u}close(){}};kn.SpeechConfig=n;class i extends n{constructor(){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,s)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,s)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(s){this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[s])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,s)}setProperty(s,a){t.Contracts.throwIfNull(a,"value"),this.privProperties.setProperty(s,a)}getProperty(s,a){return this.privProperties.getProperty(s,a)}setProxy(s,a,u,c){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],s),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],c)}setServiceProperty(s,a){const u=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));u[s]=a,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[s])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const s=new i;return s.privProperties=this.privProperties.clone(),s}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,s)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,s)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(s){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[s])}}return kn.SpeechConfigImpl=i,kn}var Mn={},AP;function Uz(){if(AP)return Mn;AP=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.SpeechTranslationConfigImpl=Mn.SpeechTranslationConfig=void 0;const e=ee(),t=ue(),r=V();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(s,a){t.Contracts.throwIfNullOrWhitespace(s,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),u}static fromAuthorizationToken(s,a){t.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),u}static fromHost(s,a){t.Contracts.throwIfNull(s,"hostName");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,s.protocol+"//"+s.hostname+(s.port===""?"":":"+s.port)),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint"),t.Contracts.throwIfNull(a,"subscriptionKey");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.href),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}};Mn.SpeechTranslationConfig=n;class i extends n{constructor(){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}set speechRecognitionLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,s)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(s){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[s])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(s){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,s)}addTargetLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value");const a=this.targetLanguages;a.includes(s)||(a.push(s),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,a.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,s)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}setProxy(s,a,u,c){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],s),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],c)}getProperty(s,a){return this.privSpeechProperties.getProperty(s,a)}setProperty(s,a){this.privSpeechProperties.setProperty(s,a)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(s,a){const u=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));u[s]=a,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(s){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[s])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(s){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,s)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(s){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,s)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(s){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[s])}}return Mn.SpeechTranslationConfigImpl=i,Mn}var Rs={},bP;function uO(){if(bP)return Rs;bP=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.PropertyCollection=void 0;const e=V();let t=class aO{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let o;typeof n=="string"?o=n:o=e.PropertyId[n];for(let s=0;s<this.privKeys.length;s++)if(this.privKeys[s]===o)return this.privValues[s];if(i!==void 0)return String(i)}setProperty(n,i){let o;typeof n=="string"?o=n:o=e.PropertyId[n];for(let s=0;s<this.privKeys.length;s++)if(this.privKeys[s]===o){this.privValues[s]=i;return}this.privKeys.push(o),this.privValues.push(i)}clone(){const n=new aO;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const o=this.getProperty(i);n.setProperty(i,o)}})}get keys(){return this.privKeys}};return Rs.PropertyCollection=t,Rs}var hh={},OP;function _y(){return OP||(OP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=16]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=25]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",t[t.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",t[t.Conversation_ApplicationId=46]="Conversation_ApplicationId",t[t.Conversation_DialogType=47]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=49]="Conversation_From_Id",t[t.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=56]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=57]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=59]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=67]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))}(hh)),hh}var Ps={},kP;function Vz(){if(kP)return Ps;kP=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.Recognizer=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class cO{constructor(s,a,u){this.audioConfig=s!==void 0?s:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=a.clone(),this.privConnectionFactory=u,this.implCommonRecognizerSetup()}close(s,a){r.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),s,a)}get internalData(){return this.privReco}async dispose(s){this.privDisposed||(this.privDisposed=!0,s&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(s){e.ServiceRecognizerBase.telemetryDataEnabled=s}implCommonRecognizerSetup(){let s=typeof window<"u"?"Browser":"Node",a="unknown",u="unknown";typeof navigator<"u"&&(s=s+"/"+navigator.platform,a=navigator.userAgent,u=navigator.appVersion);const c=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(s,a,u))));this.privReco=this.createServiceRecognizer(cO.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,c)}async recognizeOnceAsyncImpl(s){r.Contracts.throwIfDisposed(this.privDisposed);const a=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(s,a.resolve,a.reject);const u=await a.promise;return await this.implRecognizerStop(),u}async startContinuousRecognitionAsyncImpl(s){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(s,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(s){const a=s.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return a&&a!==""?new e.CognitiveSubscriptionKeyAuthentication(a):new e.CognitiveTokenAuthentication(()=>{const c=s.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(c)},()=>{const c=s.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(c)})}};return Ps.Recognizer=i,Ps}var Es={},MP;function Wz(){if(MP)return Es;MP=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SpeechRecognizer=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class lO extends n.Recognizer{constructor(s,a){const u=s;r.Contracts.throwIfNull(u,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(a,u.properties,new e.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(s,a,u){const c=s;return a.properties.mergeTo(c.properties),new lO(s,u)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(s,a){t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),s,a)}startContinuousRecognitionAsync(s,a){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),s,a)}stopContinuousRecognitionAsync(s,a){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),s,a)}startKeywordRecognitionAsync(s,a,u){r.Contracts.throwIfNull(s,"model"),u&&u("Not yet implemented.")}stopKeywordRecognitionAsync(s){s&&s()}close(s,a){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),s,a)}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,u,c){const l=u;return new e.SpeechServiceRecognizer(s,a,l,c,this)}};return Es.SpeechRecognizer=i,Es}var ws={},DP;function $z(){if(DP)return ws;DP=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.IntentRecognizer=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class extends n.Recognizer{constructor(s,a){r.Contracts.throwIfNullOrUndefined(s,"speechConfig");const u=s;r.Contracts.throwIfNullOrUndefined(u,"speechConfig"),super(a,u.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=u.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}recognizeOnceAsync(s,a){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const u=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",u.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(u.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),s,a)}startContinuousRecognitionAsync(s,a){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const u=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",u.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(u.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),s,a)}stopContinuousRecognitionAsync(s,a){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),s,a)}startKeywordRecognitionAsync(s,a,u){r.Contracts.throwIfNull(s,"model"),u&&u("Not yet implemented.")}stopKeywordRecognitionAsync(s,a){if(s)try{s()}catch(u){a&&a(u)}}addIntent(s,a){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNullOrWhitespace(s,"simplePhrase"),this.privAddedIntents.push([a,s])}addIntentWithLanguageModel(s,a,u){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(s,"intentId"),r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privAddedLmIntents[s]=new e.AddedLmIntent(c,u)}addAllIntents(s,a){r.Contracts.throwIfNull(s,"model");const u=s;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(u,a)}close(s,a){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),s,a)}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,u,c){const l=u;return new e.IntentServiceRecognizer(s,a,l,c,this)}async dispose(s){this.privDisposedIntentRecognizer||s&&(this.privDisposedIntentRecognizer=!0,await super.dispose(s))}buildSpeechContext(){let s,a,u;const c=[];this.privUmbrellaIntent!==void 0&&(s=this.privUmbrellaIntent.modelImpl.appId,a=this.privUmbrellaIntent.modelImpl.region,u=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(s===void 0)s=p.modelImpl.appId;else if(s!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(a===void 0)a=p.modelImpl.region;else if(a!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(u===void 0)u=p.modelImpl.subscriptionKey;else if(u!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+s+"-PRODUCTION#"+l;c.push(d)}return{Intent:{id:s,key:u===void 0?this.privProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key]):u,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?c:["luis/"+s+"-PRODUCTION"]}}};return ws.IntentRecognizer=i,ws}var fh={},NP;function Hz(){return NP||(NP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))}(fh)),fh}var _s={},Ts={},Dn={},jP;function pO(){if(jP)return Dn;jP=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.ConnectionMessageImpl=Dn.ConnectionMessage=void 0;const e=wt(),t=ne(),r=uO(),n=_y();let i=class{};Dn.ConnectionMessage=i;class o{constructor(a){this.privConnectionMessage=a,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(u=>{this.privProperties.setProperty(u,this.privConnectionMessage.headers[u])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(a=>a.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Dn.ConnectionMessageImpl=o,Dn}var zP;function dO(){if(zP)return Ts;zP=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.Connection=void 0;const e=ee(),t=ne(),r=pO(),n=ue(),i=V();let o=class mm{static fromRecognizer(a){const u=a.internalData,c=new mm;return c.privInternalData=u,c.setupEvents(),c}static fromSynthesizer(a){const u=a.internalData,c=new mm;return c.privInternalData=u,c.setupEvents(),c}openConnection(a,u){t.marshalPromiseToCallbacks(this.privInternalData.connect(),a,u)}closeConnection(a,u){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");t.marshalPromiseToCallbacks(this.privInternalData.disconnect(),a,u)}setMessageProperty(a,u,c){if(n.Contracts.throwIfNullOrWhitespace(u,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(a.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(u,c)}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(a.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(u,c)}}sendMessageAsync(a,u,c,l){t.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(a,u),c,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(a=>{a.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(a.connectionId)):a.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(a.connectionId)):a.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(a.message))):a.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(a.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(a=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(a.jsonString,a.name))})}};return Ts.Connection=o,Ts}var LP;function Kz(){if(LP)return _s;LP=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.TranslationRecognizer=void 0;const e=ee(),t=ne(),r=dO(),n=ue(),i=V();let o=class hO extends i.Recognizer{constructor(a,u,c){const l=a;n.Contracts.throwIfNull(l,"speechConfig"),super(u,l.properties,c||new e.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(a,u,c){const l=a;return u.properties.mergeTo(l.properties),new hO(a,c)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,a)}recognizeOnceAsync(a,u){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,u)}startContinuousRecognitionAsync(a,u){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,u)}stopContinuousRecognitionAsync(a,u){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,u)}removeTargetLanguage(a){if(n.Contracts.throwIfNullOrUndefined(a,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const u=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c=u.indexOf(a);c>-1&&(u.splice(c,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,u.join(",")),this.updateLanguages(u))}}addTargetLanguage(a){n.Contracts.throwIfNullOrUndefined(a,"language to be added");let u=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(u=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u.includes(a)||(u.push(a),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,u.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,a),u=[a]),this.updateLanguages(u)}close(a,u){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,u)}onConnection(){}async dispose(a){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,a&&(await this.implRecognizerStop(),await super.dispose(a)))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,u,c,l){const p=c;return new e.TranslationServiceRecognizer(a,u,p,l,this)}updateLanguages(a){const u=r.Connection.fromRecognizer(this);u&&(u.setMessageProperty("speech.context","translationcontext",{to:a}),u.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:a})))}};return _s.TranslationRecognizer=o,_s}var Is={},xP;function Gz(){if(xP)return Is;xP=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.Translations=void 0;const e=V();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return Is.Translations=t,Is}var vh={},qP;function Jz(){return qP||(qP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))}(vh)),vh}var As={},BP;function Qz(){if(BP)return As;BP=1,Object.defineProperty(As,"__esModule",{value:!0}),As.NoMatchDetails=void 0;const e=ee(),t=V();let r=class fO{constructor(i){this.privReason=i}static fromResult(i){const o=e.SimpleSpeechPhrase.fromJSON(i.json);let s=t.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:s=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:s=t.NoMatchReason.InitialSilenceTimeout;break;default:s=t.NoMatchReason.NotRecognized;break}return new fO(s)}get reason(){return this.privReason}};return As.NoMatchDetails=r,As}var bs={},FP;function Yz(){if(FP)return bs;FP=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.TranslationRecognitionCanceledEventArgs=void 0;let e=class{constructor(r,n,i,o,s){this.privCancelReason=n,this.privErrorDetails=i,this.privResult=s,this.privSessionId=r,this.privErrorCode=o}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return bs.TranslationRecognitionCanceledEventArgs=e,bs}var Os={},UP;function Xz(){if(UP)return Os;UP=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.IntentRecognitionCanceledEventArgs=void 0;const e=V();let t=class extends e.IntentRecognitionEventArgs{constructor(n,i,o,s,a,u){super(s,a,u),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Os.IntentRecognitionCanceledEventArgs=t,Os}var ks={},VP;function vO(){if(VP)return ks;VP=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.CancellationDetailsBase=void 0;let e=class{constructor(r,n,i){this.privReason=r,this.privErrorDetails=n,this.privErrorCode=i}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return ks.CancellationDetailsBase=e,ks}var Ms={},WP;function Zz(){if(WP)return Ms;WP=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.CancellationDetails=void 0;const e=ee(),t=vO(),r=V();let n=class gO extends t.CancellationDetailsBase{constructor(o,s,a){super(o,s,a)}static fromResult(o){let s=r.CancellationReason.Error,a=r.CancellationErrorCode.NoError;if(o instanceof r.RecognitionResult&&o.json){const u=e.SimpleSpeechPhrase.fromJSON(o.json);s=e.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus)}return o.properties&&(a=r.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new gO(s,o.errorDetails||e.EnumTranslation.implTranslateErrorDetails(a),a)}};return Ms.CancellationDetails=n,Ms}var gh={},$P;function eL(){return $P||($P=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))}(gh)),gh}var Ds={},HP;function tL(){if(HP)return Ds;HP=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.ConnectionEventArgs=void 0;const e=V();let t=class extends e.SessionEventArgs{};return Ds.ConnectionEventArgs=t,Ds}var Ns={},KP;function rL(){if(KP)return Ns;KP=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.ServiceEventArgs=void 0;const e=V();let t=class extends e.SessionEventArgs{constructor(n,i,o){super(o),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ns.ServiceEventArgs=t,Ns}var js={},GP;function nL(){if(GP)return js;GP=1,Object.defineProperty(js,"__esModule",{value:!0}),js.PhraseListGrammar=void 0;let e=class mO{constructor(r){this.privGrammerBuilder=r.dynamicGrammar}static fromRecognizer(r){const n=r.internalData;return new mO(n)}addPhrase(r){this.privGrammerBuilder.addPhrase(r)}addPhrases(r){this.privGrammerBuilder.addPhrase(r)}clear(){this.privGrammerBuilder.clearPhrases()}};return js.PhraseListGrammar=e,js}var Nn={},JP;function Ty(){if(JP)return Nn;JP=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.DialogServiceConfigImpl=Nn.DialogServiceConfig=void 0;const e=ue(),t=V();let r=class{constructor(){}set applicationId(o){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Nn.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechConfig.speechRecognitionLanguage=o}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(o){this.privSpeechConfig.outputFormat=o}setProperty(o,s){this.privSpeechConfig.setProperty(o,s)}getProperty(o,s){return this.privSpeechConfig.getProperty(o)}setProxy(o,s,a,u){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,o),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${s}`),a&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,a),u&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,u)}setServiceProperty(o,s,a){this.privSpeechConfig.setServiceProperty(o,s)}close(){}}return Nn.DialogServiceConfigImpl=n,Nn}var zs={},QP;function iL(){if(QP)return zs;QP=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.BotFrameworkConfig=void 0;const e=ue(),t=Ty(),r=V();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,s,a){e.Contracts.throwIfNullOrWhitespace(o,"subscription"),e.Contracts.throwIfNullOrWhitespace(s,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),a&&u.setProperty(r.PropertyId.Conversation_ApplicationId,a),u}static fromAuthorizationToken(o,s,a){e.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),a&&u.setProperty(r.PropertyId.Conversation_ApplicationId,a),u}static fromHost(o,s,a){e.Contracts.throwIfNullOrUndefined(o,"host");const u=o instanceof URL?o:new URL(`wss://${o}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(u,"resolvedHost");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Host,u.toString()),s!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c}static fromEndpoint(o,s){e.Contracts.throwIfNull(o,"endpoint");const a=new t.DialogServiceConfigImpl;return a.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,o.toString()),s!==void 0&&a.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),a}};return zs.BotFrameworkConfig=n,zs}var Ls={},YP;function oL(){if(YP)return Ls;YP=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.CustomCommandsConfig=void 0;const e=ue(),t=Ty(),r=V();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,s,a){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(s,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,o),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),u}static fromAuthorizationToken(o,s,a){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,o),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),u}set applicationId(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,o)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return Ls.CustomCommandsConfig=n,Ls}var xs={},qs={},Bs={},Fs={},XP;function Pn(){if(XP)return Fs;XP=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.QueryParameterNames=void 0;let e=class{};return Fs.QueryParameterNames=e,e.BotId="botid",e.CustomSpeechDeploymentId="cid",e.CustomVoiceDeploymentId="deploymentId",e.EnableAudioLogging="storeAudio",e.EnableLanguageId="lidEnabled",e.EnableWordLevelTimestamps="wordLevelTimestamps",e.EndSilenceTimeoutMs="endSilenceTimeoutMs",e.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",e.Format="format",e.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",e.Language="language",e.Profanity="profanity",e.RequestBotStatusMessages="enableBotMessageStatus",e.StableIntermediateThreshold="stableIntermediateThreshold",e.StableTranslation="stableTranslation",e.TestHooks="testhooks",e.Postprocessing="postprocessing",e.CtsMeetingId="meetingId",e.CtsDeviceId="deviceId",e.CtsIsParticipant="isParticipant",e.EnableAvatar="enableTalkingAvatar",Fs}var ZP;function dr(){if(ZP)return Bs;ZP=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.ConnectionFactoryBase=void 0;const e=ee(),t=V(),r=Pn();let n=class{static getHostSuffix(o){if(o){if(o.toLowerCase().startsWith("china"))return".azure.cn";if(o.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(o,s,a){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,o,s,a)});const c=JSON.parse(o.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(c).forEach(l=>{s[l]=c[l]})}setUrlParameter(o,s,a,u,c){const l=a.parameters.getProperty(o,void 0);l&&(!c||c.search(s)===-1)&&(u[s]=l.toLocaleLowerCase())}};return Bs.ConnectionFactoryBase=n,Bs}var eE;function sL(){if(eE)return qs;eE=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.DialogConnectionFactory=void 0;const e=at(),t=ee(),r=V(),n=dr(),i=ee(),o=wt(),s=Pn();class a extends n.ConnectionFactoryBase{create(c,l,p){const d=c.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=c.parameters.getProperty(r.PropertyId.Conversation_DialogType),f=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),v=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),y=c.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),g={};g[o.HeaderNames.ConnectionId]=p,g[s.QueryParameterNames.Format]=c.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),g[s.QueryParameterNames.Language]=v,g[s.QueryParameterNames.RequestBotStatusMessages]=y,d&&(g[s.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(g[o.HeaderNames.CustomCommandsAppId]=d));const m=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const R=n.ConnectionFactoryBase.getHostSuffix(f),T=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${f}.${a.BaseUrl}${R}`);P=`${T.endsWith("/")?T:T+"/"}${m}${a.ApiKey}/${S}`}this.setCommonUrlParams(c,g,P);const E=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(P,g,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),E,p)}}return qs.DialogConnectionFactory=a,a.ApiKey="api",a.BaseUrl="convai.speech",qs}var tE;function aL(){if(tE)return xs;tE=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.DialogServiceConnector=void 0;const e=sL(),t=ee(),r=ne(),n=ue(),i=V(),o=_y();let s=class extends i.Recognizer{constructor(u,c){const l=u;n.Contracts.throwIfNull(u,"dialogConfig"),super(c,l.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(u,c){r.marshalPromiseToCallbacks(this.privReco.connect(),u,c)}disconnect(u,c){r.marshalPromiseToCallbacks(this.privReco.disconnect(),u,c)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){n.Contracts.throwIfNullOrWhitespace(u,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,u)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(u){this.properties.setProperty(o.PropertyId.Conversation_Speech_Activity_Template,u)}listenOnceAsync(u,c){if(this.isTurnComplete){n.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new r.Deferred;await this.privReco.recognize(t.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),u,c)}}sendActivityAsync(u,c,l){r.marshalPromiseToCallbacks(this.privReco.sendMessage(u),c,l)}close(u,c){n.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),u,c)}async dispose(u){this.privIsDisposed||u&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,c,l,p){const d=l;return new t.DialogServiceAdapter(u,c,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(o.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(o.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(o.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return xs.DialogServiceConnector=s,xs}var Us={},rE;function uL(){if(rE)return Us;rE=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.ActivityReceivedEventArgs=void 0;let e=class{constructor(r,n){this.privActivity=r,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return Us.ActivityReceivedEventArgs=e,Us}var Vs={},Ws={},nE;function cL(){if(nE)return Ws;nE=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.TurnStatusResponsePayload=void 0;class e{constructor(r){this.privMessageStatusResponse=JSON.parse(r)}static fromJSON(r){return new e(r)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return Ws.TurnStatusResponsePayload=e,Ws}var iE;function lL(){if(iE)return Vs;iE=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.TurnStatusReceivedEventArgs=void 0;const e=cL();let t=class{constructor(n){this.privTurnStatus=e.TurnStatusResponsePayload.fromJSON(n)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return Vs.TurnStatusReceivedEventArgs=t,Vs}var mh={},oE;function pL(){return oE||(oE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))}(mh)),mh}var yh={},sE;function dL(){return sE||(sE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))}(yh)),yh}var $s={},aE;function hL(){if(aE)return $s;aE=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.BaseAudioPlayer=void 0;const e=Er(),t=V(),r=vi();let n=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=t.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,s,a){try{this.ensureInitializedContext();const u=this.formatAudioData(o),c=new Float32Array(this.samples.length+u.length);c.set(this.samples,0),c.set(u,this.samples.length),this.samples=c,s&&s()}catch(u){a&&a(u)}}stopAudio(o,s){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},a=>{s&&s(a)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,s){const a=new Float32Array(o.length);for(let u=0;u<o.length;u++)a[u]=o[u]/s;return a}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,s=this.audioContext.createBufferSource(),a=this.samples.length/o,u=this.audioContext.createBuffer(o,a,this.audioFormat.samplesPerSec);for(let c=0;c<o;c++){let l=c;const p=u.getChannelData(c);for(let d=0;d<this.samples.length;d++,l+=o)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),s.buffer=u,s.connect(this.gainNode),s.start(this.startTime),this.startTime+=u.duration,this.samples=new Float32Array}async playAudio(o){this.audioContext===null&&this.createAudioContext();const s=this.audioContext.createBufferSource(),a=this.audioContext.destination;await this.audioContext.decodeAudioData(o,u=>{s.buffer=u,s.connect(a),s.start(0)})}};return $s.BaseAudioPlayer=n,$s}var Hs={},uE;function fL(){if(uE)return Hs;uE=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.ConnectionMessageEventArgs=void 0;let e=class{constructor(r){this.privConnectionMessage=r}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return Hs.ConnectionMessageEventArgs=e,Hs}var Ks={},cE;function vL(){if(cE)return Ks;cE=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.VoiceProfile=void 0;let e=class{constructor(r,n){this.privId=r,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}};return Ks.VoiceProfile=e,Ks}var jn={},lE;function gL(){if(lE)return jn;lE=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.VoiceProfileEnrollmentCancellationDetails=jn.VoiceProfileEnrollmentResult=void 0;const e=ee(),t=V();let r=class ym{constructor(o,s,a){this.privReason=o,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?s&&(this.privDetails=JSON.parse(s),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=a,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(o){const s=[];for(const a of o.value){const u=a.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:a.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,c=new ym(u,null,null);c.privDetails=this.getIdentificationDetails(a),s.push(c)}return s}static FromVerificationProfileList(o){const s=[];for(const a of o.value){const u=a.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:a.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,c=new ym(u,null,null);c.privDetails=this.getVerificationDetails(a),s.push(c)}return s}static getIdentificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount||0,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.identificationProfileId,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.verificationProfileId,remainingEnrollmentsCount:o.remainingEnrollments||o.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}};jn.VoiceProfileEnrollmentResult=r;class n extends t.CancellationDetailsBase{constructor(o,s,a){super(o,s,a)}static fromResult(o){const s=t.CancellationReason.Error;let a=t.CancellationErrorCode.NoError;return o.properties&&(a=t.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new n(s,o.errorDetails,a)}}return jn.VoiceProfileEnrollmentCancellationDetails=n,jn}var zn={},pE;function mL(){if(pE)return zn;pE=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.VoiceProfileCancellationDetails=zn.VoiceProfileResult=void 0;const e=ee(),t=ue(),r=V();let n=class{constructor(s,a){this.privReason=s,this.privProperties=new r.PropertyCollection,s===r.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(a,"statusText"),this.privErrorDetails=a,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};zn.VoiceProfileResult=n;class i extends r.CancellationDetailsBase{constructor(s,a,u){super(s,a,u)}static fromResult(s){const a=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return s.properties&&(u=r.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new i(a,s.errorDetails,u)}}return zn.VoiceProfileCancellationDetails=i,zn}var Gs={},dE;function yL(){if(dE)return Gs;dE=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.VoiceProfilePhraseResult=void 0;const e=ue(),t=V();let r=class extends t.VoiceProfileResult{constructor(i,o,s,a){super(i,o),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(a,"phrase array"),this.privType=s,a&&a[0]&&(this.privPhrases=a)}get phrases(){return this.privPhrases}get type(){return this.privType}};return Gs.VoiceProfilePhraseResult=r,Gs}var Js={},hE;function SL(){if(hE)return Js;hE=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.VoiceProfileClient=void 0;const e=ee(),t=iO(),r=ue(),n=V();let i=class extends n.Recognizer{constructor(s){r.Contracts.throwIfNullOrUndefined(s,"speechConfig");const a=s;r.Contracts.throwIfNull(a,"speechConfig"),super(t.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),a.properties,new e.VoiceProfileConnectionFactory),this.privProperties=a.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}async createProfileAsync(s,a){const u=await this.privVoiceAdapter.createProfile(s,a);return new n.VoiceProfile(u[0],s)}async retrieveEnrollmentResultAsync(s){return this.privVoiceAdapter.retrieveEnrollmentResult(s)}async getAllProfilesAsync(s){return this.privVoiceAdapter.getAllProfiles(s)}async getActivationPhrasesAsync(s,a){return this.privVoiceAdapter.getActivationPhrases(s,a)}async enrollProfileAsync(s,a){const u=a;return r.Contracts.throwIfNullOrUndefined(u,"audioConfig"),this.audioConfig=a,this.privVoiceAdapter.SpeakerAudioSource=u,this.privVoiceAdapter.enrollProfile(s)}async deleteProfileAsync(s){return this.privVoiceAdapter.deleteProfile(s)}async resetProfileAsync(s){return this.privVoiceAdapter.resetProfile(s)}async close(){await this.dispose(!0)}createServiceRecognizer(s,a,u,c){const l=u;return new e.VoiceServiceRecognizer(s,a,l,c,this)}async dispose(s){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,s&&await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.properties)}getResult(s,a){return new n.VoiceProfileResult(s.ok?a:n.ResultReason.Canceled,s.statusText)}};return Js.VoiceProfileClient=i,Js}var Qs={},fE;function CL(){if(fE)return Qs;fE=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.SpeakerRecognizer=void 0;const e=ee(),t=ue(),r=V();let n=class extends r.Recognizer{constructor(o,s){t.Contracts.throwIfNullOrUndefined(o,"speechConfig");const a=o;t.Contracts.throwIfNullOrUndefined(a,"speechConfig"),super(s,a.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=s,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=a.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){t.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}async recognizeOnceAsync(o){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(o)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(o){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const s=await this.privReco.recognizeSpeaker(o);return await this.implRecognizerStop(),s}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,s,a,u){const c=a;return new e.SpeakerServiceRecognizer(o,s,c,u,this)}async dispose(o){this.privDisposedSpeakerRecognizer||o&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(o))}};return Qs.SpeakerRecognizer=n,Qs}var Ys={},vE;function RL(){if(vE)return Ys;vE=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.SpeakerIdentificationModel=void 0;const e=ue(),t=V();let r=class yO{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const o of i){if(o.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+o.profileId);this.privVoiceProfiles.push(o),this.privProfileIds.push(o.profileId)}}static fromProfiles(i){return new yO(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Ys.SpeakerIdentificationModel=r,Ys}var Xs={},gE;function PL(){if(gE)return Xs;gE=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.SpeakerVerificationModel=void 0;const e=ue(),t=V();let r=class SO{constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new SO(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return Xs.SpeakerVerificationModel=r,Xs}var Zs={},Sh={},mE;function CO(){return mE||(mE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))}(Sh)),Sh}var yE;function EL(){if(yE)return Zs;yE=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.AutoDetectSourceLanguageConfig=void 0;const e=ee(),t=ue(),r=V(),n=CO();let i=class wl{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const s=new wl;return s.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),s}static fromLanguages(s){t.Contracts.throwIfArrayEmptyOrWhitespace(s,"languages");const a=new wl;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,s.join()),a}static fromSourceLanguageConfigs(s){if(s.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const a=new wl,u=[];return s.forEach(c=>{if(u.push(c.language),c.endpointId!==void 0&&c.endpointId!==""){const l=c.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();a.properties.setProperty(l,c.endpointId)}}),a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,u.join()),a}get properties(){return this.privProperties}set mode(s){s===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=s}};return Zs.AutoDetectSourceLanguageConfig=i,Zs}var ea={},SE;function wL(){if(SE)return ea;SE=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.AutoDetectSourceLanguageResult=void 0;const e=ue();let t=class Sm{constructor(n,i){e.Contracts.throwIfNullOrUndefined(n,"language"),e.Contracts.throwIfNullOrUndefined(i,"languageDetectionConfidence"),this.privLanguage=n,this.privLanguageDetectionConfidence=i}static fromResult(n){return new Sm(n.language,n.languageDetectionConfidence)}static fromConversationTranscriptionResult(n){return new Sm(n.language,n.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return ea.AutoDetectSourceLanguageResult=t,ea}var ta={},CE;function _L(){if(CE)return ta;CE=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.SourceLanguageConfig=void 0;const e=ue();let t=class RO{constructor(n,i){e.Contracts.throwIfNullOrUndefined(n,"language"),this.privLanguage=n,this.privEndpointId=i}static fromLanguage(n,i){return new RO(n,i)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return ta.SourceLanguageConfig=t,ta}var Ch={},RE;function TL(){return RE||(RE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=ee(),r=V();var n;(function(s){s[s.Verify=0]="Verify",s[s.Identify=1]="Identify"})(n=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(a,u=r.ResultReason.RecognizedSpeaker,c=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=a.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=u,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=a.identificationResult.identifiedProfile.profileId,this.privScore=a.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=a.verificationResult.score,a.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),a.verificationResult.profileId!==void 0&&a.verificationResult.profileId!==""&&(this.privProfileId=a.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[c])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(a))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class o extends r.CancellationDetailsBase{constructor(a,u,c){super(a,u,c)}static fromResult(a){const u=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new o(u,a.errorDetails,c)}}e.SpeakerRecognitionCancellationDetails=o}(Ch)),Ch}var Rh={},Ln={},PE;function PO(){if(PE)return Ln;PE=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.ConversationImpl=Ln.Conversation=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class{constructor(){}static createConversationAsync(a,u,c,l){r.Contracts.throwIfNullOrUndefined(a,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(a.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!a.subscriptionKey&&!a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(a.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof u=="string"?(p=new o(a,u),t.marshalPromiseToCallbacks((async()=>{})(),c,l)):(p=new o(a),d=u,h=c,p.createConversationAsync(()=>{d&&d()},f=>{h&&h(f)})),p}};Ln.Conversation=i;class o extends i{constructor(a,u){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||a.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),u)this.privConversationId=u;else{a.targetLanguages.length===0&&a.addTargetLanguage(this.privLanguage),a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||a.setProfanity(n.ProfanityOption.Masked);let d=a.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),a.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=a;const l=a;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var a,u;return(a=this.privParticipants.me)!=null&&a.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const a=this.conversationId,u=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),c={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(c[p]=d)}return{id:a,participants:u,conversationProperties:c}}get canSend(){var a;return this.privIsConnected&&!((a=this.privParticipants.me)!=null&&a.isMuted)}get canSendAsHost(){var a;return this.privIsConnected&&((a=this.privParticipants.me)==null?void 0:a.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),this.privToken=a}set conversationTranslator(a){this.privConversationTranslator=a}onToken(a){this.privConversationTranslator.onToken(a)}createConversationAsync(a,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,c=>{c||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=c,this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}startConversationAsync(a,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}addParticipantAsync(a,u,c){r.Contracts.throwIfNullOrUndefined(a,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(a),u,c)}joinConversationAsync(a,u,c,l,p){try{r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,a,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(a,u){t.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),a,u)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(a,u){t.marshalPromiseToCallbacks(this.endConversationImplAsync(),a,u)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}muteAllParticipantsAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}muteParticipantAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),!this.me.isHost&&this.me.id!==a&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c),this.privParticipants.getParticipantIndex(a)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!0),()=>{this.handleCallback(u,c)},p=>{this.handleError(p,c)})}catch(l){this.handleError(l,c)}}removeParticipantAsync(a,u,c){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&a.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(a),u,c);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),c);let l="";typeof a=="string"?l=a:a.hasOwnProperty("id")?l=a.id:a.hasOwnProperty("userId")&&(l=a.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(u,c)},d=>{this.handleError(d,c)})}}catch(l){this.handleError(l,c)}}unlockConversationAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}unmuteAllParticipantsAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}unmuteParticipantAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),!this.me.isHost&&this.me.id!==a&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c),this.privParticipants.getParticipantIndex(a)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!1),()=>{this.handleCallback(u,c)},p=>{this.handleError(p,c)})}catch(l){this.handleError(l,c)}}sendTextMessageAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),a.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(a),()=>{this.handleCallback(u,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}setTranslatedLanguagesAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(a),()=>{this.handleCallback(u,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}changeNicknameAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(a),()=>{this.handleCallback(u,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(a){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await a.enforceAudioGating(),this.privTranscriberRecognizer=a,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const a=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:a,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(a){if(this.privParticipants.addOrUpdateParticipant(a)!==void 0&&this.privTranscriberRecognizer){const c=this.conversationInfo;return c.participants=[a],this.privTranscriberRecognizer.pushConversationEvent(c,"join")}}removeParticipantImplAsync(a){this.privParticipants.deleteParticipant(a.id);const u=this.conversationInfo;return u.participants=[a],this.privTranscriberRecognizer.pushConversationEvent(u,"leave")}async close(a){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(c){throw c}a&&this.dispose()}handleCallback(a,u){if(a){try{a()}catch(c){u&&u(c)}a=void 0}}handleError(a,u){if(u)if(a instanceof Error){const c=a;u(c.name+": "+c.message)}else u(a)}toParticipants(a){const u=this.privParticipants.participants.map(c=>this.toParticipant(c));return a?u:u.filter(c=>c.isHost===!1)}toParticipant(a){return new n.Participant(a.id,a.avatar,a.displayName,a.isHost,a.isMuted,a.isUsingTts,a.preferredLanguage,a.voice)}getMuteAllCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMuteCommand(a,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:a,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getEjectCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:a,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getChangeNicknameCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(a,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:a,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMessageCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(a,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:a,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return Ln.ConversationImpl=o,Ln}var ra={},EE;function IL(){if(EE)return ra;EE=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.ConversationCommon=void 0;let e=class{constructor(r){this.privAudioConfig=r}handleCallback(r,n){if(r){try{r()}catch(i){n&&n(i)}r=void 0}}handleError(r,n){if(n)if(r instanceof Error){const i=r;n(i.name+": "+i.message)}else n(r)}};return ra.ConversationCommon=e,ra}var na={},wE;function AL(){if(wE)return na;wE=1,Object.defineProperty(na,"__esModule",{value:!0}),na.ConversationExpirationEventArgs=void 0;const e=V();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return na.ConversationExpirationEventArgs=t,na}var ia={},_E;function bL(){if(_E)return ia;_E=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.ConversationParticipantsChangedEventArgs=void 0;const e=V();let t=class extends e.SessionEventArgs{constructor(n,i,o){super(o),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return ia.ConversationParticipantsChangedEventArgs=t,ia}var oa={},TE;function OL(){if(TE)return oa;TE=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.ConversationTranslationCanceledEventArgs=void 0;const e=Tc();let t=class extends e.CancellationEventArgsBase{};return oa.ConversationTranslationCanceledEventArgs=t,oa}var sa={},IE;function kL(){if(IE)return sa;IE=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.ConversationTranslationEventArgs=void 0;const e=V();let t=class extends e.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return sa.ConversationTranslationEventArgs=t,sa}var aa={},AE;function ML(){if(AE)return aa;AE=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.ConversationTranslationResult=void 0;const e=sO();let t=class extends e.TranslationRecognitionResult{constructor(n,i,o,s,a,u,c,l,p,d,h){super(i,s,a,u,c,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=o}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return aa.ConversationTranslationResult=t,aa}var Ph={},ua={},ca={},bE;function EO(){if(bE)return ca;bE=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.StringUtils=void 0;let e=class{static formatString(r,n){if(!r)return"";if(!n)return r;let i="",o="";const s=c=>{i+=c},a=c=>{o+=c};let u=s;for(let c=0;c<r.length;c++){const l=r[c],p=c+1<r.length?r[c+1]:"";switch(l){case"{":p==="{"?(u("{"),c++):u=a;break;case"}":p==="}"?(u("}"),c++):(n.hasOwnProperty(o)&&(i+=n[o]),u=s,o="");break;default:u(l);break}}return i}};return ca.StringUtils=e,ca}var OE;function DL(){if(OE)return ua;OE=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.ConversationTranslatorConnectionFactory=void 0;const e=at(),t=EO(),r=ue(),n=V(),i=wt(),o=Pn(),s=dr(),a=ee();let u=class wO extends s.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",f=this.privConvGetter().room,v=f.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),y={hostSuffix:s.ConnectionFactoryBase.getHostSuffix(v),path:wO.CTS_VIRT_MIC_PATH,region:encodeURIComponent(v)};y[o.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),y[o.QueryParameterNames.CtsMeetingId]=encodeURIComponent(f.roomId),y[o.QueryParameterNames.CtsDeviceId]=encodeURIComponent(f.participantId),y[o.QueryParameterNames.CtsIsParticipant]=f.isHost?"":"&"+o.QueryParameterNames.CtsIsParticipant;let g="";const m={},S={};if(h){g=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),g||(g="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),g=t.StringUtils.formatString(g,y);const P=new URL(g);P.searchParams.forEach((R,T)=>{m[T]=R}),new a.TranscriberConnectionFactory().setQueryParams(m,l,g),m[o.QueryParameterNames.CtsMeetingId]=y[o.QueryParameterNames.CtsMeetingId],m[o.QueryParameterNames.CtsDeviceId]=y[o.QueryParameterNames.CtsDeviceId],f.isHost||(m[o.QueryParameterNames.CtsIsParticipant]=""),o.QueryParameterNames.Format in m||(m[o.QueryParameterNames.Format]="simple"),P.searchParams.forEach((R,T)=>{P.searchParams.set(T,m[T]),delete m[T]}),g=P.toString()}else{const P=new a.TranslationConnectionFactory;g=P.getEndpointUrl(l,!0),g=t.StringUtils.formatString(g,y),P.setQueryParams(m,l,g)}S[i.HeaderNames.ConnectionId]=d,S[e.RestConfigBase.configParams.token]=f.token,p.token&&(S[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new e.WebsocketConnection(g,m,S,new a.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),C,d)}};return ua.ConversationTranslatorConnectionFactory=u,u.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",ua}var kE;function NL(){return kE||(kE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=ee(),r=DL(),n=ne(),i=ue(),o=V(),s=PO(),a=Iy();var u;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(u=e.SpeechState||(e.SpeechState={}));class c extends o.TranslationRecognizer{constructor(d,h,f,v){super(d,h,new r.ConversationTranslatorConnectionFactory(v)),this.privSpeechState=u.Inactive,f&&(this.privTranslator=f,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(y,g)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,g)},this.recognized=async(y,g)=>{var m;(m=g.result)!=null&&m.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(g.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,g)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new a.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,d,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=u.Inactive}catch{}}}class l extends a.ConversationCommon{constructor(d){super(d),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===u.Connected||this.privCTRecognizer.state===u.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const f=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));f[d]=h,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(f))}joinConversationAsync(d,h,f,v,y){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let g=f;(g==null||g==="")&&(g=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(g),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],g),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],h);const m=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of m){const P=this.privProperties.getProperty(C);if(P){const E=typeof C=="string"?C:o.PropertyId[C];this.privSpeechTranslationConfig.setProperty(E,P)}}const S=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(S))this.privSpeechTranslationConfig.setServiceProperty(C,S[C],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new s.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,g,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(v,y)},P=>{this.handleError(P,y)})},C=>{this.handleError(C,y)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(f,v)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),v)}catch(g){this.handleError(g,typeof f=="string"?y:v)}}leaveConversationAsync(d,h){n.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,f){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,f)}catch(v){this.handleError(v,f)}}startTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(f){throw this.privIsSpeaking=!1,await this.cancelSpeech(),f}})(),d,h)}stopTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((f,v)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(f,v)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,f){n.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,f)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new c(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}e.ConversationTranslator=l}(Ph)),Ph}var la={},ME;function jL(){if(ME)return la;ME=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ConversationTranscriber=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class _O extends n.Recognizer{constructor(s,a){const u=s;r.Contracts.throwIfNull(u,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(a,u.properties,new e.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(s,a,u){const c=s;return a.properties.mergeTo(c.properties),new _O(s,u)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(s,a){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),s,a)}stopTranscribingAsync(s,a){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),s,a)}close(s,a){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),s,a)}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,u,c){const l=u;return c.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(s,a,l,c,this)}};return la.ConversationTranscriber=i,la}var xn={},DE;function zL(){if(DE)return xn;DE=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.Participant=xn.User=void 0;const e=V();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}xn.User=t;class r{constructor(i,o,s,a,u,c,l,p){this.privId=i,this.privAvatar=o,this.privDisplayName=s,this.privIsHost=a,this.privIsMuted=u,this.privIsUsingTts=c,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,o,s){return new r(i,"",i,!1,!1,!1,o,s)}}return xn.Participant=r,xn}var Eh={},NE;function LL(){return NE||(NE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))}(Eh)),Eh}var qn={},jE;function xL(){if(jE)return qn;jE=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.MeetingImpl=qn.Meeting=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class{constructor(){}static createMeetingAsync(a,u,c,l){if(r.Contracts.throwIfNullOrUndefined(a,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(a.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(u,"meetingId"),u.length===0)throw new Error("meetingId cannot be empty");!a.subscriptionKey&&!a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(a.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new o(a,u);return t.marshalPromiseToCallbacks((async()=>{})(),c,l),p}};qn.Meeting=i;class o extends i{constructor(a,u){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||a.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=a.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=u,this.privConfig=a;const l=a;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var a,u;return(a=this.privParticipants.me)!=null&&a.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const a=this.meetingId,u=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),c={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(c[p]=d)}return{id:a,participants:u,meetingProperties:c}}get canSend(){var a;return this.privIsConnected&&!((a=this.privParticipants.me)!=null&&a.isMuted)}get canSendAsHost(){var a;return this.privIsConnected&&((a=this.privParticipants.me)==null?void 0:a.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),this.privToken=a}createMeetingAsync(a,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,c=>{c||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=c,this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}startMeetingAsync(a,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}addParticipantAsync(a,u,c){r.Contracts.throwIfNullOrUndefined(a,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(a),u,c)}joinMeetingAsync(a,u,c,l,p){try{r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,a,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(a,u){t.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),a,u)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(a,u){t.marshalPromiseToCallbacks(this.endMeetingImplAsync(),a,u)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}muteAllParticipantsAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}muteParticipantAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),!this.me.isHost&&this.me.id!==a&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c),this.privParticipants.getParticipantIndex(a)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!0),()=>{this.handleCallback(u,c)},p=>{this.handleError(p,c)})}catch(l){this.handleError(l,c)}}removeParticipantAsync(a,u,c){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&a.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(a),u,c);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),c);let l="";typeof a=="string"?l=a:a.hasOwnProperty("id")?l=a.id:a.hasOwnProperty("userId")&&(l=a.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(u,c)},d=>{this.handleError(d,c)})}}catch(l){this.handleError(l,c)}}unlockMeetingAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}unmuteAllParticipantsAsync(a,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(a,u)},c=>{this.handleError(c,u)})}catch(c){this.handleError(c,u)}}unmuteParticipantAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),!this.me.isHost&&this.me.id!==a&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),c),this.privParticipants.getParticipantIndex(a)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(a,!1),()=>{this.handleCallback(u,c)},p=>{this.handleError(p,c)})}catch(l){this.handleError(l,c)}}sendTextMessageAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),a.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(a),()=>{this.handleCallback(u,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}setTranslatedLanguagesAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(a),()=>{this.handleCallback(u,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}changeNicknameAsync(a,u,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(a),()=>{this.handleCallback(u,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(a){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await a.enforceAudioGating(),this.privTranscriberRecognizer=a,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const a=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:a,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(a){if(this.privParticipants.addOrUpdateParticipant(a)!==void 0&&this.privTranscriberRecognizer){const c=this.meetingInfo;return c.participants=[a],this.privTranscriberRecognizer.pushMeetingEvent(c,"join")}}removeParticipantImplAsync(a){this.privParticipants.deleteParticipant(a.id);const u=this.meetingInfo;return u.participants=[a],this.privTranscriberRecognizer.pushMeetingEvent(u,"leave")}async close(a){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(c){throw c}a&&this.dispose()}handleCallback(a,u){if(a){try{a()}catch(c){u&&u(c)}a=void 0}}handleError(a,u){if(u)if(a instanceof Error){const c=a;u(c.name+": "+c.message)}else u(a)}toParticipants(a){const u=this.privParticipants.participants.map(c=>this.toParticipant(c));return a?u:u.filter(c=>c.isHost===!1)}toParticipant(a){return new n.Participant(a.id,a.avatar,a.displayName,a.isHost,a.isMuted,a.isUsingTts,a.preferredLanguage,a.voice)}getMuteAllCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMuteCommand(a,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:a,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getEjectCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(a,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:a,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getChangeNicknameCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(a,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:a,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:a})}getMessageCommand(a){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(a,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:a,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return qn.MeetingImpl=o,qn}var pa={},zE;function qL(){if(zE)return pa;zE=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.MeetingTranscriptionCanceledEventArgs=void 0;const e=Tc();class t extends e.CancellationEventArgsBase{}return pa.MeetingTranscriptionCanceledEventArgs=t,pa}var da={},LE;function BL(){if(LE)return da;LE=1,Object.defineProperty(da,"__esModule",{value:!0}),da.MeetingTranscriber=void 0;const e=ee(),t=ne(),r=ue(),n=V(),i=Iy();let o=class{constructor(a){this.privAudioConfig=a,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}joinMeetingAsync(a,u,c){const l=a;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(a.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),t.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),u,c)}startTranscribingAsync(a,u){this.privRecognizer.startContinuousRecognitionAsync(a,u)}stopTranscribingAsync(a,u){this.privRecognizer.stopContinuousRecognitionAsync(a,u)}leaveMeetingAsync(a,u){this.privRecognizer.disconnectCallbacks(),t.marshalPromiseToCallbacks((async()=>{})(),a,u)}close(a,u){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,u)}async dispose(a){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),a&&(this.privDisposedRecognizer=!0))}};return da.MeetingTranscriber=o,da}var ha={},xE;function FL(){if(xE)return ha;xE=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.ConversationTranscriptionResult=void 0;const e=V();let t=class extends e.RecognitionResult{constructor(n,i,o,s,a,u,c,l,p,d,h){super(n,i,o,s,a,u,c,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return ha.ConversationTranscriptionResult=t,ha}var qE;function Iy(){return qE||(qE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=PO();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var r=IL();Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=AL();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=bL();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var o=OL();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationCanceledEventArgs}});var s=kL();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationEventArgs}});var a=ML();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return a.ConversationTranslationResult}});var u=NL();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var c=jL();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return c.ConversationTranscriber}});var l=zL();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return l.User}});var p=LL();Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=xL();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=qL();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=BL();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var v=FL();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return v.ConversationTranscriptionResult}})}(Rh)),Rh}var Bn={},BE;function Ay(){if(BE)return Bn;BE=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.SynthesisRequest=Bn.Synthesizer=void 0;const e=ee(),t=ne(),r=ue(),n=V();let i=class TO{constructor(a){const u=a;r.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(a){const u={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let c=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=TO.XMLEncode(a);return this.autoDetectSourceLanguage?c="en-US":l=l||u[c],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${c}'>${p}</speak>`,p}async dispose(a){this.privDisposed||(a&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const a=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(a.text,a.isSSML,a.requestId,a.cb,a.err,a.dataStream)}}createSynthesizerConfig(a){return new e.SynthesizerConfig(a,this.privProperties)}implCommonSynthesizeSetup(){let a=typeof window<"u"?"Browser":"Node",u="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,u=navigator.userAgent,c=navigator.appVersion);const l=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,u,c)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new e.CognitiveSubscriptionKeyAuthentication(p):new e.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Bn.Synthesizer=i;class o{constructor(a,u,c,l,p,d){this.requestId=a,this.text=u,this.isSSML=c,this.cb=l,this.err=p,this.dataStream=d}}return Bn.SynthesisRequest=o,Bn}var fa={},FE;function UL(){if(FE)return fa;FE=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.SpeechSynthesizer=void 0;const e=ee(),t=ne(),r=eO(),n=_c(),i=Zi(),o=ue(),s=V(),a=Ay();let u=class IO extends s.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:s.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new IO(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){o.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new e.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new e.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(s.SpeechSynthesisOutputFormat[this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,f){try{o.Contracts.throwIfDisposed(this.privDisposed);const v=t.createNoDashGuid();let y;f instanceof s.PushAudioOutputStreamCallback?y=new i.PushAudioOutputStreamImpl(f):f instanceof s.PullAudioOutputStream?y=f:f!==void 0?y=new r.AudioFileWriter(f):y=void 0,this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(v,l,p,g=>{if(this.privSynthesizing=!1,d)try{d(g)}catch(m){h&&h(m)}d=void 0,this.adapterSpeak().catch(()=>{})},g=>{h&&h(g)},y)),this.adapterSpeak().catch(()=>{})}catch(v){if(h)if(v instanceof Error){const y=v;h(y.name+": "+y.message)}else h(v);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=t.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(f=>!!f.Locale&&f.Locale.toLowerCase()===l.toLowerCase())),new s.SynthesisVoicesResult(p,h,void 0)}else return new s.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return fa.SpeechSynthesizer=u,fa}var va={},UE;function VL(){if(UE)return va;UE=1,Object.defineProperty(va,"__esModule",{value:!0}),va.SynthesisResult=void 0;let e=class{constructor(r,n,i,o){this.privResultId=r,this.privReason=n,this.privErrorDetails=i,this.privProperties=o}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return va.SynthesisResult=e,va}var ga={},VE;function WL(){if(VE)return ga;VE=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.SpeechSynthesisResult=void 0;const e=V();let t=class extends e.SynthesisResult{constructor(n,i,o,s,a,u){super(n,i,s,a),this.privAudioData=o,this.privAudioDuration=u}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return ga.SpeechSynthesisResult=t,ga}var ma={},WE;function $L(){if(WE)return ma;WE=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.SpeechSynthesisEventArgs=void 0;let e=class{constructor(r){this.privResult=r}get result(){return this.privResult}};return ma.SpeechSynthesisEventArgs=e,ma}var ya={},$E;function HL(){if($E)return ya;$E=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.SpeechSynthesisWordBoundaryEventArgs=void 0;let e=class{constructor(r,n,i,o,s,a){this.privAudioOffset=r,this.privDuration=n,this.privText=i,this.privWordLength=o,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return ya.SpeechSynthesisWordBoundaryEventArgs=e,ya}var Sa={},HE;function KL(){if(HE)return Sa;HE=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.SpeechSynthesisBookmarkEventArgs=void 0;let e=class{constructor(r,n){this.privAudioOffset=r,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return Sa.SpeechSynthesisBookmarkEventArgs=e,Sa}var Ca={},KE;function GL(){if(KE)return Ca;KE=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.SpeechSynthesisVisemeEventArgs=void 0;let e=class{constructor(r,n,i){this.privAudioOffset=r,this.privVisemeId=n,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Ca.SpeechSynthesisVisemeEventArgs=e,Ca}var wh={},GE;function JL(){return GE||(GE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))}(wh)),wh}var Ra={},JE;function QL(){if(JE)return Ra;JE=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.SynthesisVoicesResult=void 0;const e=V();let t=class extends e.SynthesisResult{constructor(n,i,o){if(Array.isArray(i)){super(n,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const s of i)this.privVoices.push(new e.VoiceInfo(s))}else super(n,e.ResultReason.Canceled,o||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Ra.SynthesisVoicesResult=t,Ra}var _h={},QE;function YL(){return QE||(QE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(o){o[o.Unknown=0]="Unknown",o[o.Female=1]="Female",o[o.Male=2]="Male",o[o.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var r;(function(o){o[o.OnlineNeural=1]="OnlineNeural",o[o.OnlineStandard=2]="OnlineStandard",o[o.OfflineNeural=3]="OfflineNeural",o[o.OfflineStandard=4]="OfflineStandard"})(r=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const n={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female};class i{constructor(s){if(this.privStyleList=[],s){if(this.privName=s.Name,this.privLocale=s.Locale,this.privShortName=s.ShortName,this.privLocaleName=s.LocaleName,this.privDisplayName=s.DisplayName,this.privLocalName=s.LocalName,this.privVoiceType=s.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender=n[s.Gender]||t.Unknown,s.StyleList&&Array.isArray(s.StyleList))for(const a of s.StyleList)this.privStyleList.push(a);this.privSampleRateHertz=s.SampleRateHertz,this.privStatus=s.Status,s.ExtendedPropertyMap&&(this.privExtendedPropertyMap=s.ExtendedPropertyMap),this.privWordsPerMinute=s.WordsPerMinute,Array.isArray(s.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...s.SecondaryLocaleList]),Array.isArray(s.RolePlayList)&&(this.privRolePlayList=[...s.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}e.VoiceInfo=i}(_h)),_h}var Pa={},YE;function XL(){if(YE)return Pa;YE=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.SpeakerAudioDestination=void 0;const e=ne(),t=Zi(),r=vi(),n=60*30,i={[r.AudioFormatTag.PCM]:"audio/wav",[r.AudioFormatTag.MuLaw]:"audio/x-wav",[r.AudioFormatTag.MP3]:"audio/mpeg",[r.AudioFormatTag.OGG_OPUS]:"audio/ogg",[r.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[r.AudioFormatTag.ALaw]:"audio/x-wav",[r.AudioFormatTag.FLAC]:"audio/flac",[r.AudioFormatTag.AMR_WB]:"audio/amr-wb",[r.AudioFormatTag.G722]:"audio/G722"};let o=class{constructor(a){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=a||e.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(a,u,c){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(a),this.updateSourceBuffer().then(()=>{u&&u()},l=>{c&&c(l)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(a),this.privBytesReceived+=a.byteLength)}close(a,u){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{a&&a()},c=>{u&&u(c)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===r.AudioFormatTag.PCM||this.privFormat.formatTag===r.AudioFormatTag.MuLaw||this.privFormat.formatTag===r.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let c=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(c).then(()=>{c=this.privFormat.addHeader(c);const l=new Blob([c],{type:i[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(l),this.notifyPlayback().then(()=>{a&&a()},p=>{u&&u(p)})},l=>{u&&u(l)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(a){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=a;const u=i[this.privFormat.formatTag];u===void 0?console.warn(`Unknown mimeType for format ${r.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(u)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=n,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(u),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(c=>{e.Events.instance.onEvent(new e.BackgroundEvent(c))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(c=>{e.Events.instance.onEvent(new e.BackgroundEvent(c))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(c=>{e.Events.instance.onEvent(new e.BackgroundEvent(c))})):(console.warn(`Format ${r.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var a;return((a=this.privAudio)==null?void 0:a.volume)??-1}set volume(a){this.privAudio&&(this.privAudio.volume=a)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(a,u){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{a&&a()},c=>{u&&u(c)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const a=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(a)}catch{this.privAudioBuffer.unshift(a),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return Pa.SpeakerAudioDestination=o,Pa}var Ea={},XE;function ZL(){if(XE)return Ea;XE=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.ConversationTranscriptionCanceledEventArgs=void 0;const e=Tc();let t=class extends e.CancellationEventArgsBase{};return Ea.ConversationTranscriptionCanceledEventArgs=t,Ea}var wa={},ZE;function ex(){if(ZE)return wa;ZE=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.MeetingTranscriptionCanceledEventArgs=void 0;const e=Tc();let t=class extends e.CancellationEventArgsBase{};return wa.MeetingTranscriptionCanceledEventArgs=t,wa}var Th={},ew;function tx(){return ew||(ew=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))}(Th)),Th}var Ih={},tw;function rx(){return tw||(tw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))}(Ih)),Ih}var _a={},rw;function nx(){if(rw)return _a;rw=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.PronunciationAssessmentConfig=void 0;const e=ue(),t=V();let r=class AO{constructor(i,o=t.PronunciationAssessmentGradingSystem.FivePoint,s=t.PronunciationAssessmentGranularity.Phoneme,a=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[o]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[s]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(a))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const o=new AO("");return o.privProperties=new t.PropertyCollection,o.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),o}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const o=i.internalData;o.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,o.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,o.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const o=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,o)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),o=JSON.parse(i),s=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);s&&(o.referenceText=s);const a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);a&&(o.gradingSystem=a);const u=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);u&&(o.granularity=u),this.privPhonemeAlphabet&&(o.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(o.nbestPhonemeCount=this.privNBestPhonemeCount),o.enableProsodyAssessment=this.privEnableProsodyAssessment,o.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(o.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(o))}};return _a.PronunciationAssessmentConfig=r,_a}var Fn={},nw;function ix(){if(nw)return Fn;nw=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.PronunciationAssessmentResult=Fn.ContentAssessmentResult=void 0;const e=ue(),t=V();class r{constructor(o){this.privPronJson=o}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}Fn.ContentAssessmentResult=r;let n=class bO{constructor(o){const s=JSON.parse(o);e.Contracts.throwIfNullOrUndefined(s.NBest[0],"NBest"),this.privPronJson=s.NBest[0]}static fromResult(o){e.Contracts.throwIfNullOrUndefined(o,"result");const s=o.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(s,"json"),new bO(s)}get detailResult(){return this.privPronJson}get accuracyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.AccuracyScore}get pronunciationScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.PronScore}get completenessScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.CompletenessScore}get fluencyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.FluencyScore}get prosodyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return Fn.PronunciationAssessmentResult=n,Fn}var Ta={},iw;function ox(){if(iw)return Ta;iw=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.AvatarConfig=void 0;const e=ue(),t=V();let r=class{constructor(i,o,s){this.privCustomized=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=o,s===void 0&&(s=new t.AvatarVideoFormat),this.videoFormat=s}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}};return Ta.AvatarConfig=r,Ta}var Ah={},ow;function sx(){return ow||(ow=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t}(Ah)),Ah}var Ia={},Aa={},sw;function OO(){if(sw)return Aa;sw=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.SpeechSynthesisConnectionFactory=void 0;const e=at(),t=V(),r=dr(),n=ee(),i=wt(),o=Pn();let s=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(u,c,l){let p=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),f=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=f===void 0?"tts":"voice",y=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+v+".speech"+h),g={},m={};c.token!==void 0&&c.token!==""&&(m[c.headerName]=c.token),m[i.HeaderNames.ConnectionId]=l,f!==void 0&&f!==""&&(!p||p.search(o.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(g[o.QueryParameterNames.CustomVoiceDeploymentId]=f),u.avatarEnabled&&(!p||p.search(o.QueryParameterNames.EnableAvatar)===-1)&&(g[o.QueryParameterNames.EnableAvatar]="true"),p||(p=y+this.synthesisUri),u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const S=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,g,m,new n.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(u.parameters),S,l)}};return Aa.SpeechSynthesisConnectionFactory=s,Aa}var aw;function ax(){if(aw)return Ia;aw=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.AvatarSynthesizer=void 0;const e=OO(),t=ee(),r=ne(),n=_c(),i=V(),o=ue(),s=Ay();let a=class extends i.Synthesizer{constructor(c,l){super(c),o.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(c){o.Contracts.throwIfNullOrUndefined(c,"peerConnection"),this.privIceServers=c.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;c.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+c.iceGatheringState,r.EventType.Debug)),c.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},c.onicecandidate=v=>{v.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+v.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{c.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await c.createOffer();await c.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(c.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),f=new RTCSessionDescription(JSON.parse(h));return await c.setRemoteDescription(f),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(c){const l=await this.speak(c,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(c){const l=await this.speak(c,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(c,l,p){return new t.AvatarSynthesisAdapter(c,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(c,l){}createSynthesizerConfig(c){const l=super.createSynthesizerConfig(c);return l.avatarEnabled=!0,l}async speak(c,l){const p=r.createNoDashGuid(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new s.SynthesisRequest(p,c,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return Ia.AvatarSynthesizer=a,Ia}var Un={},uw;function ux(){if(uw)return Un;uw=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.AvatarVideoFormat=Un.Coordinate=void 0;class e{constructor(n,i){this.x=n,this.y=i}}Un.Coordinate=e;let t=class{constructor(n="H264",i=2e6,o=1920,s=1080){this.codec=n,this.bitrate=i,this.width=o,this.height=s}setCropRange(n,i){this.cropRange={bottomRight:i,topLeft:n}}};return Un.AvatarVideoFormat=t,Un}var ba={},cw;function cx(){if(cw)return ba;cw=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.AvatarWebRTCConnectionResult=void 0;const e=V();let t=class extends e.SynthesisResult{constructor(n,i,o,s,a){super(i,o,s,a),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return ba.AvatarWebRTCConnectionResult=t,ba}var Oa={},lw;function lx(){if(lw)return Oa;lw=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.Diagnostics=void 0;const e=at(),t=ne();let r=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return Oa.Diagnostics=r,r.privListener=void 0,Oa}var pw;function V(){return pw||(pw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=iO();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var r=vi();Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=tO();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=Zi();Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var o=Ez();Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return o.CancellationReason}});var s=wz();Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return s.PullAudioInputStreamCallback}});var a=_z();Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return a.PushAudioOutputStreamCallback}});var u=Tz();Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var c=Iz();Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return c.SessionEventArgs}});var l=Az();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=bz();Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=Oz();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=kz();Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=Mz();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var v=Dz();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return v.IntentRecognitionResult}});var y=Nz();Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var g=jz();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return g.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return g.MeetingTranscriptionEventArgs}});var m=zz();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return m.SpeechRecognitionCanceledEventArgs}});var S=Lz();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=xz();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=sO();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var E=qz();Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return E.TranslationSynthesisResult}});var R=Bz();Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return R.ResultReason}});var T=Fz();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return T.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return T.SpeechConfigImpl}});var B=Uz();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return B.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return B.SpeechTranslationConfigImpl}});var q=uO();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return q.PropertyCollection}});var K=_y();Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return K.PropertyId}});var D=Vz();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return D.Recognizer}});var _=Wz();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return _.SpeechRecognizer}});var w=$z();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return w.IntentRecognizer}});var j=Hz();Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return j.VoiceProfileType}});var O=Kz();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return O.TranslationRecognizer}});var z=Gz();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return z.Translations}});var I=Jz();Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return I.NoMatchReason}});var b=Qz();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return b.NoMatchDetails}});var L=Yz();Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return L.TranslationRecognitionCanceledEventArgs}});var W=Xz();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return W.IntentRecognitionCanceledEventArgs}});var F=vO();Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return F.CancellationDetailsBase}});var ie=Zz();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return ie.CancellationDetails}});var J=eL();Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return J.CancellationErrorCode}});var Se=tL();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return Se.ConnectionEventArgs}});var Q=rL();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return Q.ServiceEventArgs}});var X=dO();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return X.Connection}});var ge=nL();Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return ge.PhraseListGrammar}});var de=Ty();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return de.DialogServiceConfig}});var te=iL();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return te.BotFrameworkConfig}});var qe=oL();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return qe.CustomCommandsConfig}});var Ee=aL();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return Ee.DialogServiceConnector}});var Be=uL();Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Be.ActivityReceivedEventArgs}});var oe=lL();Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return oe.TurnStatusReceivedEventArgs}});var Fe=pL();Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return Fe.ServicePropertyChannel}});var $e=dL();Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return $e.ProfanityOption}});var it=hL();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return it.BaseAudioPlayer}});var he=fL();Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return he.ConnectionMessageEventArgs}});var mt=pO();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return mt.ConnectionMessage}});var He=vL();Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return He.VoiceProfile}});var _e=gL();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return _e.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return _e.VoiceProfileEnrollmentCancellationDetails}});var Ke=mL();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return Ke.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Ke.VoiceProfileCancellationDetails}});var U=yL();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return U.VoiceProfilePhraseResult}});var re=SL();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return re.VoiceProfileClient}});var fe=CL();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return fe.SpeakerRecognizer}});var ce=RL();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ce.SpeakerIdentificationModel}});var ve=PL();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return ve.SpeakerVerificationModel}});var Ge=EL();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Ge.AutoDetectSourceLanguageConfig}});var Ce=wL();Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return Ce.AutoDetectSourceLanguageResult}});var Ie=_L();Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return Ie.SourceLanguageConfig}});var le=TL();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return le.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return le.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return le.SpeakerRecognitionCancellationDetails}});var se=Iy();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return se.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return se.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return se.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return se.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return se.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return se.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return se.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return se.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return se.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return se.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return se.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return se.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return se.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return se.User}});var Ue=Ay();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return Ue.Synthesizer}});var Ae=rO();Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Ae.SpeechSynthesisOutputFormat}});var be=UL();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return be.SpeechSynthesizer}});var Xe=VL();Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return Xe.SynthesisResult}});var yt=WL();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return yt.SpeechSynthesisResult}});var Je=$L();Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Je.SpeechSynthesisEventArgs}});var _t=HL();Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return _t.SpeechSynthesisWordBoundaryEventArgs}});var $t=KL();Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return $t.SpeechSynthesisBookmarkEventArgs}});var Ht=GL();Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Ht.SpeechSynthesisVisemeEventArgs}});var Kt=JL();Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Kt.SpeechSynthesisBoundaryType}});var Gt=QL();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Gt.SynthesisVoicesResult}});var gi=YL();Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return gi.VoiceInfo}});var Re=XL();Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Re.SpeakerAudioDestination}});var Dt=ZL();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Dt.ConversationTranscriptionCanceledEventArgs}});var Ir=ex();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ir.MeetingTranscriptionCanceledEventArgs}});var fr=tx();Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return fr.PronunciationAssessmentGradingSystem}});var Kr=rx();Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Kr.PronunciationAssessmentGranularity}});var _n=nx();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return _n.PronunciationAssessmentConfig}});var mi=ix();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return mi.PronunciationAssessmentResult}});var io=CO();Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return io.LanguageIdMode}});var Tn=ox();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return Tn.AvatarConfig}});var Qe=sx();Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return Qe.AvatarEventArgs}});var Gr=ax();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return Gr.AvatarSynthesizer}});var In=ux();Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return In.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return In.Coordinate}});var oo=cx();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return oo.AvatarWebRTCConnectionResult}});var so=lx();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return so.Diagnostics}});var ao=Xb();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return ao.LogLevel}})}(uh)),uh}var dw;function px(){if(dw)return ns;dw=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.ProxyInfo=void 0;const e=V();let t=class kO{constructor(n,i,o,s){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=o,this.privProxyPassword=s}static fromParameters(n){return new kO(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return ns.ProxyInfo=t,ns}var bh={},Oh,hw;function dx(){if(hw)return Oh;hw=1;const e=new Set(["json","buffer","string"]);return Oh=t=>(...r)=>{const n=new Set;let i,o,s,a="";return r.forEach(u=>{if(typeof u=="string")if(u.toUpperCase()===u)if(i){const c=`Can't set method to ${u}, already set to ${i}.`;throw new Error(c)}else i=u;else if(u.startsWith("http:")||u.startsWith("https:"))a=u;else if(e.has(u))o=u;else throw new Error(`Unknown encoding, ${u}`);else if(typeof u=="number")n.add(u);else if(typeof u=="object")if(Array.isArray(u)||u instanceof Set)u.forEach(c=>n.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=u}else throw new Error(`Unknown type: ${typeof u}`)}),i||(i="GET"),n.size===0&&n.add(200),t(n,i,o,s,a)},Oh}var kh,fw;function hx(){if(fw)return kh;fw=1;const e=dx();class t extends Error{constructor(i,...o){super(...o),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="StatusError",this.message=i.statusMessage,this.statusCode=i.status,this.res=i,this.json=i.json.bind(i),this.text=i.text.bind(i),this.arrayBuffer=i.arrayBuffer.bind(i);let s;Object.defineProperty(this,"responseBody",{get:()=>(s||(s=this.arrayBuffer()),s)}),this.headers={};for(const[u,c]of i.headers.entries())this.headers[u.toLowerCase()]=c}}return kh=e((n,i,o,s,a)=>async(u,c,l={})=>{u=a+(u||"");let p=new URL(u);if(s||(s={}),p.username&&(s.Authorization="Basic "+btoa(p.username+":"+p.password),p=new URL(p.protocol+"//"+p.host+p.pathname+p.search)),p.protocol!=="https:"&&p.protocol!=="http:")throw new Error(`Unknown protocol, ${p.protocol}`);if(c&&!(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="string"))if(typeof c=="object")c=JSON.stringify(c),s["Content-Type"]="application/json";else throw new Error("Unknown body type.");l=new Headers({...s||{},...l});const d=await fetch(p,{method:i,headers:l,body:c});if(d.statusCode=d.status,!n.has(d.status))throw new t(d);return o==="json"?d.json():o==="buffer"?d.arrayBuffer():o==="string"?d.text():d}),kh}var vw;function fx(){return vw||(vw=1,function(e){var t=ae&&ae.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const r=t(hx()),n=ne();var i;(function(s){s.Get="GET",s.Post="POST",s.Delete="DELETE",s.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class o{constructor(a){if(!a)throw new n.ArgumentNullError("configParams");this.privHeaders=a.headers,this.privIgnoreCache=a.ignoreCache}static extractHeaderValue(a,u){let c="";try{const l=u.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),f=h.shift().toLowerCase(),v=h.join(": ");p[f]=v}),c=p[a.toLowerCase()]}catch{}return c}set options(a){this.privHeaders=a.headers,this.privIgnoreCache=a.ignoreCache}setHeaders(a,u){this.privHeaders[a]=u}request(a,u,c={},l=null){const p=new n.Deferred,d=a===i.File?"POST":a,h=(v,y={})=>{const g=v;return{data:JSON.stringify(y),headers:JSON.stringify(v.headers),json:y,ok:v.statusCode>=200&&v.statusCode<300,status:v.statusCode,statusText:y.error?y.error.message:g.statusText?g.statusText:g.statusMessage}},f=v=>{const y=r.default(u,d,this.privHeaders,200,201,202,204,400,401,402,403,404),g=this.queryParams(c)===""?"":`?${this.queryParams(c)}`;y(g,v).then(async m=>{if(a===i.Delete||m.statusCode===204)p.resolve(h(m));else try{const S=await m.json();p.resolve(h(m,S))}catch{p.resolve(h(m))}}).catch(m=>{p.reject(m)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),a===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),f(l),p.promise}queryParams(a={}){return Object.keys(a).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(a[u])).join("&")}}e.RestMessageAdapter=o}(bh)),bh}var ka={},gw;function MO(){if(gw)return ka;gw=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.RestConfigBase=void 0;let e=class _l{static get requestOptions(){return _l.privDefaultRequestOptions}static get configParams(){return _l.privDefaultParams}static get restErrors(){return _l.privRestErrors}};return ka.RestConfigBase=e,e.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},e.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},e.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},ka}var mw;function at(){return mw||(mw=1,function(e){var t=ae&&ae.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=ae&&ae.__exportStar||function(n,i){for(var o in n)o!=="default"&&!i.hasOwnProperty(o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(gz(),e),r(mz(),e),r(yz(),e),r(Sz(),e),r(Cz(),e),r(Rz(),e),r(Zb(),e),r(Pz(),e),r(px(),e),r(fx(),e),r(MO(),e)}(nh)),nh}var yw;function vx(){if(yw)return Jo;yw=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.IntentConnectionFactory=void 0;const e=at(),t=V(),r=dr(),n=ee(),i=wt();let o=class extends r.ConnectionFactoryBase{create(a,u,c){let l=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const f=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),v=r.ConnectionFactoryBase.getHostSuffix(f);l=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".sr.speech"+v)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(a,p,l);const d={};u.token!==void 0&&u.token!==""&&(d[u.headerName]=u.token),d[i.HeaderNames.ConnectionId]=c,a.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const h=a.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(a),h,c)}getSpeechRegionFromIntentRegion(a){switch(a){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return a}}};return Jo.IntentConnectionFactory=o,Jo}var Vn={},Sw;function gx(){if(Sw)return Vn;Sw=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.VoiceProfileConnectionFactory=Vn.SpeakerRecognitionConnectionFactory=void 0;const e=at(),t=V(),r=dr(),n=ee(),i=wt();class o extends r.ConnectionFactoryBase{create(c,l,p,d){let h=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),m=r.ConnectionFactoryBase.getHostSuffix(g),S=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${g}.spr-frontend.speech${m}`),C=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${S}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const f={format:"simple",language:c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(c,f,h);const v={};l.token!==void 0&&l.token!==""&&(v[l.headerName]=l.token),v[i.HeaderNames.ConnectionId]=d,v[i.HeaderNames.SpIDAuthKey]=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const y=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,f,v,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),y,d)}scenarioToPath(c){switch(c){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let s=class extends o{create(c,l,p){return super.create(c,l,"recognition",p)}};Vn.SpeakerRecognitionConnectionFactory=s;class a extends o{create(c,l,p){return super.create(c,l,"profile",p)}}return Vn.VoiceProfileConnectionFactory=a,Vn}var Mh={},Cw;function by(){return Cw||(Cw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=ne();class r extends t.PlatformEvent{constructor(l,p,d,h=t.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=n;class i extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class o extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=o;class s extends r{constructor(l,p,d,h,f){super("RecognitionStartedEvent",l,f),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=s;var a;(function(c){c[c.Success=0]="Success",c[c.AudioSourceError=1]="AudioSourceError",c[c.AudioSourceTimeout=2]="AudioSourceTimeout",c[c.AuthTokenFetchError=3]="AuthTokenFetchError",c[c.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",c[c.UnAuthorized=5]="UnAuthorized",c[c.ConnectTimeout=6]="ConnectTimeout",c[c.ConnectError=7]="ConnectError",c[c.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",c[c.UnknownError=9]="UnknownError"})(a=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class u extends r{constructor(l,p,d,h,f,v,y,g){super("RecognitionEndedEvent",l,f,y===a.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=y,this.privError=g,this.privServiceTag=v}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=u}(Mh)),Mh}var Ma={},Da={},Rw;function eo(){if(Rw)return Da;Rw=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.SpeechConnectionMessage=void 0;const e=ne(),t=wt();class r extends e.ConnectionMessage{constructor(i,o,s,a,u,c,l,p){if(!o)throw new e.ArgumentNullError("path");if(!s)throw new e.ArgumentNullError("requestId");const d={};if(d[t.HeaderNames.Path]=o,d[t.HeaderNames.RequestId]=s,d[t.HeaderNames.RequestTimestamp]=new Date().toISOString(),a&&(d[t.HeaderNames.ContentType]=a),c&&(d[t.HeaderNames.RequestStreamId]=c),l)for(const h in l)h&&(d[h]=l[h]);p?super(i,u,d,p):super(i,u,d),this.privPath=o,this.privRequestId=s,this.privContentType=a,this.privStreamId=c,this.privAdditionalHeaders=l}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(i){let o=null,s=null,a=null,u=null;const c={};if(i.headers)for(const l in i.headers)l&&(l.toLowerCase()===t.HeaderNames.Path.toLowerCase()?o=i.headers[l]:l.toLowerCase()===t.HeaderNames.RequestId.toLowerCase()?s=i.headers[l]:l.toLowerCase()===t.HeaderNames.ContentType.toLowerCase()?a=i.headers[l]:l.toLowerCase()===t.HeaderNames.RequestStreamId.toLowerCase()?u=i.headers[l]:c[l]=i.headers[l]);return new r(i.messageType,o,s,a,i.body,u,c,i.id)}}return Da.SpeechConnectionMessage=r,Da}var Pw;function mx(){if(Pw)return Ma;Pw=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.ServiceRecognizerBase=void 0;const e=at(),t=ne(),r=V(),n=ee(),i=eo();let o=class Bu{constructor(a,u,c,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!a)throw new t.ArgumentNullError("authentication");if(!u)throw new t.ArgumentNullError("connectionFactory");if(!c)throw new t.ArgumentNullError("audioSource");if(!l)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=a,this.privConnectionFactory=u,this.privAudioSource=c,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const f=h;(f.statusCode===1003||f.statusCode===1007||f.statusCode===1002||f.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,f.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=t.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const a=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(a!==void 0){const u=a.split(","),c=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=c!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:u}),c!==void 0){const p={};for(const d of u)p[d]=c;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const a=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(a!==void 0){const u=this.recognitionMode===n.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===n.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",c=parseInt(a,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=u,l[u]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:c}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const a=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const c=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:c,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(a.customModels=p,a.onInterim={action:"None"},a.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(a.onInterim={action:"Translate"},a.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",a)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(a){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,a)}set voiceProfileType(a){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,a)}set authentication(a){this.privAuthentication=a}isDisposed(){return this.privIsDisposed}async dispose(a){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(a)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(a,u,c){if(this.recognizeOverride!==void 0){await this.recognizeOverride(a,u,c);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=a,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=u,this.privErrorCallback=c,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const f=await this.audioSource.attach(this.privRequestSession.audioNodeId),v=await this.audioSource.format,y=await this.audioSource.deviceInfo;this.privIsLiveAudio=y.type&&y.type===n.type.Microphones,p=new e.ReplayableAudioNode(f,v.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y}}catch(f){throw await this.privRequestSession.onStopRecognizing(),f}try{await l}catch(f){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,f);return}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async f=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,f)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(a,u){this.connectImpl().then(()=>{try{a&&a()}catch(c){u&&u(c)}},c=>{try{u&&u(c)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(a){}async sendNetworkMessage(a,u){const c=typeof u=="string"?t.MessageType.Text:t.MessageType.Binary,l=typeof u=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(c,a,this.privRequestSession.requestId,l,u))}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(a){this.privExpectContentAssessmentResponse=a}async sendTelemetryData(){const a=this.privRequestSession.getTelemetry();if(Bu.telemetryDataEnabled!==!0||this.privIsDisposed||a===null)return;if(Bu.telemetryData)try{Bu.telemetryData(a)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",a))}async cancelRecognitionLocal(a,u,c){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a,u,c))}async receiveMessage(){try{if(this.privIsDisposed)return;let a=await this.fetchConnection();const u=await a.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!u)return this.receiveMessage();this.privServiceHasSentMessage=!0;const c=i.SpeechConnectionMessage.fromConnectionMessage(u);if(c.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=n.SpeechDetected.fromJSON(c.textBody),p=new r.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;c.textBody.length>0?d=c.textBody:d="{ Offset: 0 }";const h=n.SpeechDetected.fromJSON(d),f=new r.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const v=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,v);return}else a=await this.fetchConnection(),await this.sendPrePayloadJSON(a);break;default:await this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const u=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(u)}sendSpeechContext(a,u){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const c=this.speechContext.toJSON();if(u&&this.privRequestSession.onSpeechContext(),c)return a.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",c))}noOp(){}async sendPrePayloadJSON(a,u=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(a);await this.sendSpeechContext(a,u),await this.sendWaveHeader(a)}async sendWaveHeader(a){const u=await this.audioSource.format;return a.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",u.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(a,u,c){if(u.onSpeechContext(),Bu.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(c).context.system}};c=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(c);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",c=JSON.stringify(l)}if(c)return a.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",u.requestId,"application/json",c))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(a){const u=await this.audioSource.format;this.privAverageBytesPerMs=u.avgBytesPerSec/1e3;let c=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=u.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const f=await this.fetchConnection(),v=await a.read();if(this.privRequestSession.isSpeechEnded)return;let y,g;if(!v||v.isEnd?(y=null,g=0):(y=v.buffer,this.privRequestSession.onAudioSent(y.byteLength),p>=this.privRequestSession.bytesSent?g=0:g=Math.max(0,c-Date.now())),g!==0&&await this.delay(g),y!==null&&(c=Date.now()+y.byteLength*1e3/(u.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(f.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),v!=null&&v.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let a=!1;this.privAuthFetchEventId=t.createNoDashGuid();const u=this.privRequestSession.sessionId;this.privConnectionId=u!==void 0?u:t.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let c=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(v=>{this.connectionEvents.onEvent(v)});const f=await h.open();if(f.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(f.statusCode),Promise.resolve(h);f.statusCode===1006&&(a=!0),c=f.statusCode,l=f.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(c,l),Promise.reject(`Unable to contact server. StatusCode: ${c}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(a){return new Promise(u=>this.privSetTimeout(u,a))}writeBufferToConsole(a){let u="Buffer Size: ";if(a===null)u+="null";else{const c=new Uint8Array(a);u+=`${a.byteLength}\r
`;for(let l=0;l<a.byteLength;l++)u+=c[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(u),u="")}console.info(u)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(await this.sendSpeechServiceConfig(a,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(a,!1),a)}};return Ma.ServiceRecognizerBase=o,o.telemetryDataEnabled=!0,Ma}var Na={},Ew;function yx(){if(Ew)return Na;Ew=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.ConversationServiceRecognizer=void 0;const e=V(),t=ee();let r=class extends t.ServiceRecognizerBase{constructor(i,o,s,a,u){super(i,o,s,a,u),this.handleSpeechPhraseMessage=async c=>this.handleSpeechPhrase(c),this.handleSpeechHypothesisMessage=c=>this.handleSpeechHypothesis(c)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,o,s){}handleRecognizingCallback(i,o,s){}async processSpeechMessages(i){let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),o=!0;break}return o}cancelRecognition(i,o,s,a,u){}async handleSpeechPhrase(i){const o=t.SimpleSpeechPhrase.fromJSON(i),s=t.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let a;const u=new e.PropertyCollection;u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const c=o.Offset+this.privRequestSession.currentTurnAudioOffset;let l=c;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),e.ResultReason.Canceled===s){const p=t.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),d=t.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(p,d,t.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&s===e.ResultReason.NoMatch&&o.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])a=new e.SpeechRecognitionResult(this.privRequestSession.requestId,s,o.DisplayText,o.Duration,c,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,i,u);else{const p=t.DetailedSpeechPhrase.fromJSON(i),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);a=new e.SpeechRecognitionResult(this.privRequestSession.requestId,s,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,u),l=a.offset}this.handleRecognizedCallback(a,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const o=t.SpeechHypothesis.fromJSON(i),s=o.Offset+this.privRequestSession.currentTurnAudioOffset,a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const u=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,i,a);this.privRequestSession.onHypothesis(s),this.handleRecognizingCallback(u,o.Duration,this.privRequestSession.sessionId)}};return Na.ConversationServiceRecognizer=r,Na}var Dh={},ww;function Sx(){return ww||(ww=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=e.RecognitionMode=void 0;const t=V(),r=ee();var n;(function(o){o[o.Interactive=0]="Interactive",o[o.Conversation=1]="Conversation",o[o.Dictation=2]="Dictation"})(n=e.RecognitionMode||(e.RecognitionMode={})),function(o){o[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"}(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(s,a){this.privSpeechServiceConfig=s||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=a,this.privMaxRetryCount=parseInt(a.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=a.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(s){this.privRecognitionMode=s,this.privRecognitionActivityTimeout=s===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[s]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const s=[];let a=!1;if(this.autoDetectSourceLanguages!==void 0)for(const u of this.autoDetectSourceLanguages.split(",")){const c=u+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(c,void 0);l!==void 0?(s.push({language:u,endpoint:l}),a=!0):s.push({language:u,endpoint:""})}return a?s:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(s){this.privEnableSpeakerId=s}}e.RecognizerConfig=i}(Dh)),Dh}var Nh={},_w;function Cx(){return _w||(_w=1,Object.defineProperty(Nh,"__esModule",{value:!0})),Nh}var ja={},Tw;function Rx(){if(Tw)return ja;Tw=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.WebsocketMessageFormatter=void 0;const e=ne(),t=`\r
`;let r=class{toConnectionMessage(i){const o=new e.Deferred;try{if(i.messageType===e.MessageType.Text){const s=i.textContent;let a={},u=null;if(s){const c=s.split(`\r
\r
`);c&&c.length>0&&(a=this.parseHeaders(c[0]),c.length>1&&(u=c[1]))}o.resolve(new e.ConnectionMessage(i.messageType,u,a,i.id))}else if(i.messageType===e.MessageType.Binary){const s=i.binaryContent;let a={},u=null;if(!s||s.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const c=new DataView(s),l=c.getInt16(0);if(s.byteLength<l+2)throw new Error("Invalid binary message format. Header content missing.");let p="";for(let d=0;d<l;d++)p+=String.fromCharCode(c.getInt8(d+2));a=this.parseHeaders(p),s.byteLength>l+2&&(u=s.slice(2+l)),o.resolve(new e.ConnectionMessage(i.messageType,u,a,i.id))}}catch(s){o.reject(`Error formatting the message. Error: ${s}`)}return o.promise}fromConnectionMessage(i){const o=new e.Deferred;try{if(i.messageType===e.MessageType.Text){const s=`${this.makeHeaders(i)}${t}${i.textBody?i.textBody:""}`;o.resolve(new e.RawWebsocketMessage(e.MessageType.Text,s,i.id))}else if(i.messageType===e.MessageType.Binary){const s=this.makeHeaders(i),a=i.binaryBody,u=this.stringToArrayBuffer(s),c=new Int8Array(u),l=c.byteLength,p=new Int8Array(2+l+(a?a.byteLength:0));if(p[0]=l>>8&255,p[1]=l&255,p.set(c,2),a){const h=new Int8Array(a);p.set(h,2+l)}const d=p.buffer;o.resolve(new e.RawWebsocketMessage(e.MessageType.Binary,d,i.id))}}catch(s){o.reject(`Error formatting the message. ${s}`)}return o.promise}makeHeaders(i){let o="";if(i.headers)for(const s in i.headers)s&&(o+=`${s}: ${i.headers[s]}${t}`);return o}parseHeaders(i){const o={};if(i){const s=i.match(/[^\r\n]+/g);if(o){for(const a of s)if(a){const u=a.indexOf(":"),c=u>0?a.substr(0,u).trim().toLowerCase():a,l=u>0&&a.length>u+1?a.substr(u+1).trim():"";o[c]=l}}}return o}stringToArrayBuffer(i){const o=new ArrayBuffer(i.length),s=new DataView(o);for(let a=0;a<i.length;a++)s.setUint8(a,i.charCodeAt(a));return o}};return ja.WebsocketMessageFormatter=r,ja}var za={},Iw;function Px(){if(Iw)return za;Iw=1,Object.defineProperty(za,"__esModule",{value:!0}),za.SpeechConnectionFactory=void 0;const e=at(),t=ee(),r=V(),n=dr(),i=ee(),o=wt(),s=Pn();let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(c,l,p){let d=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(h),v=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),y={},g=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(g?(!d||d.search(s.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[s.QueryParameterNames.CustomSpeechDeploymentId]=g):m&&(!d||d.search(s.QueryParameterNames.Language)===-1)&&(y[s.QueryParameterNames.Language]=m),(!d||d.search(s.QueryParameterNames.Format)===-1)&&(y[s.QueryParameterNames.Format]=c.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),c.autoDetectSourceLanguages!==void 0&&(y[s.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(c,y,d),!d)switch(c.recognitionMode){case i.RecognitionMode.Conversation:c.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?d=v+this.dictationRelativeUri:c.recognitionEndpointVersion!==void 0&&parseInt(c.recognitionEndpointVersion,10)>1?d=`${v}${this.universalUri}${c.recognitionEndpointVersion}`:d=v+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=v+this.dictationRelativeUri;break;default:c.recognitionEndpointVersion!==void 0&&parseInt(c.recognitionEndpointVersion,10)>1?d=`${v}${this.universalUri}${c.recognitionEndpointVersion}`:d=v+this.interactiveRelativeUri;break}const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[o.HeaderNames.ConnectionId]=p;const C=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new e.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),C,p),E=P.uri;return c.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,E),P}};return za.SpeechConnectionFactory=a,za}var La={},Aw;function Ex(){if(Aw)return La;Aw=1,Object.defineProperty(La,"__esModule",{value:!0}),La.ConversationTranscriberConnectionFactory=void 0;const e=at(),t=V(),r=ee(),n=dr(),i=ee(),o=wt(),s=Pn();let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(c,l,p){let d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(h),v=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),y={},g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);g?(!d||d.search(s.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[s.QueryParameterNames.CustomSpeechDeploymentId]=g):m&&(!d||d.search(s.QueryParameterNames.Language)===-1)&&(y[s.QueryParameterNames.Language]=m),c.autoDetectSourceLanguages!==void 0&&(y[s.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(c,y,d),d||(d=`${v}${this.universalUri}`);const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[o.HeaderNames.ConnectionId]=p;const C=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new e.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),C,p),E=P.uri;return c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,E),P}setV2UrlParams(c,l,p){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,s.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,s.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,s.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,s.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,s.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,s.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,s.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,v)=>{this.setUrlParameter(v,f,c,l,p)});const h=JSON.parse(c.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(f=>{l[f]=h[f]})}};return La.ConversationTranscriberConnectionFactory=a,La}var xa={},bw;function wx(){if(bw)return xa;bw=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.TranscriberConnectionFactory=void 0;const e=at(),t=V(),r=dr(),n=ee(),i=wt(),o=Pn();let s=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(u,c,l){let p=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),f="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,f),y={};this.setQueryParams(y,u,p),p||(p=v);const g={};c.token!==void 0&&c.token!==""&&(g[c.headerName]=c.token),g[i.HeaderNames.ConnectionId]=l,u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const m=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,y,g,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),m,l)}setQueryParams(u,c,l){const p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(o.QueryParameterNames.CustomSpeechDeploymentId in u)&&(u[o.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(o.QueryParameterNames.Language in u)&&(u[o.QueryParameterNames.Language]=d);const h=c.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",f=c.parameters.getProperty(n.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(h||f)&&(u[o.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(c,u,l)}};return xa.TranscriberConnectionFactory=s,xa}var qa={},Ow;function _x(){if(Ow)return qa;Ow=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.TranslationConnectionFactory=void 0;const e=at(),t=EO(),r=V(),n=dr(),i=ee(),o=wt(),s=Pn();let a=class extends n.ConnectionFactoryBase{create(c,l,p){const d=this.getEndpointUrl(c),h={};c.autoDetectSourceLanguages!==void 0&&(h[s.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,c,d);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[o.HeaderNames.ConnectionId]=p,c.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const v=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(d,h,f,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),v,p)}getEndpointUrl(c,l){const p=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=n.ConnectionFactoryBase.getHostSuffix(p);let h=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(c.autoDetectSourceLanguages!==void 0?h=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=c.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:t.StringUtils.formatString(h,{region:p})}setQueryParams(c,l,p){c.from=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),c.to=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),c.scenario=l.recognitionMode===i.RecognitionMode.Interactive?"interactive":l.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,c,p),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,s.QueryParameterNames.StableTranslation,l,c,p);const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(c.voice=d,c.features="texttospeech")}};return qa.TranslationConnectionFactory=a,qa}var Ba={},kw;function Tx(){if(kw)return Ba;kw=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.EnumTranslation=void 0;const e=V(),t=ee();let r=class{static implTranslateRecognitionResult(i,o=!1){let s=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:s=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:s=o?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:s=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:s=e.ResultReason.Canceled;break}return s}static implTranslateCancelResult(i){let o=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:o=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:o=e.CancellationReason.Error;break}return o}static implTranslateCancelErrorCode(i){let o=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:o=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:o=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:o=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:o=e.CancellationErrorCode.Forbidden;break;default:o=e.CancellationErrorCode.NoError;break}return o}static implTranslateErrorDetails(i){let o="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:o="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:o="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:o="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return o}};return Ba.EnumTranslation=r,Ba}var jh={},Mw;function Ix(){return Mw||(Mw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))}(jh)),jh}var Fa={},Dw;function Ax(){if(Dw)return Fa;Dw=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.TranslationSynthesisEnd=void 0;const e=ee();let t=class DO{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new DO(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Fa.TranslationSynthesisEnd=t,Fa}var Ua={},Nw;function bx(){if(Nw)return Ua;Nw=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.TranslationHypothesis=void 0;const e=ue(),t=Ey();let r=class Cm{constructor(i){this.privTranslationHypothesis=i,this.privTranslationHypothesis.Translation.TranslationStatus=t.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(i){return new Cm(JSON.parse(i))}static fromTranslationResponse(i){e.Contracts.throwIfNullOrUndefined(i,"translationHypothesis");const o=i.SpeechHypothesis;return i.SpeechHypothesis=void 0,o.Translation=i,new Cm(o)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var i;return(i=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:i.Language}};return Ua.TranslationHypothesis=r,Ua}var Va={},jw;function Ox(){if(jw)return Va;jw=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.TranslationPhrase=void 0;const e=ue(),t=ee(),r=Ey();let n=class Rm{constructor(o){this.privTranslationPhrase=o,this.privTranslationPhrase.RecognitionStatus=t.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(o){return new Rm(JSON.parse(o))}static fromTranslationResponse(o){e.Contracts.throwIfNullOrUndefined(o,"translationResponse");const s=o.SpeechPhrase;return o.SpeechPhrase=void 0,s.Translation=o,s.Text=s.DisplayText,new Rm(s)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Language}get Confidence(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Va.TranslationPhrase=n,Va}var Wa={},zw;function kx(){if(zw)return Wa;zw=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.TranslationServiceRecognizer=void 0;const e=ne(),t=V(),r=ee();let n=class extends r.ConversationServiceRecognizer{constructor(o,s,a,u,c){super(o,s,a,u,c),this.privTranslationRecognizer=c,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(o){const s=new t.PropertyCollection;let a=await this.processSpeechMessages(o);if(a)return!0;const u=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,s);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,o.textBody,s);if(p===t.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),f=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,f,r.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&p===t.ResultReason.NoMatch&&l.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const h=new t.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}a=!0}},c=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}a=!0};switch(o.messageType===e.MessageType.Text&&s.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":c(r.TranslationHypothesis.fromJSON(o.textBody),s);break;case"translation.response":const l=JSON.parse(o.textBody);if(l.SpeechPhrase)await u(r.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(o.textBody);d.SpeechHypothesis&&c(r.TranslationHypothesis.fromTranslationResponse(d),s)}break;case"translation.phrase":await u(r.TranslationPhrase.fromJSON(o.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),a=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(o.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),h=new t.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,p.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}a=!0;break}return a}cancelRecognition(o,s,a,u,c){const l=new t.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(o,a,c,u,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.TranslationRecognitionResult(void 0,s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,c,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,s,a){try{const u=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),s,a);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u)}catch{}}handleRecognizedCallback(o,s,a){try{const u=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),s,a);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}fireEventForResult(o,s){let a;if(o.Translation.Translations!==void 0){a=new t.Translations;for(const f of o.Translation.Translations)a.set(f.Language,f.Text||f.DisplayText)}let u,c;o instanceof r.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===e.TranslationStatus.Success?u=t.ResultReason.TranslatedSpeech:u=t.ResultReason.RecognizedSpeech,c=o.Confidence):u=t.ResultReason.TranslatingSpeech;const l=o.Language,p=o.Offset+this.privRequestSession.currentTurnAudioOffset,d=new t.TranslationRecognitionResult(a,this.privRequestSession.requestId,u,o.Text,o.Duration,p,l,c,o.Translation.FailureReason,JSON.stringify(o),s);return new t.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(o,s){const a=o===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,u=new t.TranslationSynthesisResult(a,o),c=new t.TranslationSynthesisEventArgs(u,s);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,c)}catch{}}};return Wa.TranslationServiceRecognizer=n,Wa}var $a={},Lw;function Mx(){if(Lw)return $a;Lw=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.SpeechDetected=void 0;let e=class NO{constructor(r){this.privSpeechStartDetected=JSON.parse(r)}static fromJSON(r){return new NO(r)}get Offset(){return this.privSpeechStartDetected.Offset}};return $a.SpeechDetected=e,$a}var Ha={},xw;function Dx(){if(xw)return Ha;xw=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.SpeechHypothesis=void 0;let e=class jO{constructor(r){this.privSpeechHypothesis=JSON.parse(r)}static fromJSON(r){return new jO(r)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return Ha.SpeechHypothesis=e,Ha}var Ka={},qw;function Nx(){if(qw)return Ka;qw=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.SpeechKeyword=void 0;let e=class zO{constructor(r){this.privSpeechKeyword=JSON.parse(r)}static fromJSON(r){return new zO(r)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}};return Ka.SpeechKeyword=e,Ka}var Ga={},Bw;function jx(){if(Bw)return Ga;Bw=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.SpeechServiceRecognizer=void 0;const e=V(),t=ee();let r=class extends t.ServiceRecognizerBase{constructor(i,o,s,a,u){super(i,o,s,a,u),this.privSpeechRecognizer=u}async processTypeSpecificMessages(i){let o;const s=new e.PropertyCollection;s.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let a=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=t.SpeechHypothesis.fromJSON(i.textBody),c=u.Offset+this.privRequestSession.currentTurnAudioOffset;o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,u.Text,u.Duration,c,u.Language,u.LanguageDetectionConfidence,void 0,void 0,i.textBody,s),this.privRequestSession.onHypothesis(c);const l=new e.SpeechRecognitionEventArgs(o,u.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}a=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(i.textBody),d=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),e.ResultReason.Canceled===d){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,i.textBody,s);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody),v=f.Offset+this.privRequestSession.currentTurnAudioOffset,y=f.getJsonWithCorrectedOffsets(v);o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,v,f.Language,f.LanguageDetectionConfidence,void 0,void 0,y,s)}const h=new e.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}a=!0;break}return a}cancelRecognition(i,o,s,a,u){const c=new e.PropertyCollection;if(c.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[a]),this.privSpeechRecognizer.canceled){const l=new e.SpeechRecognitionCanceledEventArgs(s,u,a,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,c);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Ga.SpeechServiceRecognizer=r,Ga}var Ja={},Fw;function zx(){if(Fw)return Ja;Fw=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.ConversationTranscriptionServiceRecognizer=void 0;const e=V(),t=ee();let r=class extends t.ServiceRecognizerBase{constructor(i,o,s,a,u){super(i,o,s,a,u),this.privConversationTranscriber=u,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const o={};o.mode="Anonymous",o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,i.speakerDiarization=o,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let o;const s=new e.PropertyCollection;s.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let a=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=t.SpeechHypothesis.fromJSON(i.textBody),c=u.Offset+this.privRequestSession.currentTurnAudioOffset;o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,u.Text,u.Duration,c,u.Language,u.LanguageDetectionConfidence,void 0,void 0,i.textBody,s),this.privRequestSession.onHypothesis(c);const l=new e.ConversationTranscriptionEventArgs(o,u.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}a=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(i.textBody),d=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),e.ResultReason.Canceled===d){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,i.textBody,s);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody),v=f.Offset+this.privRequestSession.currentTurnAudioOffset,y=f.getJsonWithCorrectedOffsets(v);o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,v,f.Language,f.LanguageDetectionConfidence,p.SpeakerId,void 0,y,s)}const h=new e.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}a=!0;break}return a}cancelRecognition(i,o,s,a,u){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[a]),this.privConversationTranscriber.canceled){const l=new e.ConversationTranscriptionCanceledEventArgs(s,u,a,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return Ja.ConversationTranscriptionServiceRecognizer=r,Ja}var Qa={},Uw;function Lx(){if(Uw)return Qa;Uw=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.TranscriptionServiceRecognizer=void 0;const e=ne(),t=V(),r=ee(),n=eo();let i=class extends r.ConversationServiceRecognizer{constructor(s,a,u,c,l){super(s,a,u,c,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(s,a){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createSpeechEventPayload(s,a))}}async sendMeetingSpeechEventAsync(s,a){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createMeetingSpeechEventPayload(s,a))}}processTypeSpecificMessages(s){return this.processSpeechMessages(s)}handleRecognizedCallback(s,a,u){try{const c=new t.SpeechRecognitionEventArgs(s,a,u);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,c),this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(s,a,u){try{const c=new t.SpeechRecognitionEventArgs(s,a,u);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,c)}catch{}}cancelRecognition(s,a,u,c,l){const p=new t.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new t.MeetingTranscriptionCanceledEventArgs(u,l,c,void 0,s);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new t.ConversationTranscriptionCanceledEventArgs(u,l,c,void 0,s);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.SpeechRecognitionResult(a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(s){if(await this.sendSpeechContext(s,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const a=this.privTranscriberRecognizer.getMeetingInfo(),u=this.createMeetingSpeechEventPayload(a,"start");await this.sendSpeechEvent(s,u)}else{const a=this.privTranscriberRecognizer.getConversationInfo(),u=this.createSpeechEventPayload(a,"start");await this.sendSpeechEvent(s,u)}await this.sendWaveHeader(s)}sendSpeechEvent(s,a){const u=JSON.stringify(a);if(u)return s.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",u))}createSpeechEventPayload(s,a){const u={id:"meeting",name:a,meeting:s.conversationProperties};return u.meeting.id=s.id,u.meeting.attendees=s.participants,u}createMeetingSpeechEventPayload(s,a){const u={id:"meeting",name:a,meeting:s.meetingProperties};return u.meeting.id=s.id,u.meeting.attendees=s.participants,u}};return Qa.TranscriptionServiceRecognizer=i,Qa}var Ya={},Vw;function xx(){if(Vw)return Ya;Vw=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.DetailedSpeechPhrase=void 0;const e=ee();let t=class LO{constructor(n){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=e.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new LO(n)}getJsonWithCorrectedOffsets(n){if(this.privDetailedSpeechPhrase.NBest){let i;for(const o of this.privDetailedSpeechPhrase.NBest)if(o.Words&&o.Words[0]){i=o.Words[0].Offset;break}if(i&&i<n){const o=n-i;for(const s of this.privDetailedSpeechPhrase.NBest){if(s.Words)for(const a of s.Words)a.Offset+=o;if(s.DisplayWords)for(const a of s.DisplayWords)a.Offset+=o}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return Ya.DetailedSpeechPhrase=t,Ya}var Xa={},Ww;function qx(){if(Ww)return Xa;Ww=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.SimpleSpeechPhrase=void 0;const e=ee();let t=class xO{constructor(n){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=e.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new xO(n)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Xa.SimpleSpeechPhrase=t,Xa}var Za={},$w;function Bx(){if($w)return Za;$w=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.AddedLmIntent=void 0;let e=class{constructor(r,n){this.modelImpl=r,this.intentName=n}};return Za.AddedLmIntent=e,Za}var eu={},Hw;function Fx(){if(Hw)return eu;Hw=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.IntentServiceRecognizer=void 0;const e=ne(),t=V(),r=ee();let n=class extends r.ServiceRecognizerBase{constructor(o,s,a,u,c){super(o,s,a,u,c),this.privIntentRecognizer=c,this.privIntentDataSent=!1}setIntents(o,s){this.privAddedLmIntents=o,this.privUmbrellaIntent=s,this.privIntentDataSent=!0}processTypeSpecificMessages(o){let s,a,u=!1;const c=new t.PropertyCollection;switch(o.messageType===e.MessageType.Text&&c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(o.textBody);if(s=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,o.textBody,c),this.privRequestSession.onHypothesis(s.offset),a=new t.IntentRecognitionEventArgs(s,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,a)}catch{}u=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(o.textBody);s=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,o.textBody,c),a=new t.IntentRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===a.result.reason?(this.privRequestSession.onPhraseRecognized(a.offset+a.result.duration),h()):this.privPendingIntentArgs=a,u=!0;break;case"response":if(a=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,a===void 0){if(o.textBody==="")return;a=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const f=r.IntentResponse.fromJSON(o.textBody);if(f!==null&&f.topScoringIntent&&f.topScoringIntent.intent){let v=this.privAddedLmIntents[f.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(v=this.privUmbrellaIntent),v){const y=v===void 0||v.intentName===void 0?f.topScoringIntent.intent:v.intentName;let g=a.result.reason;y!==void 0&&(g=t.ResultReason.RecognizedIntent);const m=a.result.properties!==void 0?a.result.properties:new t.PropertyCollection;m.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,o.textBody),a=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(y,a.result.resultId,g,a.result.text,a.result.duration,a.result.offset,void 0,void 0,a.result.errorDetails,a.result.json,m),a.offset,a.sessionId)}}if(this.privRequestSession.onPhraseRecognized(a.offset+a.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a.result)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}u=!0;break}const l=new e.Deferred;return l.resolve(u),l.promise}cancelRecognition(o,s,a,u,c){const l=new t.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privIntentRecognizer.canceled){const p=new t.IntentRecognitionCanceledEventArgs(a,c,u,void 0,void 0,o);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.IntentRecognitionResult(void 0,s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,c,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return eu.IntentServiceRecognizer=n,eu}var tu={},Kw;function Ux(){if(Kw)return tu;Kw=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.IntentResponse=void 0;let e=class qO{constructor(r){r===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(r)}static fromJSON(r){return new qO(r)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};return tu.IntentResponse=e,tu}var zh={},Gw;function Vx(){return Gw||(Gw=1,Object.defineProperty(zh,"__esModule",{value:!0})),zh}var ru={},nu={},Jw;function Wx(){if(Jw)return nu;Jw=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.ServiceTelemetryListener=void 0;const e=ne(),t=by();class r{constructor(i,o,s){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=i,this.privAudioSourceId=o,this.privAudioNodeId=s,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(i){i>0&&this.privPhraseLatencies.push(Date.now()-i)}hypothesisReceived(i){i>0&&this.privHypothesisLatencies.push(Date.now()-i)}onEvent(i){this.privIsDisposed||(i instanceof t.RecognitionTriggeredEvent&&i.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:i.eventTime,Name:"ListeningTrigger",Start:i.eventTime}),i instanceof e.AudioStreamNodeAttachingEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=i.eventTime),i instanceof e.AudioStreamNodeAttachedEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=i.eventTime),i instanceof e.AudioSourceErrorEvent&&i.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Error:i.error,Name:"Microphone",Start:this.privMicStartTime})),i instanceof e.AudioStreamNodeErrorEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Error:i.error,Name:"Microphone",Start:this.privMicStartTime})),i instanceof e.AudioStreamNodeDetachedEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Name:"Microphone",Start:this.privMicStartTime})),i instanceof t.ConnectingToServiceEvent&&i.requestId===this.privRequestId&&(this.privConnectionId=i.sessionId),i instanceof e.ConnectionStartEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionStartTime=i.eventTime),i instanceof e.ConnectionEstablishedEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:i.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),i instanceof e.ConnectionEstablishErrorEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:i.eventTime,Error:this.getConnectionError(i.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),i instanceof e.ConnectionMessageReceivedEvent&&i.connectionId===this.privConnectionId&&i.message&&i.message.headers&&i.message.headers.path&&(this.privReceivedMessages[i.message.headers.path]||(this.privReceivedMessages[i.message.headers.path]=new Array),this.privReceivedMessages[i.message.headers.path].length<50&&this.privReceivedMessages[i.message.headers.path].push(i.networkReceivedTime)))}getTelemetry(){const i=new Array;this.privListeningTriggerMetric&&i.push(this.privListeningTriggerMetric),this.privMicMetric&&i.push(this.privMicMetric),this.privConnectionEstablishMetric&&i.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&i.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&i.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const o={Metrics:i,ReceivedMessages:this.privReceivedMessages},s=JSON.stringify(o);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],s}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(i){switch(i){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+i.toString()}}}return nu.ServiceTelemetryListener=r,nu}var Qw;function $x(){if(Qw)return ru;Qw=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.RequestSession=void 0;const e=ne(),t=by(),r=Wx();let n=class{constructor(o){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=o,this.privRequestId=e.createNoDashGuid(),this.privAudioNodeId=e.createNoDashGuid(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(o){this.privServiceTelemetryListener&&this.privDetachables.push(o.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new r.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new t.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(o,s){this.privAudioNode=o,this.privIsAudioNodeDetached=!1,s?await this.onComplete():this.onEvent(new t.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(o,s){this.privAuthFetchEventId=o,this.privSessionId=s,this.onEvent(new t.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(o){o&&await this.onComplete()}async onConnectionEstablishCompleted(o,s){if(o===200){this.onEvent(new t.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else o===403&&await this.onComplete()}async onServiceTurnEndResponse(o){this.privTurnDeferral.resolve(),!o||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=e.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred}onHypothesis(o){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(o)))}onPhraseRecognized(o){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(o)),this.onServiceRecognized(o)}onServiceRecognized(o){this.privLastRecoOffset=o,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(o),this.privConnectionAttempts=0}onAudioSent(o){this.privBytesSent+=o,this.privRecognitionBytesSent+=o}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const o of this.privDetachables)await o.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(o){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(o),e.Events.instance.onEvent(o)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return ru.RequestSession=n,ru}var iu={},Yw;function Hx(){if(Yw)return iu;Yw=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.SpeechContext=void 0;let e=class{constructor(r){this.privContext={},this.privDynamicGrammar=r}getSection(r){return this.privContext[r]||{}}setSection(r,n){this.privContext[r]=n}setPronunciationAssessmentParams(r,n,i=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(r),i&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(r){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=r}toJSON(){const r=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",r),JSON.stringify(this.privContext)}};return iu.SpeechContext=e,iu}var ou={},Xw;function Kx(){if(Xw)return ou;Xw=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.DynamicGrammarBuilder=void 0;let e=class{addPhrase(r){this.privPhrases||(this.privPhrases=[]),r instanceof Array?this.privPhrases=this.privPhrases.concat(r):this.privPhrases.push(r)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(r){this.privGrammars||(this.privGrammars=[]),r instanceof Array?this.privGrammars=this.privGrammars.concat(r):this.privGrammars.push(r)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const r={};if(r.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const n=[];this.privPhrases.forEach(i=>{n.push({Text:i})}),r.Groups=[{Type:"Generic",Items:n}]}return r}};return ou.DynamicGrammarBuilder=e,ou}var Lh={},Zw;function Gx(){return Zw||(Zw=1,Object.defineProperty(Lh,"__esModule",{value:!0})),Lh}var su={},au={},uu={},xh={},e1;function BO(){return e1||(e1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new t(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))}(xh)),xh}var t1;function Jx(){if(t1)return uu;t1=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.DialogServiceTurnState=void 0;const e=_c(),t=Zi(),r=BO();let n=class{constructor(o,s){this.privRequestId=s,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=o,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(o,s){return o.messageDataStreamType===r.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=t.AudioOutputStream.createPullStream(),this.privAudioStream.format=s!==void 0?s:e.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return uu.DialogServiceTurnState=n,uu}var r1;function Qx(){if(r1)return au;r1=1,Object.defineProperty(au,"__esModule",{value:!0}),au.DialogServiceTurnStateManager=void 0;const e=Er(),t=Jx();let r=class{constructor(){this.privTurnMap=new Map}StartTurn(i){if(this.privTurnMap.has(i))throw new e.InvalidOperationError("Service error: There is already a turn with id:"+i);const o=new t.DialogServiceTurnState(this,i);return this.privTurnMap.set(i,o),this.privTurnMap.get(i)}GetTurn(i){return this.privTurnMap.get(i)}CompleteTurn(i){if(!this.privTurnMap.has(i))throw new e.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+i);const o=this.privTurnMap.get(i);return o.complete(),this.privTurnMap.delete(i),o}};return au.DialogServiceTurnStateManager=r,au}var n1;function Yx(){if(n1)return su;n1=1,Object.defineProperty(su,"__esModule",{value:!0}),su.DialogServiceAdapter=void 0;const e=at(),t=Kb(),r=ne(),n=_c(),i=V(),o=Qx(),s=ee(),a=BO(),u=eo();let c=class extends s.ServiceRecognizerBase{constructor(p,d,h,f,v){super(p,d,h,f,v),this.privEvents=new r.EventSource,this.privDialogServiceConnector=v,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(y,g,m)=>this.listenOnce(y,g,m),this.postConnectImplOverride=y=>this.dialogConnectImpl(y),this.configConnectionOverride=y=>this.configConnection(y),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(y=>{y.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=r.createGuid(),h=r.createNoDashGuid(),f={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},v=JSON.stringify(f);await(await this.fetchConnection()).send(new u.SpeechConnectionMessage(r.MessageType.Text,"agent",h,"application/json",v))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new i.PropertyCollection;p.messageType===r.MessageType.Text&&d.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,f;switch(p.path.toLowerCase()){case"speech.phrase":const y=s.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+y.Offset+y.Duration),y.RecognitionStatus!==s.RecognitionStatus.TooManyRequests&&y.RecognitionStatus!==s.RecognitionStatus.Error){const E=this.fireEventForResult(y,d);if(this.privLastResult=E.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,E)}catch{}}f=!0;break;case"speech.hypothesis":const g=s.SpeechHypothesis.fromJSON(p.textBody),m=g.Offset+this.privRequestSession.currentTurnAudioOffset;h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,g.Text,g.Duration,m,g.Language,g.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(m);const S=new i.SpeechRecognitionEventArgs(h,g.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,S)}catch{}f=!0;break;case"speech.keyword":const C=s.SpeechKeyword.fromJSON(p.textBody);h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,p.textBody,d),C.Status!=="Accepted"&&(this.privLastResult=h);const P=new i.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}f=!0;break;case"audio":{const E=p.requestId.toUpperCase(),R=this.privTurnStateManager.GetTurn(E);try{p.binaryBody?R.audioStream.write(p.binaryBody):R.endAudioStream()}catch{}}f=!0;break;case"response":this.handleResponseMessage(p),f=!0;break}const v=new r.Deferred;return v.resolve(f),v.promise}async cancelRecognition(p,d,h,f,v){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const y=new i.PropertyCollection;y.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[f]);const g=new i.SpeechRecognitionCanceledEventArgs(h,v,f,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,g)}catch{}if(this.privSuccessCallback){const m=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,v,void 0,y);try{this.privSuccessCallback(m),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const f=this.connectImpl(),v=this.sendPreAudioMessages(),y=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),g=await this.privDialogAudioSource.format,m=await this.privDialogAudioSource.deviceInfo,S=new e.ReplayableAudioNode(y,g.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(S,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:m};try{await f,await v}catch(E){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,E),Promise.resolve()}const C=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.sendAudio(S).then(()=>{},async E=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,E)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new r.Deferred,d=async()=>{try{const h=this.isDisposed(),f=!this.isDisposed()&&this.terminateMessageLoop;if(h||f){p.resolve(void 0);return}const y=await(await this.fetchConnection()).read();if(!y)return d();const g=u.SpeechConnectionMessage.fromConnectionMessage(y);switch(g.path.toLowerCase()){case"turn.start":{const T=g.requestId.toUpperCase(),B=this.privRequestSession.requestId.toUpperCase();T!==B?this.privTurnStateManager.StartTurn(T):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const S=s.SpeechDetected.fromJSON(g.textBody),C=new i.RecognitionEventArgs(S.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,C);break;case"speech.enddetected":let P;g.textBody.length>0?P=g.textBody:P="{ Offset: 0 }";const E=s.SpeechDetected.fromJSON(P);this.privRequestSession.onServiceRecognized(E.Offset+this.privRequestSession.currentTurnAudioOffset);const R=new i.RecognitionEventArgs(E.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,R);break;case"turn.end":{const T=g.requestId.toUpperCase(),B=this.privRequestSession.requestId.toUpperCase();if(T!==B)this.privTurnStateManager.CompleteTurn(T);else{const q=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,q),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(K){this.privErrorCallback&&this.privErrorCallback(K)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(g)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(g.path.toLowerCase(),g.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{r.Events.instance.onEvent(new r.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new u.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=r.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),v=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new u.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",v))}fireEventForResult(p,d){const h=s.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),f=p.Offset+this.privRequestSession.currentTurnAudioOffset,v=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,f,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new i.SpeechRecognitionEventArgs(v,f,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),f=a.ActivityPayloadResponse.fromJSON(p.textBody),v=this.privTurnStateManager.GetTurn(h);if(f.conversationId){const m=this.agentConfig.get();m.botInfo.conversationId=f.conversationId,this.agentConfig.set(m)}const y=v.processActivityPayload(f,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),g=new i.ActivityReceivedEventArgs(f.messagePayload,y);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,g)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),r.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),f=p.split(";"),v=d===void 0?[]:d.split(";"),y=h===void 0?[]:h.split(";"),g=[];for(let m=0;m<f.length;m++){const S={};S.text=f[m],m<v.length&&(S.offset=Number(v[m])),m<y.length&&(S.duration=Number(y[m])),g.push(S)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:g,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return su.DialogServiceAdapter=c,su}var cu={},i1;function Xx(){if(i1)return cu;i1=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.AgentConfig=void 0;let e=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(r){this.iPrivConfig=r}};return cu.AgentConfig=e,cu}var qh={},lu={},pu={},o1;function Oy(){if(o1)return pu;o1=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.ConversationConnectionConfig=void 0;const e=MO();let t=class Zr extends e.RestConfigBase{static get host(){return Zr.privHost}static get apiVersion(){return Zr.privApiVersion}static get clientAppId(){return Zr.privClientAppId}static get defaultLanguageCode(){return Zr.privDefaultLanguageCode}static get restPath(){return Zr.privRestPath}static get webSocketPath(){return Zr.privWebSocketPath}static get transcriptionEventKeys(){return Zr.privTranscriptionEventKeys}};return pu.ConversationConnectionConfig=t,t.privHost="dev.microsofttranslator.com",t.privRestPath="/capito/room",t.privApiVersion="2.0",t.privDefaultLanguageCode="en-US",t.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",t.privWebSocketPath="/capito/translate",t.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],pu}var s1;function Zx(){if(s1)return lu;s1=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.ConversationManager=void 0;const e=at(),t=ue(),r=V(),n=Oy();let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(s,a,u,c){try{t.Contracts.throwIfNullOrUndefined(s,"args");const l=s.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=s.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=s.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=s.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),f=s.getProperty(r.PropertyId.SpeechServiceConnection_Key),v=s.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=s.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(l,"languageCode"),t.Contracts.throwIfNullOrWhitespace(p,"nickname"),t.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const g={};g[this.privRequestParams.apiVersion]=this.privApiVersion,g[this.privRequestParams.languageCode]=l,g[this.privRequestParams.nickname]=p;const m={};h&&(m[this.privRequestParams.correlationId]=h),m[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,a!==void 0?g[this.privRequestParams.roomId]=a:(t.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=v,f?m[this.privRequestParams.subscriptionKey]=f:y?m[this.privRequestParams.authorization]=`Bearer ${y}`:t.Contracts.throwIfNullOrUndefined(f,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=m,this.privRestAdapter.options=S;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,C,g,null).then(P=>{const E=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(c){let T=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),B;try{B=JSON.parse(P.data),T+=` [${B.error.code}: ${B.error.message}]`}catch{T+=` [${P.data}]`}E&&(T+=` ${E}`),c(T)}return}const R=JSON.parse(P.data);if(R&&(R.requestId=E),u){try{u(R)}catch(T){c&&c(T)}u=void 0}}).catch(()=>{})}catch(l){if(c)if(l instanceof Error){const p=l;c(p.name+": "+p.message)}else c(l)}}leave(s,a){return new Promise((u,c)=>{try{t.Contracts.throwIfNullOrUndefined(s,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(a,this.privErrors.invalidArgs.replace("{arg}","token"));const l=s.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=s.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=a;const h={};p&&(h[this.privRequestParams.correlationId]=p);const f={};f.headers=h,this.privRestAdapter.options=f;const v=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,v,d,null).then(y=>{y.ok,u()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;c(p.name+": "+p.message)}else c(l)}})}};return lu.ConversationManager=i,lu}var Wn={},du={},hu={},fu={},a1;function FO(){if(a1)return fu;a1=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.ConversationConnectionMessage=void 0;const e=ne();let t=class extends e.ConnectionMessage{constructor(n,i,o,s){super(n,i,o,s);const a=JSON.parse(this.textBody);a.type!==void 0&&(this.privConversationMessageType=a.type)}get conversationMessageType(){return this.privConversationMessageType}};return fu.ConversationConnectionMessage=t,fu}var u1;function eq(){if(u1)return hu;u1=1,Object.defineProperty(hu,"__esModule",{value:!0}),hu.ConversationWebsocketMessageFormatter=void 0;const e=ne(),t=FO();let r=class{toConnectionMessage(i){const o=new e.Deferred;try{if(i.messageType===e.MessageType.Text){const s=new t.ConversationConnectionMessage(i.messageType,i.textContent,{},i.id);o.resolve(s)}else i.messageType===e.MessageType.Binary&&o.resolve(new t.ConversationConnectionMessage(i.messageType,i.binaryContent,void 0,i.id))}catch(s){o.reject(`Error formatting the message. Error: ${s}`)}return o.promise}fromConnectionMessage(i){const o=new e.Deferred;try{if(i.messageType===e.MessageType.Text){const s=`${i.textBody?i.textBody:""}`;o.resolve(new e.RawWebsocketMessage(e.MessageType.Text,s,i.id))}}catch(s){o.reject(`Error formatting the message. ${s}`)}return o.promise}};return hu.ConversationWebsocketMessageFormatter=r,hu}var c1;function tq(){if(c1)return du;c1=1,Object.defineProperty(du,"__esModule",{value:!0}),du.ConversationConnectionFactory=void 0;const e=at(),t=ne(),r=ue(),n=V(),i=dr(),o=Oy(),s=eq();let a=class extends i.ConnectionFactoryBase{create(c,l,p){const d=c.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,o.ConversationConnectionConfig.host),h=c.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,t.createGuid()),f=`wss://${d}${o.ConversationConnectionConfig.webSocketPath}`,v=c.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(v,"token");const y={};y[o.ConversationConnectionConfig.configParams.apiVersion]=o.ConversationConnectionConfig.apiVersion,y[o.ConversationConnectionConfig.configParams.token]=v,y[o.ConversationConnectionConfig.configParams.correlationId]=h;const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(f,y,{},new s.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),g,p)}};return du.ConversationConnectionFactory=a,du}var vu={},gu={},l1;function rq(){if(l1)return gu;l1=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.ConversationRequestSession=void 0;const e=ne();let t=class{constructor(n){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=n,this.privRequestId=e.createNoDashGuid(),this.privRequestCompletionDeferral=new e.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(n,i){this.privSessionId=i}onAuthCompleted(n){n&&this.onComplete()}onConnectionEstablishCompleted(n){n!==200&&n===403&&this.onComplete()}onServiceTurnEndResponse(n){n?this.privRequestId=e.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const n of this.privDetachables)await n.detach()}}onComplete(){}};return gu.ConversationRequestSession=t,gu}var St={},p1;function UO(){if(p1)return St;p1=1,Object.defineProperty(St,"__esModule",{value:!0}),St.ConversationReceivedTranslationEventArgs=St.ParticipantsListEventArgs=St.ParticipantAttributeEventArgs=St.ParticipantEventArgs=St.LockRoomEventArgs=St.MuteAllEventArgs=void 0;const e=V();class t extends e.SessionEventArgs{constructor(u,c){super(c),this.privIsMuted=u}get isMuted(){return this.privIsMuted}}St.MuteAllEventArgs=t;class r extends e.SessionEventArgs{constructor(u,c){super(c),this.privIsLocked=u}get isMuted(){return this.privIsLocked}}St.LockRoomEventArgs=r;class n extends e.SessionEventArgs{constructor(u,c){super(c),this.privParticipant=u}get participant(){return this.privParticipant}}St.ParticipantEventArgs=n;class i extends e.SessionEventArgs{constructor(u,c,l,p){super(p),this.privKey=c,this.privValue=l,this.privParticipantId=u}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}St.ParticipantAttributeEventArgs=i;class o extends e.SessionEventArgs{constructor(u,c,l,p,d,h,f,v,y){super(y),this.privRoomId=u,this.privSessionToken=c,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=f,this.privParticipants=v}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}St.ParticipantsListEventArgs=o;class s{constructor(u,c,l){this.privPayload=c,this.privCommand=u,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return St.ConversationReceivedTranslationEventArgs=s,St}var kr={},d1;function VO(){if(d1)return kr;d1=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.ConversationTranslatorCommandTypes=kr.ConversationTranslatorMessageTypes=kr.InternalParticipants=void 0;class e{constructor(r=[],n){this.participants=r,this.meId=n}addOrUpdateParticipant(r){if(r===void 0)return;const n=this.getParticipantIndex(r.id);return n>-1?this.participants.splice(n,1,r):this.participants.push(r),this.getParticipant(r.id)}getParticipantIndex(r){return this.participants.findIndex(n=>n.id===r)}getParticipant(r){return this.participants.find(n=>n.id===r)}deleteParticipant(r){this.participants=this.participants.filter(n=>n.id!==r)}get host(){return this.participants.find(r=>r.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return kr.InternalParticipants=e,kr.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},kr.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},kr}var Bh={},mu={},h1;function nq(){if(h1)return mu;h1=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.CommandResponsePayload=void 0;const e=r=>JSON.parse(r);let t=class WO{constructor(n){this.privCommandResponse=e(n)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(n){return new WO(n)}};return mu.CommandResponsePayload=t,mu}var $n={},f1;function iq(){if(f1)return $n;f1=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.ParticipantPayloadResponse=$n.ParticipantsListPayloadResponse=void 0;const e=i=>JSON.parse(i),t=i=>JSON.parse(i);class r{constructor(o){this.privParticipantsPayloadResponse=e(o)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(o){return new r(o)}}$n.ParticipantsListPayloadResponse=r;class n{constructor(o){this.privParticipantPayloadResponse=t(o)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(o){return new n(o)}}return $n.ParticipantPayloadResponse=n,$n}var Hn={},v1;function oq(){if(v1)return Hn;v1=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.TextResponsePayload=Hn.SpeechResponsePayload=void 0;const e=i=>JSON.parse(i),t=i=>JSON.parse(i);class r{constructor(o){this.privSpeechResponse=e(o)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(o){return new r(o)}}Hn.SpeechResponsePayload=r;class n{constructor(o){this.privTextResponse=t(o)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(o){return new n(o)}}return Hn.TextResponsePayload=n,Hn}var g1;function sq(){return g1||(g1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=nq();Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var r=iq();Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=oq();Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})}(Bh)),Bh}var m1;function aq(){if(m1)return vu;m1=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.ConversationServiceAdapter=void 0;const e=ne(),t=V(),r=ee(),n=FO(),i=rq(),o=UO(),s=VO(),a=sq();let u=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,f){super(l,p,d,h,f),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=f,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=v=>this.conversationConnectImpl(v),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(e.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,f){this.terminateMessageLoop=!0;const v=new t.ConversationTranslationCanceledEventArgs(d,f,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,v)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new e.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,f=d.conversationMessageType.toLowerCase();let v=!1;try{switch(f){case"info":case"participant_command":case"command":const y=a.CommandResponsePayload.fromJSON(d.textBody);switch(y.command.toLowerCase()){case"participantlist":const E=a.ParticipantsListPayloadResponse.fromJSON(d.textBody),R=E.participants.map(_=>({avatar:_.avatar,displayName:_.nickname,id:_.participantId,isHost:_.ishost,isMuted:_.ismuted,isUsingTts:_.usetts,preferredLanguage:_.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(E.roomid,E.token,E.translateTo,E.profanityFilter,E.roomProfanityFilter,E.roomLocked,E.muteAll,R,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,s.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,s.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,s.ConversationTranslatorCommandTypes.setMute,y.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(y.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,s.ConversationTranslatorCommandTypes.setUseTTS,y.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(y.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,s.ConversationTranslatorCommandTypes.changeNickname,y.value,h));break;case"joinsession":const T=a.ParticipantPayloadResponse.fromJSON(d.textBody),B={avatar:T.avatar,displayName:T.nickname,id:T.participantId,isHost:T.ishost,isMuted:T.ismuted,isUsingTts:T.usetts,preferredLanguage:T.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(B,h));break;case"leavesession":const q={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(q,h));break;case"disconnectsession":const K={id:y.participantId};break;case"token":const D=new r.CognitiveTokenAuthentication(()=>{const _=y.token;return Promise.resolve(_)},()=>{const _=y.token;return Promise.resolve(_)});this.authentication=D,this.privConversationServiceConnector.onToken(D);break;default:break}break;case"partial":case"final":const g=a.SpeechResponsePayload.fromJSON(d.textBody),m=f==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,S=new t.ConversationTranslationResult(g.participantId,this.getTranslations(g.translations),g.language,g.id,m,g.recognition,void 0,void 0,d.textBody,void 0);g.isFinal?((S.text!==void 0&&S.text.length>0||g.id===this.privLastPartialUtteranceId)&&(v=!0),v&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(s.ConversationTranslatorMessageTypes.final,S,h))):S.text!==void 0&&(this.privLastPartialUtteranceId=g.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(s.ConversationTranslatorMessageTypes.partial,S,h)));break;case"translated_message":const C=a.TextResponsePayload.fromJSON(d.textBody),P=new t.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(s.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new t.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return vu.ConversationServiceAdapter=u,vu}var y1;function uq(){if(y1)return Wn;y1=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.ConversationTranslatorRecognizer=Wn.ConversationRecognizerFactory=void 0;const e=ee(),t=ne(),r=ue(),n=V(),i=tq(),o=aq();class s{static fromConfig(c,l,p){return new a(c,l,p)}}Wn.ConversationRecognizerFactory=s;let a=class extends n.Recognizer{constructor(c,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=c;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(c){this.privConnection.connected=c}set disconnected(c){this.privConnection.disconnected=c}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(c,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(c,"token"),this.privReco.conversationTranslatorToken=c,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(c,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{c&&c()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})}}sendRequest(c,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(c,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))})}}onToken(c){this.privConversation.onToken(c)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(c){this.privIsDisposed||c&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,l,p,d){const h=p;return new o.ConversationServiceAdapter(c,l,h,d,this)}sendMessage(c,l,p){const d=this.privReco;((f,v,y)=>{f!==void 0?f.then(()=>{try{v&&v()}catch(g){y&&y(`'Unhandled error on promise callback: ${g}'`)}},g=>{try{y&&y(g)}catch{}}):y&&y("Null promise")})(d.sendMessageAsync(c),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Wn.ConversationTranslatorRecognizer=a,Wn}var yu={},S1;function cq(){if(S1)return yu;S1=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.TranscriberRecognizer=void 0;const e=ne(),t=ue(),r=V(),n=ee();let i=class extends r.Recognizer{constructor(s,a){const u=s;t.Contracts.throwIfNull(u,"speechTranslationConfig");const c=a;t.Contracts.throwIfNull(c,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(u.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(a,u.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}set conversation(s){t.Contracts.throwIfNullOrUndefined(s,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=s}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(s){t.Contracts.throwIfNullOrUndefined(s,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=s}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(s,a){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),s,a)}stopContinuousRecognitionAsync(s,a){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),s,a)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(s,a){const u=this.privReco;t.Contracts.throwIfNullOrUndefined(u,"serviceRecognizer"),await u.sendSpeechEventAsync(s,a)}async pushMeetingEvent(s,a){const u=this.privReco;t.Contracts.throwIfNullOrUndefined(u,"serviceRecognizer"),await u.sendMeetingSpeechEventAsync(s,a)}async enforceAudioGating(){const u=(await this.audioConfig.format).channels;if(u===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(u!==8)throw new Error(`Unsupported audio configuration: Detected ${u}-channel audio`)}connectMeetingCallbacks(s){this.isMeetingRecognizer=!0,this.canceled=(a,u)=>{s.canceled&&s.canceled(s,u)},this.recognizing=(a,u)=>{s.transcribing&&s.transcribing(s,u)},this.recognized=(a,u)=>{s.transcribed&&s.transcribed(s,u)},this.sessionStarted=(a,u)=>{s.sessionStarted&&s.sessionStarted(s,u)},this.sessionStopped=(a,u)=>{s.sessionStopped&&s.sessionStopped(s,u)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new n.RecognizerConfig(s,this.properties)}createServiceRecognizer(s,a,u,c){const l=u;return new n.TranscriptionServiceRecognizer(s,a,l,c,this)}};return yu.TranscriberRecognizer=i,yu}var C1;function lq(){return C1||(C1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Zx();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var r=Oy();Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=uq();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=cq();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var o=UO();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return o.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return o.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return o.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return o.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return o.ParticipantsListEventArgs}});var s=VO();Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return s.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return s.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return s.InternalParticipants}})}(qh)),qh}var Fh={},R1;function $O(){return R1||(R1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new t(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t}(Fh)),Fh}var Su={},or={},P1;function pq(){if(P1)return or;P1=1,Object.defineProperty(or,"__esModule",{value:!0}),or.SynthesisStartedEvent=or.ConnectingToSynthesisServiceEvent=or.SynthesisTriggeredEvent=or.SpeechSynthesisEvent=void 0;const e=ne();class t extends e.PlatformEvent{constructor(s,a,u=e.EventType.Info){super(s,u),this.privRequestId=a}get requestId(){return this.privRequestId}}or.SpeechSynthesisEvent=t;class r extends t{constructor(s,a,u){super("SynthesisTriggeredEvent",s),this.privSessionAudioDestinationId=a,this.privTurnAudioDestinationId=u}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}or.SynthesisTriggeredEvent=r;class n extends t{constructor(s,a){super("ConnectingToSynthesisServiceEvent",s),this.privAuthFetchEventId=a}get authFetchEventId(){return this.privAuthFetchEventId}}or.ConnectingToSynthesisServiceEvent=n;class i extends t{constructor(s,a){super("SynthesisStartedEvent",s),this.privAuthFetchEventId=a}get authFetchEventId(){return this.privAuthFetchEventId}}return or.SynthesisStartedEvent=i,or}var E1;function dq(){if(E1)return Su;E1=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.SynthesisTurn=void 0;const e=ne(),t=Zi(),r=V(),n=$O(),i=pq();let o=class Pm{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=e.createNoDashGuid(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(a){this.privStreamId=a}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(a){this.privAudioOutputFormat=a}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const a=new r.PropertyCollection;return a.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),a}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const a=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(a),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(a,u,c,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=a,this.privRawText=u,this.privIsSSML=c,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(a){this.privAuthFetchEventId=a,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(a){a&&this.onComplete()}onConnectionEstablishCompleted(a){if(a===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else a===403&&this.onComplete()}onServiceResponseMessage(a){const u=JSON.parse(a);this.streamId=u.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(a){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const u=JSON.parse(a);u.webrtc&&(this.privWebRTCSDP=u.webrtc.connectionString)}onAudioChunkReceived(a){this.isSynthesizing&&(this.privAudioOutputStream.write(a),this.privBytesReceived+=a.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(a))}onTextBoundaryEvent(a){this.updateTextOffset(a.Data.text.Text,a.Type)}onVisemeMetadataReceived(a){a.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=a.Data.AnimationChunk)}onSessionEnd(a){this.privAudioDuration=a.Data.Offset}async constructSynthesisResult(){const a=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,a,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const a=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",a}onEvent(a){e.Events.instance.onEvent(a)}static isXmlTag(a){return a.length>=2&&a[0]==="<"&&a[a.length-1]===">"}updateTextOffset(a,u){u===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(a,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+a.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Pm.isXmlTag(a)&&this.updateTextOffset(a,u))):(this.privSentenceOffset=this.privRawText.indexOf(a,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+a.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Pm.isXmlTag(a)&&this.updateTextOffset(a,u)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(a){return this.privRawText.indexOf("<",a+1)>this.privRawText.indexOf(">",a+1)}};return Su.SynthesisTurn=o,Su}var Cu={},w1;function hq(){if(w1)return Cu;w1=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.SynthesisAdapterBase=void 0;const e=ne(),t=V(),r=ee(),n=eo();let i=class{constructor(s,a,u,c){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!s)throw new e.ArgumentNullError("authentication");if(!a)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=s,this.privConnectionFactory=a,this.privSynthesizerConfig=u,this.privIsDisposed=!1,this.privSessionAudioDestination=c,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,p.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(s){this.privActivityTemplate=s}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(s){this.privAudioOutputFormat=s,this.privSynthesisTurn.audioOutputFormat=s,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=s),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=s)}isDisposed(){return this.privIsDisposed}async dispose(s){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(s)}async connect(){await this.connectImpl()}async sendNetworkMessage(s,a){const u=typeof a=="string"?e.MessageType.Text:e.MessageType.Binary,c=typeof a=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(u,s,this.privSynthesisTurn.requestId,c,a))}async Speak(s,a,u,c,l,p){let d;if(a?d=s:d=this.privSynthesizer.buildSsml(s),this.speakOverride!==void 0)return this.speakOverride(d,u,c,l);this.privSuccessCallback=c,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(u,s,a,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,u),this.onSynthesisStarted(u),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(s,a,u,c){const l=new t.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]);const p=new t.SpeechSynthesisResult(s,t.ResultReason.Canceled,void 0,c,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(s,a,u){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,s,a,u))}processTypeSpecificMessages(s){return!0}async receiveMessage(){try{const a=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!a)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const u=n.SpeechConnectionMessage.fromConnectionMessage(a);if(u.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(u.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(u.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===u.streamId.toLowerCase()&&u.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(u.binaryBody),this.onSynthesizing(u.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(u.binaryBody));break;case"audio.metadata":const c=r.SynthesisAudioMetadata.fromJSON(u.textBody).Metadata;for(const p of c)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new t.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new t.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const f=new t.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(f)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(s){this.setSynthesisContextSynthesisSection();const a=this.synthesisContext.toJSON();if(a)return s.send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",a))}setSpeechConfigSynthesisSection(){}connectImpl(s=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(u=>u.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=e.createNoDashGuid(),this.privConnectionId=e.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const a=s?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=a.then(async u=>{this.privSynthesisTurn.onAuthCompleted(!1);const c=this.privConnectionFactory.create(this.privSynthesizerConfig,u,this.privConnectionId);c.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await c.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(c)):l.statusCode===403&&!s?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},u=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(u)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(s,a){if(a)return s.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",a))}sendSsmlMessage(s,a,u){return s.send(new n.SpeechConnectionMessage(e.MessageType.Text,"ssml",u,"application/ssml+xml",a))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(s=>s.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const s=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(s):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(s,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),s)}onAvatarEvent(s){}onSynthesisStarted(s){}onSynthesizing(s){}onSynthesisCancelled(s){}onSynthesisCompleted(s){}onWordBoundary(s){}onVisemeReceived(s){}onBookmarkReached(s){}};return Cu.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Cu}var Ru={},_1;function fq(){if(_1)return Ru;_1=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.AvatarSynthesisAdapter=void 0;const e=V(),t=ee();let r=class extends t.SynthesisAdapterBase{constructor(i,o,s,a,u){super(i,o,s,void 0),this.privAvatarSynthesizer=a,this.privSynthesizer=a,this.privAvatarConfig=u}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,o,s,a,u,c,l,p,d,h,f,v,y,g,m,S;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.codec,crop:{bottomRight:{x:(u=(a=(s=this.privAvatarConfig.videoFormat)==null?void 0:s.cropRange)==null?void 0:a.bottomRight)==null?void 0:u.x,y:(p=(l=(c=this.privAvatarConfig.videoFormat)==null?void 0:c.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(f=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:f.x,y:(g=(y=(v=this.privAvatarConfig.videoFormat)==null?void 0:v.cropRange)==null?void 0:y.topLeft)==null?void 0:g.y}},resolution:{height:(m=this.privAvatarConfig.videoFormat)==null?void 0:m.height,width:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const o=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,o)}catch{}}}};return Ru.AvatarSynthesisAdapter=r,Ru}var Pu={},T1;function vq(){if(T1)return Pu;T1=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.SpeechSynthesisAdapter=void 0;const e=V(),t=ee();let r=class extends t.SynthesisAdapterBase{constructor(i,o,s,a,u){super(i,o,s,u),this.privSpeechSynthesizer=a,this.privSynthesizer=a}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const o=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,o)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const o=this.privSynthesisTurn.audioOutputFormat.addHeader(i),s=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,o));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,s)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const o=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,o)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Pu.SpeechSynthesisAdapter=r,Pu}var Eu={},I1;function gq(){if(I1)return Eu;I1=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.SynthesisRestAdapter=void 0;const e=at(),t=V(),r=dr(),n=wt();let i=class{constructor(s,a){let u=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!u){const l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);u=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${u}/cognitiveservices/voices/list`;const c=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(c),this.privAuthentication=a}getVoicesList(s){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,s),this.privAuthentication.fetch(s).then(a=>(this.privRestAdapter.setHeaders(a.headerName,a.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return Eu.SynthesisRestAdapter=i,Eu}var Uh={},A1;function mq(){return A1||(A1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=ee();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=e.SynthesisServiceType||(e.SynthesisServiceType={}));class n{constructor(o,s){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=o||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=s}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(o){this.privSynthesisServiceType=o}set synthesisVideoSection(o){this.privSpeechServiceConfig.Context.synthesis={video:o}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}e.SynthesizerConfig=n}(Uh)),Uh}var wu={},b1;function yq(){if(b1)return wu;b1=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.SynthesisContext=void 0;const e=V();let t=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!(n!=null&&n.bookmarkReached),punctuationBoundaryEnabled:n==null?void 0:n.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(n!=null&&n.wordBoundary)),sentenceBoundaryEnabled:n==null?void 0:n.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(n!=null&&n.visemeReceived),wordBoundaryEnabled:n==null?void 0:n.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(n!=null&&n.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n==null?void 0:n.autoDetectSourceLanguage}}}};return wu.SynthesisContext=t,wu}var _u={},O1;function Sq(){if(O1)return _u;O1=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.SpeakerRecognitionConfig=void 0;const e=ee();let t=class{constructor(n,i){this.privContext=n||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return _u.SpeakerRecognitionConfig=t,_u}var Tu={},k1;function Cq(){if(k1)return Tu;k1=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.SpeakerServiceRecognizer=void 0;const e=at(),t=ne(),r=V(),n=ee(),i=eo();let o=class extends n.ServiceRecognizerBase{constructor(a,u,c,l,p){super(a,u,c,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=c,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(a){let u=!1;const c=new r.PropertyCollection;switch(a.messageType===t.MessageType.Text&&c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speaker.response":const p=JSON.parse(a.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),u=!0;break}const l=new t.Deferred;return l.resolve(u),l.promise}cancelRecognition(a,u,c,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(f){this.privResultDeferral.reject(f)}}}async recognizeSpeakerOnce(a){this.privSpeakerModel=a,this.voiceProfileType=a.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),c=this.sendPreAudioMessages(this.extractSpeakerContext(a)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new e.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await u,await c}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,y)}const f=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(h).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise}async sendPreAudioMessages(a){const u=await this.fetchConnection();await this.sendSpeakerRecognition(u,a)}async sendSpeakerRecognition(a,u){const c=JSON.stringify(u);return a.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",c))}extractSpeakerContext(a){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:a.profileIds,scenario:a.scenario}}};return Tu.SpeakerServiceRecognizer=o,Tu}var Iu={},M1;function Rq(){if(M1)return Iu;M1=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.VoiceServiceRecognizer=void 0;const e=at(),t=ne(),r=V(),n=ee(),i=eo();let o=class extends n.ServiceRecognizerBase{constructor(a,u,c,l,p){super(a,u,c,l,p),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=c,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(a){this.privSpeakerAudioSource=a}processTypeSpecificMessages(a){let u=!1;const c=new r.PropertyCollection;switch(a.messageType===t.MessageType.Text&&c.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(a.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,a.requestId);break;case"delete":case"reset":this.handleResultResponse(p,a.requestId);break;case"fetch":const v=JSON.parse(a.textBody);this.handleFetchResponse(v,a.requestId);break}u=!0;break;case"speaker.phrases":const d=JSON.parse(a.textBody);this.handlePhrasesResponse(d,a.requestId),u=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(a.textBody),f=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(a.requestId)&&this.privDeferralMap.complete(a.requestId,f),this.privRequestSession.onSpeechEnded(),u=!0;break}const l=new t.Deferred;return l.resolve(u),l.promise}cancelRecognition(a,u,c,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(u)&&this.privDeferralMap.complete(u,h)}async createProfile(a,u){this.voiceProfileType=a.toString();const c=this.connectImpl();try{const l=new t.Deferred;return await c,await this.sendCreateProfile(l,a,u),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(a){return this.voiceProfileType=a.profileType.toString(),this.sendCommonRequest("reset",a.profileType,a)}async deleteProfile(a){return this.voiceProfileType=a.profileType.toString(),this.sendCommonRequest("delete",a.profileType,a)}async retrieveEnrollmentResult(a){return this.voiceProfileType=a.profileType.toString(),this.privExpectedProfileId=a.profileId,this.sendCommonRequest("fetch",a.profileType,a)}async getAllProfiles(a){return this.voiceProfileType=a.toString(),this.sendCommonRequest("fetch",a)}async getActivationPhrases(a,u){this.voiceProfileType=a.toString();const c=this.connectImpl();try{const l=new t.Deferred;return await c,await this.sendPhrasesRequest(l,a,u),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(a){this.voiceProfileType=a.profileType.toString();const u=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),l=this.sendPreAudioMessages(a,u),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,f=new e.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(f,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await c,await l}catch(g){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,g)}const v=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(f).then(()=>{},g=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,g)}),u.promise}async sendPreAudioMessages(a,u){const c=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,u),await this.sendBaseRequest(c,"enroll",this.scenarioFrom(a.profileType),a)}async sendPhrasesRequest(a,u,c){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,a);const p=this.scenarioFrom(u),d={locale:c,scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(a,u,c){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,a);const p=u===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":u===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:c,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(a,u,c=void 0){const l=this.connectImpl();try{const p=new t.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,a,this.scenarioFrom(u),c),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(a,u,c,l){const p={scenario:c};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,a.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${u}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(a){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:a.profileIds,scenario:a.scenario}}handlePhrasesResponse(a,u){if(this.privDeferralMap.getId(u))if(a.status.statusCode.toLowerCase()!=="success"){const c=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(c,a.status.statusCode,a.passPhraseType,[]);this.privDeferralMap.complete(u,l)}else if(a.phrases&&a.phrases.length>0){const c=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(c,a.status.statusCode,a.passPhraseType,a.phrases);this.privDeferralMap.complete(u,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${u} not found`)}handleCreateResponse(a,u){if(a.profiles&&a.profiles.length>0)if(this.privDeferralMap.getId(u)){const c=a.profiles.map(l=>l.profileId);this.privDeferralMap.complete(u,c)}else throw new Error(`Voice Profile create request for requestID ${u} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(a,u){if(this.privDeferralMap.getId(u)){const c=a.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=a.status.statusCode.toLowerCase()==="success"?c:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${a.status.statusCode}, errorDetails: ${a.status.reason}`);this.privDeferralMap.complete(u,p)}else throw new Error(`Voice Profile create request for requestID ${u} not found`)}handleFetchResponse(a,u){if(this.privDeferralMap.getId(u)&&a.profiles[0]){if(this.privExpectedProfileId&&a.profiles.length===1&&a.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const c=a.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(c.enrollmentStatus),JSON.stringify(c),a.status.reason);this.privDeferralMap.complete(u,l)}else if(a.profiles.length>0){const c=a.profiles,l=[];for(const p of c)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),a.status.reason));this.privDeferralMap.complete(u,l)}}else throw new Error(`Voice Profile fetch request for requestID ${u} not found`)}enrollmentReasonFrom(a){switch(a.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(a){return a===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":a===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Iu.VoiceServiceRecognizer=o,Iu}var Vh={},D1;function Pq(){return D1||(D1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(a){this.context=a}serialize(){return JSON.stringify(this,(a,u)=>{if(u&&typeof u=="object"&&!Array.isArray(u)){const c={};for(const l in u)Object.hasOwnProperty.call(u,l)&&(c[l&&l.charAt(0).toLowerCase()+l.substring(1)]=u[l]);return c}return u})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(a){this.recognition=a.toLowerCase()}}e.SpeechServiceConfig=t;class r{constructor(a){this.system=new n,this.os=a}}e.Context=r;class n{constructor(){const a="1.38.0";this.name="SpeechSDK",this.version=a,this.build="JavaScript",this.lang="JavaScript"}}e.System=n;class i{constructor(a,u,c){this.platform=a,this.name=u,this.version=c}}e.OS=i;class o{constructor(a,u,c){this.manufacturer=a,this.model=u,this.version=c}}e.Device=o,function(s){s.Bluetooth="Bluetooth",s.Wired="Wired",s.WiFi="WiFi",s.Cellular="Cellular",s.InBuilt="InBuilt",s.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(s){s.Phone="Phone",s.Speaker="Speaker",s.Car="Car",s.Headset="Headset",s.Thermostat="Thermostat",s.Microphones="Microphones",s.Deskphone="Deskphone",s.RemoteControl="RemoteControl",s.Unknown="Unknown",s.File="File",s.Stream="Stream"}(e.type||(e.type={}))}(Vh)),Vh}var N1;function ee(){return N1||(N1=1,function(e){var t=ae&&ae.__createBinding||(Object.create?function(o,s,a,u){u===void 0&&(u=a),Object.defineProperty(o,u,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,u){u===void 0&&(u=a),o[u]=s[a]}),r=ae&&ae.__exportStar||function(o,s){for(var a in o)a!=="default"&&!s.hasOwnProperty(a)&&t(s,o,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=void 0,r(lz(),e),r(pz(),e),r(wy(),e),r(dz(),e),r(hz(),e),r(vx(),e),r(gx(),e),r(by(),e),r(mx(),e),r(yx(),e),r(Sx(),e),r(Cx(),e),r(Rx(),e),r(Px(),e),r(Ex(),e),r(wx(),e),r(_x(),e),r(OO(),e),r(Tx(),e),r(Ix(),e),r(Ax(),e),r(bx(),e),r(Ox(),e),r(kx(),e),r(Mx(),e),r(Dx(),e),r(Nx(),e),r(jx(),e),r(zx(),e),r(Lx(),e),r(xx(),e),r(qx(),e),r(Bx(),e),r(Fx(),e),r(Ux(),e),r(Vx(),e),r($x(),e),r(Hx(),e),r(Kx(),e),r(Gx(),e),r(Yx(),e),r(Xx(),e),r(lq(),e),r($O(),e),r(dq(),e),r(hq(),e);var n=fq();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=vq();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(gq(),e),r(mq(),e),r(yq(),e),r(Sq(),e),r(Cq(),e),r(Rq(),e),r(Pq(),e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(Ld)),Ld}var j1;function Eq(){return j1||(j1=1,function(e){var t=ae&&ae.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s),Object.defineProperty(i,a,{enumerable:!0,get:function(){return o[s]}})}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),r=ae&&ae.__exportStar||function(i,o){for(var s in i)s!=="default"&&!o.hasOwnProperty(s)&&t(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0});const n=ee();new n.AgentConfig,r(V(),e)}(zd)),zd}var z1;function HO(){if(z1)return Co;z1=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.default=void 0;var e=Eq(),t={AudioConfig:e.AudioConfig,OutputFormat:e.OutputFormat,ResultReason:e.ResultReason,SpeechConfig:e.SpeechConfig,SpeechRecognizer:e.SpeechRecognizer};return Co.default=t,Co}var L1;function wq(){if(L1)return Qc;L1=1;var e=rt;Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.default=s;var t=e(bj()),r=e(HO()),n=r.default.ResultReason,i=n.RecognizingSpeech,o=n.RecognizedSpeech;function s(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=u.maxAlternatives,l=c===void 0?1/0:c,p=u.textNormalization,d=p===void 0?"display":p;if(a.reason===i||a.reason===o&&!a.json.NBest){var h=[{confidence:.5,transcript:a.text}];return a.reason===o&&(h.isFinal=!0),h}else if(a.reason===o){var f=(0,t.default)((a.json.NBest||[]).slice(0,l).map(function(v){var y=v.Confidence,g=v.Display,m=v.ITN,S=v.Lexical,C=v.MaskedITN;return{confidence:y,transcript:d==="itn"?m:d==="lexical"?S:d==="maskeditn"?C:g}}),{isFinal:!0});return f}return[]}return Qc}var Zc={},Wh={exports:{}},x1;function _q(){return x1||(x1=1,function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Wh)),Wh.exports}var q1={},B1={},$h,F1;function ut(){if(F1)return $h;F1=1;var e=function(t){return t&&t.Math===Math&&t};return $h=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof ae=="object"&&ae)||e(typeof ae=="object"&&ae)||function(){return this}()||Function("return this")(),$h}var Hh,U1;function Vt(){return U1||(U1=1,Hh=function(e){try{return!!e()}catch{return!0}}),Hh}var Kh,V1;function Rp(){if(V1)return Kh;V1=1;var e=Vt();return Kh=!e(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),Kh}var Gh,W1;function KO(){if(W1)return Gh;W1=1;var e=Rp(),t=Function.prototype,r=t.apply,n=t.call;return Gh=typeof Reflect=="object"&&Reflect.apply||(e?n.bind(r):function(){return n.apply(r,arguments)}),Gh}var Jh,$1;function Mt(){if($1)return Jh;$1=1;var e=Rp(),t=Function.prototype,r=t.call,n=e&&t.bind.bind(r,r);return Jh=e?n:function(i){return function(){return r.apply(i,arguments)}},Jh}var Qh,H1;function Pp(){if(H1)return Qh;H1=1;var e=Mt(),t=e({}.toString),r=e("".slice);return Qh=function(n){return r(t(n),8,-1)},Qh}var Yh,K1;function GO(){if(K1)return Yh;K1=1;var e=Pp(),t=Mt();return Yh=function(r){if(e(r)==="Function")return t(r)},Yh}var Xh,G1;function nt(){if(G1)return Xh;G1=1;var e=typeof document=="object"&&document.all;return Xh=typeof e>"u"&&e!==void 0?function(t){return typeof t=="function"||t===e}:function(t){return typeof t=="function"},Xh}var Zh={},ef,J1;function wr(){if(J1)return ef;J1=1;var e=Vt();return ef=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ef}var tf,Q1;function rr(){if(Q1)return tf;Q1=1;var e=Rp(),t=Function.prototype.call;return tf=e?t.bind(t):function(){return t.apply(t,arguments)},tf}var rf={},Y1;function Tq(){if(Y1)return rf;Y1=1;var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,r=t&&!e.call({1:2},1);return rf.f=r?function(i){var o=t(this,i);return!!o&&o.enumerable}:e,rf}var nf,X1;function Ic(){return X1||(X1=1,nf=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),nf}var of,Z1;function Iq(){if(Z1)return of;Z1=1;var e=Mt(),t=Vt(),r=Pp(),n=Object,i=e("".split);return of=t(function(){return!n("z").propertyIsEnumerable(0)})?function(o){return r(o)==="String"?i(o,""):n(o)}:n,of}var sf,e_;function Ep(){return e_||(e_=1,sf=function(e){return e==null}),sf}var af,t_;function wp(){if(t_)return af;t_=1;var e=Ep(),t=TypeError;return af=function(r){if(e(r))throw new t("Can't call method on "+r);return r},af}var uf,r_;function Ac(){if(r_)return uf;r_=1;var e=Iq(),t=wp();return uf=function(r){return e(t(r))},uf}var cf,n_;function hr(){if(n_)return cf;n_=1;var e=nt();return cf=function(t){return typeof t=="object"?t!==null:e(t)},cf}var lf,i_;function ky(){return i_||(i_=1,lf={}),lf}var pf,o_;function Wr(){if(o_)return pf;o_=1;var e=ky(),t=ut(),r=nt(),n=function(i){return r(i)?i:void 0};return pf=function(i,o){return arguments.length<2?n(e[i])||n(t[i]):e[i]&&e[i][o]||t[i]&&t[i][o]},pf}var df,s_;function _p(){if(s_)return df;s_=1;var e=Mt();return df=e({}.isPrototypeOf),df}var hf,a_;function Tp(){return a_||(a_=1,hf=typeof navigator<"u"&&String(navigator.userAgent)||""),hf}var ff,u_;function JO(){if(u_)return ff;u_=1;var e=ut(),t=Tp(),r=e.process,n=e.Deno,i=r&&r.versions||n&&n.version,o=i&&i.v8,s,a;return o&&(s=o.split("."),a=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!a&&t&&(s=t.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=t.match(/Chrome\/(\d+)/),s&&(a=+s[1]))),ff=a,ff}var vf,c_;function QO(){if(c_)return vf;c_=1;var e=JO(),t=Vt(),r=ut(),n=r.String;return vf=!!Object.getOwnPropertySymbols&&!t(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&e&&e<41}),vf}var gf,l_;function YO(){if(l_)return gf;l_=1;var e=QO();return gf=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol",gf}var mf,p_;function XO(){if(p_)return mf;p_=1;var e=Wr(),t=nt(),r=_p(),n=YO(),i=Object;return mf=n?function(o){return typeof o=="symbol"}:function(o){var s=e("Symbol");return t(s)&&r(s.prototype,i(o))},mf}var yf,d_;function Ip(){if(d_)return yf;d_=1;var e=String;return yf=function(t){try{return e(t)}catch{return"Object"}},yf}var Sf,h_;function _r(){if(h_)return Sf;h_=1;var e=nt(),t=Ip(),r=TypeError;return Sf=function(n){if(e(n))return n;throw new r(t(n)+" is not a function")},Sf}var Cf,f_;function My(){if(f_)return Cf;f_=1;var e=_r(),t=Ep();return Cf=function(r,n){var i=r[n];return t(i)?void 0:e(i)},Cf}var Rf,v_;function Aq(){if(v_)return Rf;v_=1;var e=rr(),t=nt(),r=hr(),n=TypeError;return Rf=function(i,o){var s,a;if(o==="string"&&t(s=i.toString)&&!r(a=e(s,i))||t(s=i.valueOf)&&!r(a=e(s,i))||o!=="string"&&t(s=i.toString)&&!r(a=e(s,i)))return a;throw new n("Can't convert object to primitive value")},Rf}var Pf={exports:{}},Ef,g_;function $r(){return g_||(g_=1,Ef=!0),Ef}var wf,m_;function bq(){if(m_)return wf;m_=1;var e=ut(),t=Object.defineProperty;return wf=function(r,n){try{t(e,r,{value:n,configurable:!0,writable:!0})}catch{e[r]=n}return n},wf}var y_;function Ap(){if(y_)return Pf.exports;y_=1;var e=$r(),t=ut(),r=bq(),n="__core-js_shared__",i=Pf.exports=t[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.37.1",mode:e?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Pf.exports}var _f,S_;function ZO(){if(S_)return _f;S_=1;var e=Ap();return _f=function(t,r){return e[t]||(e[t]=r||{})},_f}var Tf,C_;function ek(){if(C_)return Tf;C_=1;var e=wp(),t=Object;return Tf=function(r){return t(e(r))},Tf}var If,R_;function Tr(){if(R_)return If;R_=1;var e=Mt(),t=ek(),r=e({}.hasOwnProperty);return If=Object.hasOwn||function(i,o){return r(t(i),o)},If}var Af,P_;function tk(){if(P_)return Af;P_=1;var e=Mt(),t=0,r=Math.random(),n=e(1 .toString);return Af=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++t+r,36)},Af}var bf,E_;function Wt(){if(E_)return bf;E_=1;var e=ut(),t=ZO(),r=Tr(),n=tk(),i=QO(),o=YO(),s=e.Symbol,a=t("wks"),u=o?s.for||s:s&&s.withoutSetter||n;return bf=function(c){return r(a,c)||(a[c]=i&&r(s,c)?s[c]:u("Symbol."+c)),a[c]},bf}var Of,w_;function Oq(){if(w_)return Of;w_=1;var e=rr(),t=hr(),r=XO(),n=My(),i=Aq(),o=Wt(),s=TypeError,a=o("toPrimitive");return Of=function(u,c){if(!t(u)||r(u))return u;var l=n(u,a),p;if(l){if(c===void 0&&(c="default"),p=e(l,u,c),!t(p)||r(p))return p;throw new s("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(u,c)},Of}var kf,__;function rk(){if(__)return kf;__=1;var e=Oq(),t=XO();return kf=function(r){var n=e(r,"string");return t(n)?n:n+""},kf}var Mf,T_;function Dy(){if(T_)return Mf;T_=1;var e=ut(),t=hr(),r=e.document,n=t(r)&&t(r.createElement);return Mf=function(i){return n?r.createElement(i):{}},Mf}var Df,I_;function nk(){if(I_)return Df;I_=1;var e=wr(),t=Vt(),r=Dy();return Df=!e&&!t(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Df}var A_;function ik(){if(A_)return Zh;A_=1;var e=wr(),t=rr(),r=Tq(),n=Ic(),i=Ac(),o=rk(),s=Tr(),a=nk(),u=Object.getOwnPropertyDescriptor;return Zh.f=e?u:function(l,p){if(l=i(l),p=o(p),a)try{return u(l,p)}catch{}if(s(l,p))return n(!t(r.f,l,p),l[p])},Zh}var Nf,b_;function ok(){if(b_)return Nf;b_=1;var e=Vt(),t=nt(),r=/#|\.prototype\./,n=function(u,c){var l=o[i(u)];return l===a?!0:l===s?!1:t(c)?e(c):!!c},i=n.normalize=function(u){return String(u).replace(r,".").toLowerCase()},o=n.data={},s=n.NATIVE="N",a=n.POLYFILL="P";return Nf=n,Nf}var jf,O_;function bp(){if(O_)return jf;O_=1;var e=GO(),t=_r(),r=Rp(),n=e(e.bind);return jf=function(i,o){return t(i),o===void 0?i:r?n(i,o):function(){return i.apply(o,arguments)}},jf}var zf={},Lf,k_;function sk(){if(k_)return Lf;k_=1;var e=wr(),t=Vt();return Lf=e&&t(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Lf}var xf,M_;function Hr(){if(M_)return xf;M_=1;var e=hr(),t=String,r=TypeError;return xf=function(n){if(e(n))return n;throw new r(t(n)+" is not an object")},xf}var D_;function to(){if(D_)return zf;D_=1;var e=wr(),t=nk(),r=sk(),n=Hr(),i=rk(),o=TypeError,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",l="writable";return zf.f=e?r?function(d,h,f){if(n(d),h=i(h),n(f),typeof d=="function"&&h==="prototype"&&"value"in f&&l in f&&!f[l]){var v=a(d,h);v&&v[l]&&(d[h]=f.value,f={configurable:c in f?f[c]:v[c],enumerable:u in f?f[u]:v[u],writable:!1})}return s(d,h,f)}:s:function(d,h,f){if(n(d),h=i(h),n(f),t)try{return s(d,h,f)}catch{}if("get"in f||"set"in f)throw new o("Accessors not supported");return"value"in f&&(d[h]=f.value),d},zf}var qf,N_;function En(){if(N_)return qf;N_=1;var e=wr(),t=to(),r=Ic();return qf=e?function(n,i,o){return t.f(n,i,r(1,o))}:function(n,i,o){return n[i]=o,n},qf}var Bf,j_;function nr(){if(j_)return Bf;j_=1;var e=ut(),t=KO(),r=GO(),n=nt(),i=ik().f,o=ok(),s=ky(),a=bp(),u=En(),c=Tr();Ap();var l=function(p){var d=function(h,f,v){if(this instanceof d){switch(arguments.length){case 0:return new p;case 1:return new p(h);case 2:return new p(h,f)}return new p(h,f,v)}return t(p,this,arguments)};return d.prototype=p.prototype,d};return Bf=function(p,d){var h=p.target,f=p.global,v=p.stat,y=p.proto,g=f?e:v?e[h]:e[h]&&e[h].prototype,m=f?s:s[h]||u(s,h,{})[h],S=m.prototype,C,P,E,R,T,B,q,K,D;for(R in d)C=o(f?R:h+(v?".":"#")+R,p.forced),P=!C&&g&&c(g,R),B=m[R],P&&(p.dontCallGetSet?(D=i(g,R),q=D&&D.value):q=g[R]),T=P&&q?q:d[R],!(!C&&!y&&typeof B==typeof T)&&(p.bind&&P?K=a(T,e):p.wrap&&P?K=l(T):y&&n(T)?K=r(T):K=T,(p.sham||T&&T.sham||B&&B.sham)&&u(K,"sham",!0),u(m,R,K),y&&(E=h+"Prototype",c(s,E)||u(s,E,{}),u(s[E],R,T),p.real&&S&&(C||!S[R])&&u(S,R,T)))},Bf}var Ff,z_;function Ny(){if(z_)return Ff;z_=1;var e=ZO(),t=tk(),r=e("keys");return Ff=function(n){return r[n]||(r[n]=t(n))},Ff}var Uf,L_;function kq(){if(L_)return Uf;L_=1;var e=Vt();return Uf=!e(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Uf}var Vf,x_;function jy(){if(x_)return Vf;x_=1;var e=Tr(),t=nt(),r=ek(),n=Ny(),i=kq(),o=n("IE_PROTO"),s=Object,a=s.prototype;return Vf=i?s.getPrototypeOf:function(u){var c=r(u);if(e(c,o))return c[o];var l=c.constructor;return t(l)&&c instanceof l?l.prototype:c instanceof s?a:null},Vf}var Wf,q_;function Mq(){if(q_)return Wf;q_=1;var e=Mt(),t=_r();return Wf=function(r,n,i){try{return e(t(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Wf}var $f,B_;function Dq(){if(B_)return $f;B_=1;var e=hr();return $f=function(t){return e(t)||t===null},$f}var Hf,F_;function Nq(){if(F_)return Hf;F_=1;var e=Dq(),t=String,r=TypeError;return Hf=function(n){if(e(n))return n;throw new r("Can't set "+t(n)+" as a prototype")},Hf}var Kf,U_;function zy(){if(U_)return Kf;U_=1;var e=Mq(),t=hr(),r=wp(),n=Nq();return Kf=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,o={},s;try{s=e(Object.prototype,"__proto__","set"),s(o,[]),i=o instanceof Array}catch{}return function(u,c){return r(u),n(c),t(u)&&(i?s(u,c):u.__proto__=c),u}}():void 0),Kf}var Gf={},Jf,V_;function jq(){if(V_)return Jf;V_=1;var e=Math.ceil,t=Math.floor;return Jf=Math.trunc||function(n){var i=+n;return(i>0?t:e)(i)},Jf}var Qf,W_;function Ly(){if(W_)return Qf;W_=1;var e=jq();return Qf=function(t){var r=+t;return r!==r||r===0?0:e(r)},Qf}var Yf,$_;function zq(){if($_)return Yf;$_=1;var e=Ly(),t=Math.max,r=Math.min;return Yf=function(n,i){var o=e(n);return o<0?t(o+i,0):r(o,i)},Yf}var Xf,H_;function Lq(){if(H_)return Xf;H_=1;var e=Ly(),t=Math.min;return Xf=function(r){var n=e(r);return n>0?t(n,9007199254740991):0},Xf}var Zf,K_;function ak(){if(K_)return Zf;K_=1;var e=Lq();return Zf=function(t){return e(t.length)},Zf}var ev,G_;function xq(){if(G_)return ev;G_=1;var e=Ac(),t=zq(),r=ak(),n=function(i){return function(o,s,a){var u=e(o),c=r(u);if(c===0)return!i&&-1;var l=t(a,c),p;if(i&&s!==s){for(;c>l;)if(p=u[l++],p!==p)return!0}else for(;c>l;l++)if((i||l in u)&&u[l]===s)return i||l||0;return!i&&-1}};return ev={includes:n(!0),indexOf:n(!1)},ev}var tv,J_;function xy(){return J_||(J_=1,tv={}),tv}var rv,Q_;function uk(){if(Q_)return rv;Q_=1;var e=Mt(),t=Tr(),r=Ac(),n=xq().indexOf,i=xy(),o=e([].push);return rv=function(s,a){var u=r(s),c=0,l=[],p;for(p in u)!t(i,p)&&t(u,p)&&o(l,p);for(;a.length>c;)t(u,p=a[c++])&&(~n(l,p)||o(l,p));return l},rv}var nv,Y_;function qy(){return Y_||(Y_=1,nv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),nv}var X_;function qq(){if(X_)return Gf;X_=1;var e=uk(),t=qy(),r=t.concat("length","prototype");return Gf.f=Object.getOwnPropertyNames||function(i){return e(i,r)},Gf}var iv={},Z_;function Bq(){return Z_||(Z_=1,iv.f=Object.getOwnPropertySymbols),iv}var ov,eT;function Fq(){if(eT)return ov;eT=1;var e=Wr(),t=Mt(),r=qq(),n=Bq(),i=Hr(),o=t([].concat);return ov=e("Reflect","ownKeys")||function(a){var u=r.f(i(a)),c=n.f;return c?o(u,c(a)):u},ov}var sv,tT;function Uq(){if(tT)return sv;tT=1;var e=Tr(),t=Fq(),r=ik(),n=to();return sv=function(i,o,s){for(var a=t(o),u=n.f,c=r.f,l=0;l<a.length;l++){var p=a[l];!e(i,p)&&!(s&&e(s,p))&&u(i,p,c(o,p))}},sv}var av={},uv,rT;function Vq(){if(rT)return uv;rT=1;var e=uk(),t=qy();return uv=Object.keys||function(n){return e(n,t)},uv}var nT;function Wq(){if(nT)return av;nT=1;var e=wr(),t=sk(),r=to(),n=Hr(),i=Ac(),o=Vq();return av.f=e&&!t?Object.defineProperties:function(a,u){n(a);for(var c=i(u),l=o(u),p=l.length,d=0,h;p>d;)r.f(a,h=l[d++],c[h]);return a},av}var cv,iT;function ck(){if(iT)return cv;iT=1;var e=Wr();return cv=e("document","documentElement"),cv}var lv,oT;function By(){if(oT)return lv;oT=1;var e=Hr(),t=Wq(),r=qy(),n=xy(),i=ck(),o=Dy(),s=Ny(),a=">",u="<",c="prototype",l="script",p=s("IE_PROTO"),d=function(){},h=function(m){return u+l+a+m+u+"/"+l+a},f=function(m){m.write(h("")),m.close();var S=m.parentWindow.Object;return m=null,S},v=function(){var m=o("iframe"),S="java"+l+":",C;return m.style.display="none",i.appendChild(m),m.src=String(S),C=m.contentWindow.document,C.open(),C.write(h("document.F=Object")),C.close(),C.F},y,g=function(){try{y=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&y?f(y):v():f(y);for(var m=r.length;m--;)delete g[c][r[m]];return g()};return n[p]=!0,lv=Object.create||function(S,C){var P;return S!==null?(d[c]=e(S),P=new d,d[c]=null,P[p]=S):P=g(),C===void 0?P:t.f(P,C)},lv}var pv,sT;function $q(){if(sT)return pv;sT=1;var e=hr(),t=En();return pv=function(r,n){e(n)&&"cause"in n&&t(r,"cause",n.cause)},pv}var dv,aT;function Hq(){if(aT)return dv;aT=1;var e=Mt(),t=Error,r=e("".replace),n=function(s){return String(new t(s).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,o=i.test(n);return dv=function(s,a){if(o&&typeof s=="string"&&!t.prepareStackTrace)for(;a--;)s=r(s,i,"");return s},dv}var hv,uT;function Kq(){if(uT)return hv;uT=1;var e=Vt(),t=Ic();return hv=!e(function(){var r=new Error("a");return"stack"in r?(Object.defineProperty(r,"stack",t(1,7)),r.stack!==7):!0}),hv}var fv,cT;function Gq(){if(cT)return fv;cT=1;var e=En(),t=Hq(),r=Kq(),n=Error.captureStackTrace;return fv=function(i,o,s,a){r&&(n?n(i,o):e(i,"stack",t(s,a)))},fv}var vv,lT;function ro(){return lT||(lT=1,vv={}),vv}var gv,pT;function Jq(){if(pT)return gv;pT=1;var e=Wt(),t=ro(),r=e("iterator"),n=Array.prototype;return gv=function(i){return i!==void 0&&(t.Array===i||n[r]===i)},gv}var mv,dT;function Fy(){if(dT)return mv;dT=1;var e=Wt(),t=e("toStringTag"),r={};return r[t]="z",mv=String(r)==="[object z]",mv}var yv,hT;function Op(){if(hT)return yv;hT=1;var e=Fy(),t=nt(),r=Pp(),n=Wt(),i=n("toStringTag"),o=Object,s=r(function(){return arguments}())==="Arguments",a=function(u,c){try{return u[c]}catch{}};return yv=e?r:function(u){var c,l,p;return u===void 0?"Undefined":u===null?"Null":typeof(l=a(c=o(u),i))=="string"?l:s?r(c):(p=r(c))==="Object"&&t(c.callee)?"Arguments":p},yv}var Sv,fT;function lk(){if(fT)return Sv;fT=1;var e=Op(),t=My(),r=Ep(),n=ro(),i=Wt(),o=i("iterator");return Sv=function(s){if(!r(s))return t(s,o)||t(s,"@@iterator")||n[e(s)]},Sv}var Cv,vT;function Qq(){if(vT)return Cv;vT=1;var e=rr(),t=_r(),r=Hr(),n=Ip(),i=lk(),o=TypeError;return Cv=function(s,a){var u=arguments.length<2?i(s):a;if(t(u))return r(e(u,s));throw new o(n(s)+" is not iterable")},Cv}var Rv,gT;function Yq(){if(gT)return Rv;gT=1;var e=rr(),t=Hr(),r=My();return Rv=function(n,i,o){var s,a;t(n);try{if(s=r(n,"return"),!s){if(i==="throw")throw o;return o}s=e(s,n)}catch(u){a=!0,s=u}if(i==="throw")throw o;if(a)throw s;return t(s),o},Rv}var Pv,mT;function bc(){if(mT)return Pv;mT=1;var e=bp(),t=rr(),r=Hr(),n=Ip(),i=Jq(),o=ak(),s=_p(),a=Qq(),u=lk(),c=Yq(),l=TypeError,p=function(h,f){this.stopped=h,this.result=f},d=p.prototype;return Pv=function(h,f,v){var y=v&&v.that,g=!!(v&&v.AS_ENTRIES),m=!!(v&&v.IS_RECORD),S=!!(v&&v.IS_ITERATOR),C=!!(v&&v.INTERRUPTED),P=e(f,y),E,R,T,B,q,K,D,_=function(j){return E&&c(E,"normal",j),new p(!0,j)},w=function(j){return g?(r(j),C?P(j[0],j[1],_):P(j[0],j[1])):C?P(j,_):P(j)};if(m)E=h.iterator;else if(S)E=h;else{if(R=u(h),!R)throw new l(n(h)+" is not iterable");if(i(R)){for(T=0,B=o(h);B>T;T++)if(q=w(h[T]),q&&s(d,q))return q;return new p(!1)}E=a(h,R)}for(K=m?h.next:E.next;!(D=t(K,E)).done;){try{q=w(D.value)}catch(j){c(E,"throw",j)}if(typeof q=="object"&&q&&s(d,q))return q}return new p(!1)},Pv}var Ev,yT;function Uy(){if(yT)return Ev;yT=1;var e=Op(),t=String;return Ev=function(r){if(e(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return t(r)},Ev}var wv,ST;function Xq(){if(ST)return wv;ST=1;var e=Uy();return wv=function(t,r){return t===void 0?arguments.length<2?"":r:e(t)},wv}var CT;function Zq(){if(CT)return B1;CT=1;var e=nr(),t=_p(),r=jy(),n=zy(),i=Uq(),o=By(),s=En(),a=Ic(),u=$q(),c=Gq(),l=bc(),p=Xq(),d=Wt(),h=d("toStringTag"),f=Error,v=[].push,y=function(S,C){var P=t(g,this),E;n?E=n(new f,P?r(this):g):(E=P?this:o(g),s(E,h,"Error")),C!==void 0&&s(E,"message",p(C)),c(E,y,E.stack,1),arguments.length>2&&u(E,arguments[2]);var R=[];return l(S,v,{that:R}),s(E,"errors",R),E};n?n(y,f):i(y,f,{name:!0});var g=y.prototype=o(f.prototype,{constructor:a(1,y),message:a(1,""),name:a(1,"AggregateError")});return e({global:!0,constructor:!0,arity:2},{AggregateError:y}),B1}var RT;function e2(){return RT||(RT=1,Zq()),q1}var _v,PT;function t2(){return PT||(PT=1,_v=function(){}),_v}var Tv,ET;function r2(){if(ET)return Tv;ET=1;var e=ut(),t=nt(),r=e.WeakMap;return Tv=t(r)&&/native code/.test(String(r)),Tv}var Iv,wT;function Vy(){if(wT)return Iv;wT=1;var e=r2(),t=ut(),r=hr(),n=En(),i=Tr(),o=Ap(),s=Ny(),a=xy(),u="Object already initialized",c=t.TypeError,l=t.WeakMap,p,d,h,f=function(m){return h(m)?d(m):p(m,{})},v=function(m){return function(S){var C;if(!r(S)||(C=d(S)).type!==m)throw new c("Incompatible receiver, "+m+" required");return C}};if(e||o.state){var y=o.state||(o.state=new l);y.get=y.get,y.has=y.has,y.set=y.set,p=function(m,S){if(y.has(m))throw new c(u);return S.facade=m,y.set(m,S),S},d=function(m){return y.get(m)||{}},h=function(m){return y.has(m)}}else{var g=s("state");a[g]=!0,p=function(m,S){if(i(m,g))throw new c(u);return S.facade=m,n(m,g,S),S},d=function(m){return i(m,g)?m[g]:{}},h=function(m){return i(m,g)}}return Iv={set:p,get:d,has:h,enforce:f,getterFor:v},Iv}var Av,_T;function n2(){if(_T)return Av;_T=1;var e=wr(),t=Tr(),r=Function.prototype,n=e&&Object.getOwnPropertyDescriptor,i=t(r,"name"),o=i&&(function(){}).name==="something",s=i&&(!e||e&&n(r,"name").configurable);return Av={EXISTS:i,PROPER:o,CONFIGURABLE:s},Av}var bv,TT;function Oc(){if(TT)return bv;TT=1;var e=En();return bv=function(t,r,n,i){return i&&i.enumerable?t[r]=n:e(t,r,n),t},bv}var Ov,IT;function pk(){if(IT)return Ov;IT=1;var e=Vt(),t=nt(),r=hr(),n=By(),i=jy(),o=Oc(),s=Wt(),a=$r(),u=s("iterator"),c=!1,l,p,d;[].keys&&(d=[].keys(),"next"in d?(p=i(i(d)),p!==Object.prototype&&(l=p)):c=!0);var h=!r(l)||e(function(){var f={};return l[u].call(f)!==f});return h?l={}:a&&(l=n(l)),t(l[u])||o(l,u,function(){return this}),Ov={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:c},Ov}var kv,AT;function i2(){if(AT)return kv;AT=1;var e=Fy(),t=Op();return kv=e?{}.toString:function(){return"[object "+t(this)+"]"},kv}var Mv,bT;function kp(){if(bT)return Mv;bT=1;var e=Fy(),t=to().f,r=En(),n=Tr(),i=i2(),o=Wt(),s=o("toStringTag");return Mv=function(a,u,c,l){var p=c?a:a&&a.prototype;p&&(n(p,s)||t(p,s,{configurable:!0,value:u}),l&&!e&&r(p,"toString",i))},Mv}var Dv,OT;function o2(){if(OT)return Dv;OT=1;var e=pk().IteratorPrototype,t=By(),r=Ic(),n=kp(),i=ro(),o=function(){return this};return Dv=function(s,a,u,c){var l=a+" Iterator";return s.prototype=t(e,{next:r(+!c,u)}),n(s,l,!1,!0),i[l]=o,s},Dv}var Nv,kT;function dk(){if(kT)return Nv;kT=1;var e=nr(),t=rr(),r=$r(),n=n2(),i=nt(),o=o2(),s=jy(),a=zy(),u=kp(),c=En(),l=Oc(),p=Wt(),d=ro(),h=pk(),f=n.PROPER,v=n.CONFIGURABLE,y=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,m=p("iterator"),S="keys",C="values",P="entries",E=function(){return this};return Nv=function(R,T,B,q,K,D,_){o(B,T,q);var w=function(J){if(J===K&&b)return b;if(!g&&J&&J in z)return z[J];switch(J){case S:return function(){return new B(this,J)};case C:return function(){return new B(this,J)};case P:return function(){return new B(this,J)}}return function(){return new B(this)}},j=T+" Iterator",O=!1,z=R.prototype,I=z[m]||z["@@iterator"]||K&&z[K],b=!g&&I||w(K),L=T==="Array"&&z.entries||I,W,F,ie;if(L&&(W=s(L.call(new R)),W!==Object.prototype&&W.next&&(!r&&s(W)!==y&&(a?a(W,y):i(W[m])||l(W,m,E)),u(W,j,!0,!0),r&&(d[j]=E))),f&&K===C&&I&&I.name!==C&&(!r&&v?c(z,"name",C):(O=!0,b=function(){return t(I,this)})),K)if(F={values:w(C),keys:D?b:w(S),entries:w(P)},_)for(ie in F)(g||O||!(ie in z))&&l(z,ie,F[ie]);else e({target:T,proto:!0,forced:g||O},F);return(!r||_)&&z[m]!==b&&l(z,m,b,{name:K}),d[T]=b,F},Nv}var jv,MT;function hk(){return MT||(MT=1,jv=function(e,t){return{value:e,done:t}}),jv}var zv,DT;function fk(){if(DT)return zv;DT=1;var e=Ac(),t=t2(),r=ro(),n=Vy(),i=to().f,o=dk(),s=hk(),a=$r(),u=wr(),c="Array Iterator",l=n.set,p=n.getterFor(c);zv=o(Array,"Array",function(h,f){l(this,{type:c,target:e(h),index:0,kind:f})},function(){var h=p(this),f=h.target,v=h.index++;if(!f||v>=f.length)return h.target=void 0,s(void 0,!0);switch(h.kind){case"keys":return s(v,!1);case"values":return s(f[v],!1)}return s([v,f[v]],!1)},"values");var d=r.Arguments=r.Array;if(t("keys"),t("values"),t("entries"),!a&&u&&d.name!=="values")try{i(d,"name",{value:"values"})}catch{}return zv}var NT={},jT={},Lv,zT;function Mp(){if(zT)return Lv;zT=1;var e=ut(),t=Pp();return Lv=t(e.process)==="process",Lv}var xv,LT;function s2(){if(LT)return xv;LT=1;var e=to();return xv=function(t,r,n){return e.f(t,r,n)},xv}var qv,xT;function a2(){if(xT)return qv;xT=1;var e=Wr(),t=s2(),r=Wt(),n=wr(),i=r("species");return qv=function(o){var s=e(o);n&&s&&!s[i]&&t(s,i,{configurable:!0,get:function(){return this}})},qv}var Bv,qT;function u2(){if(qT)return Bv;qT=1;var e=_p(),t=TypeError;return Bv=function(r,n){if(e(n,r))return r;throw new t("Incorrect invocation")},Bv}var Fv,BT;function vk(){if(BT)return Fv;BT=1;var e=Mt(),t=nt(),r=Ap(),n=e(Function.toString);return t(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Fv=r.inspectSource,Fv}var Uv,FT;function c2(){if(FT)return Uv;FT=1;var e=Mt(),t=Vt(),r=nt(),n=Op(),i=Wr(),o=vk(),s=function(){},a=i("Reflect","construct"),u=/^\s*(?:class|function)\b/,c=e(u.exec),l=!u.test(s),p=function(f){if(!r(f))return!1;try{return a(s,[],f),!0}catch{return!1}},d=function(f){if(!r(f))return!1;switch(n(f)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!c(u,o(f))}catch{return!0}};return d.sham=!0,Uv=!a||t(function(){var h;return p(p.call)||!p(Object)||!p(function(){h=!0})||h})?d:p,Uv}var Vv,UT;function l2(){if(UT)return Vv;UT=1;var e=c2(),t=Ip(),r=TypeError;return Vv=function(n){if(e(n))return n;throw new r(t(n)+" is not a constructor")},Vv}var Wv,VT;function gk(){if(VT)return Wv;VT=1;var e=Hr(),t=l2(),r=Ep(),n=Wt(),i=n("species");return Wv=function(o,s){var a=e(o).constructor,u;return a===void 0||r(u=e(a)[i])?s:t(u)},Wv}var $v,WT;function p2(){if(WT)return $v;WT=1;var e=Mt();return $v=e([].slice),$v}var Hv,$T;function d2(){if($T)return Hv;$T=1;var e=TypeError;return Hv=function(t,r){if(t<r)throw new e("Not enough arguments");return t},Hv}var Kv,HT;function mk(){if(HT)return Kv;HT=1;var e=Tp();return Kv=/(?:ipad|iphone|ipod).*applewebkit/i.test(e),Kv}var Gv,KT;function yk(){if(KT)return Gv;KT=1;var e=ut(),t=KO(),r=bp(),n=nt(),i=Tr(),o=Vt(),s=ck(),a=p2(),u=Dy(),c=d2(),l=mk(),p=Mp(),d=e.setImmediate,h=e.clearImmediate,f=e.process,v=e.Dispatch,y=e.Function,g=e.MessageChannel,m=e.String,S=0,C={},P="onreadystatechange",E,R,T,B;o(function(){E=e.location});var q=function(w){if(i(C,w)){var j=C[w];delete C[w],j()}},K=function(w){return function(){q(w)}},D=function(w){q(w.data)},_=function(w){e.postMessage(m(w),E.protocol+"//"+E.host)};return(!d||!h)&&(d=function(j){c(arguments.length,1);var O=n(j)?j:y(j),z=a(arguments,1);return C[++S]=function(){t(O,void 0,z)},R(S),S},h=function(j){delete C[j]},p?R=function(w){f.nextTick(K(w))}:v&&v.now?R=function(w){v.now(K(w))}:g&&!l?(T=new g,B=T.port2,T.port1.onmessage=D,R=r(B.postMessage,B)):e.addEventListener&&n(e.postMessage)&&!e.importScripts&&E&&E.protocol!=="file:"&&!o(_)?(R=_,e.addEventListener("message",D,!1)):P in u("script")?R=function(w){s.appendChild(u("script"))[P]=function(){s.removeChild(this),q(w)}}:R=function(w){setTimeout(K(w),0)}),Gv={set:d,clear:h},Gv}var Jv,GT;function h2(){if(GT)return Jv;GT=1;var e=ut(),t=wr(),r=Object.getOwnPropertyDescriptor;return Jv=function(n){if(!t)return e[n];var i=r(e,n);return i&&i.value},Jv}var Qv,JT;function Sk(){if(JT)return Qv;JT=1;var e=function(){this.head=null,this.tail=null};return e.prototype={add:function(t){var r={item:t,next:null},n=this.tail;n?n.next=r:this.head=r,this.tail=r},get:function(){var t=this.head;if(t){var r=this.head=t.next;return r===null&&(this.tail=null),t.item}}},Qv=e,Qv}var Yv,QT;function f2(){if(QT)return Yv;QT=1;var e=Tp();return Yv=/ipad|iphone|ipod/i.test(e)&&typeof Pebble<"u",Yv}var Xv,YT;function v2(){if(YT)return Xv;YT=1;var e=Tp();return Xv=/web0s(?!.*chrome)/i.test(e),Xv}var Zv,XT;function g2(){if(XT)return Zv;XT=1;var e=ut(),t=h2(),r=bp(),n=yk().set,i=Sk(),o=mk(),s=f2(),a=v2(),u=Mp(),c=e.MutationObserver||e.WebKitMutationObserver,l=e.document,p=e.process,d=e.Promise,h=t("queueMicrotask"),f,v,y,g,m;if(!h){var S=new i,C=function(){var P,E;for(u&&(P=p.domain)&&P.exit();E=S.get();)try{E()}catch(R){throw S.head&&f(),R}P&&P.enter()};!o&&!u&&!a&&c&&l?(v=!0,y=l.createTextNode(""),new c(C).observe(y,{characterData:!0}),f=function(){y.data=v=!v}):!s&&d&&d.resolve?(g=d.resolve(void 0),g.constructor=d,m=r(g.then,g),f=function(){m(C)}):u?f=function(){p.nextTick(C)}:(n=r(n,e),f=function(){n(C)}),h=function(P){S.head||f(),S.add(P)}}return Zv=h,Zv}var eg,ZT;function m2(){return ZT||(ZT=1,eg=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch{}}),eg}var tg,eI;function kc(){return eI||(eI=1,tg=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}),tg}var rg,tI;function no(){if(tI)return rg;tI=1;var e=ut();return rg=e.Promise,rg}var ng,rI;function Ck(){return rI||(rI=1,ng=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"),ng}var ig,nI;function y2(){if(nI)return ig;nI=1;var e=Ck(),t=Mp();return ig=!e&&!t&&typeof window=="object"&&typeof document=="object",ig}var og,iI;function Mc(){if(iI)return og;iI=1;var e=ut(),t=no(),r=nt(),n=ok(),i=vk(),o=Wt(),s=y2(),a=Ck(),u=$r(),c=JO(),l=t&&t.prototype,p=o("species"),d=!1,h=r(e.PromiseRejectionEvent),f=n("Promise",function(){var v=i(t),y=v!==String(t);if(!y&&c===66||u&&!(l.catch&&l.finally))return!0;if(!c||c<51||!/native code/.test(v)){var g=new t(function(C){C(1)}),m=function(C){C(function(){},function(){})},S=g.constructor={};if(S[p]=m,d=g.then(function(){})instanceof m,!d)return!0}return!y&&(s||a)&&!h});return og={CONSTRUCTOR:f,REJECTION_EVENT:h,SUBCLASSING:d},og}var sg={},oI;function wn(){if(oI)return sg;oI=1;var e=_r(),t=TypeError,r=function(n){var i,o;this.promise=new n(function(s,a){if(i!==void 0||o!==void 0)throw new t("Bad Promise constructor");i=s,o=a}),this.resolve=e(i),this.reject=e(o)};return sg.f=function(n){return new r(n)},sg}var sI;function S2(){if(sI)return jT;sI=1;var e=nr(),t=$r(),r=Mp(),n=ut(),i=rr(),o=Oc(),s=zy(),a=kp(),u=a2(),c=_r(),l=nt(),p=hr(),d=u2(),h=gk(),f=yk().set,v=g2(),y=m2(),g=kc(),m=Sk(),S=Vy(),C=no(),P=Mc(),E=wn(),R="Promise",T=P.CONSTRUCTOR,B=P.REJECTION_EVENT,q=P.SUBCLASSING,K=S.getterFor(R),D=S.set,_=C&&C.prototype,w=C,j=_,O=n.TypeError,z=n.document,I=n.process,b=E.f,L=b,W=!!(z&&z.createEvent&&n.dispatchEvent),F="unhandledrejection",ie="rejectionhandled",J=0,Se=1,Q=2,X=1,ge=2,de,te,qe,Ee,Be=function(U){var re;return p(U)&&l(re=U.then)?re:!1},oe=function(U,re){var fe=re.value,ce=re.state===Se,ve=ce?U.ok:U.fail,Ge=U.resolve,Ce=U.reject,Ie=U.domain,le,se,Ue;try{ve?(ce||(re.rejection===ge&&mt(re),re.rejection=X),ve===!0?le=fe:(Ie&&Ie.enter(),le=ve(fe),Ie&&(Ie.exit(),Ue=!0)),le===U.promise?Ce(new O("Promise-chain cycle")):(se=Be(le))?i(se,le,Ge,Ce):Ge(le)):Ce(fe)}catch(Ae){Ie&&!Ue&&Ie.exit(),Ce(Ae)}},Fe=function(U,re){U.notified||(U.notified=!0,v(function(){for(var fe=U.reactions,ce;ce=fe.get();)oe(ce,U);U.notified=!1,re&&!U.rejection&&it(U)}))},$e=function(U,re,fe){var ce,ve;W?(ce=z.createEvent("Event"),ce.promise=re,ce.reason=fe,ce.initEvent(U,!1,!0),n.dispatchEvent(ce)):ce={promise:re,reason:fe},!B&&(ve=n["on"+U])?ve(ce):U===F&&y("Unhandled promise rejection",fe)},it=function(U){i(f,n,function(){var re=U.facade,fe=U.value,ce=he(U),ve;if(ce&&(ve=g(function(){r?I.emit("unhandledRejection",fe,re):$e(F,re,fe)}),U.rejection=r||he(U)?ge:X,ve.error))throw ve.value})},he=function(U){return U.rejection!==X&&!U.parent},mt=function(U){i(f,n,function(){var re=U.facade;r?I.emit("rejectionHandled",re):$e(ie,re,U.value)})},He=function(U,re,fe){return function(ce){U(re,ce,fe)}},_e=function(U,re,fe){U.done||(U.done=!0,fe&&(U=fe),U.value=re,U.state=Q,Fe(U,!0))},Ke=function(U,re,fe){if(!U.done){U.done=!0,fe&&(U=fe);try{if(U.facade===re)throw new O("Promise can't be resolved itself");var ce=Be(re);ce?v(function(){var ve={done:!1};try{i(ce,re,He(Ke,ve,U),He(_e,ve,U))}catch(Ge){_e(ve,Ge,U)}}):(U.value=re,U.state=Se,Fe(U,!1))}catch(ve){_e({done:!1},ve,U)}}};if(T&&(w=function(re){d(this,j),c(re),i(de,this);var fe=K(this);try{re(He(Ke,fe),He(_e,fe))}catch(ce){_e(fe,ce)}},j=w.prototype,de=function(re){D(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new m,rejection:!1,state:J,value:void 0})},de.prototype=o(j,"then",function(re,fe){var ce=K(this),ve=b(h(this,w));return ce.parent=!0,ve.ok=l(re)?re:!0,ve.fail=l(fe)&&fe,ve.domain=r?I.domain:void 0,ce.state===J?ce.reactions.add(ve):v(function(){oe(ve,ce)}),ve.promise}),te=function(){var U=new de,re=K(U);this.promise=U,this.resolve=He(Ke,re),this.reject=He(_e,re)},E.f=b=function(U){return U===w||U===qe?new te(U):L(U)},!t&&l(C)&&_!==Object.prototype)){Ee=_.then,q||o(_,"then",function(re,fe){var ce=this;return new w(function(ve,Ge){i(Ee,ce,ve,Ge)}).then(re,fe)},{unsafe:!0});try{delete _.constructor}catch{}s&&s(_,j)}return e({global:!0,constructor:!0,wrap:!0,forced:T},{Promise:w}),a(w,R,!1,!0),u(R),jT}var aI={},ag,uI;function C2(){if(uI)return ag;uI=1;var e=Wt(),t=e("iterator"),r=!1;try{var n=0,i={next:function(){return{done:!!n++}},return:function(){r=!0}};i[t]=function(){return this},Array.from(i,function(){throw 2})}catch{}return ag=function(o,s){try{if(!s&&!r)return!1}catch{return!1}var a=!1;try{var u={};u[t]=function(){return{next:function(){return{done:a=!0}}}},o(u)}catch{}return a},ag}var ug,cI;function Dp(){if(cI)return ug;cI=1;var e=no(),t=C2(),r=Mc().CONSTRUCTOR;return ug=r||!t(function(n){e.all(n).then(void 0,function(){})}),ug}var lI;function R2(){if(lI)return aI;lI=1;var e=nr(),t=rr(),r=_r(),n=wn(),i=kc(),o=bc(),s=Dp();return e({target:"Promise",stat:!0,forced:s},{all:function(u){var c=this,l=n.f(c),p=l.resolve,d=l.reject,h=i(function(){var f=r(c.resolve),v=[],y=0,g=1;o(u,function(m){var S=y++,C=!1;g++,t(f,c,m).then(function(P){C||(C=!0,v[S]=P,--g||p(v))},d)}),--g||p(v)});return h.error&&d(h.value),l.promise}}),aI}var pI={},dI;function P2(){if(dI)return pI;dI=1;var e=nr(),t=$r(),r=Mc().CONSTRUCTOR,n=no(),i=Wr(),o=nt(),s=Oc(),a=n&&n.prototype;if(e({target:"Promise",proto:!0,forced:r,real:!0},{catch:function(c){return this.then(void 0,c)}}),!t&&o(n)){var u=i("Promise").prototype.catch;a.catch!==u&&s(a,"catch",u,{unsafe:!0})}return pI}var hI={},fI;function E2(){if(fI)return hI;fI=1;var e=nr(),t=rr(),r=_r(),n=wn(),i=kc(),o=bc(),s=Dp();return e({target:"Promise",stat:!0,forced:s},{race:function(u){var c=this,l=n.f(c),p=l.reject,d=i(function(){var h=r(c.resolve);o(u,function(f){t(h,c,f).then(l.resolve,p)})});return d.error&&p(d.value),l.promise}}),hI}var vI={},gI;function w2(){if(gI)return vI;gI=1;var e=nr(),t=wn(),r=Mc().CONSTRUCTOR;return e({target:"Promise",stat:!0,forced:r},{reject:function(i){var o=t.f(this),s=o.reject;return s(i),o.promise}}),vI}var mI={},cg,yI;function Rk(){if(yI)return cg;yI=1;var e=Hr(),t=hr(),r=wn();return cg=function(n,i){if(e(n),t(i)&&i.constructor===n)return i;var o=r.f(n),s=o.resolve;return s(i),o.promise},cg}var SI;function _2(){if(SI)return mI;SI=1;var e=nr(),t=Wr(),r=$r(),n=no(),i=Mc().CONSTRUCTOR,o=Rk(),s=t("Promise"),a=r&&!i;return e({target:"Promise",stat:!0,forced:r||i},{resolve:function(c){return o(a&&this===s?n:this,c)}}),mI}var CI;function T2(){return CI||(CI=1,S2(),R2(),P2(),E2(),w2(),_2()),NT}var RI={},PI;function I2(){if(PI)return RI;PI=1;var e=nr(),t=rr(),r=_r(),n=wn(),i=kc(),o=bc(),s=Dp();return e({target:"Promise",stat:!0,forced:s},{allSettled:function(u){var c=this,l=n.f(c),p=l.resolve,d=l.reject,h=i(function(){var f=r(c.resolve),v=[],y=0,g=1;o(u,function(m){var S=y++,C=!1;g++,t(f,c,m).then(function(P){C||(C=!0,v[S]={status:"fulfilled",value:P},--g||p(v))},function(P){C||(C=!0,v[S]={status:"rejected",reason:P},--g||p(v))})}),--g||p(v)});return h.error&&d(h.value),l.promise}}),RI}var EI={},wI;function A2(){if(wI)return EI;wI=1;var e=nr(),t=rr(),r=_r(),n=Wr(),i=wn(),o=kc(),s=bc(),a=Dp(),u="No one promise resolved";return e({target:"Promise",stat:!0,forced:a},{any:function(l){var p=this,d=n("AggregateError"),h=i.f(p),f=h.resolve,v=h.reject,y=o(function(){var g=r(p.resolve),m=[],S=0,C=1,P=!1;s(l,function(E){var R=S++,T=!1;C++,t(g,p,E).then(function(B){T||P||(P=!0,f(B))},function(B){T||P||(T=!0,m[R]=B,--C||v(new d(m,u)))})}),--C||v(new d(m,u))});return y.error&&v(y.value),h.promise}}),EI}var _I={},TI;function b2(){if(TI)return _I;TI=1;var e=nr(),t=wn();return e({target:"Promise",stat:!0},{withResolvers:function(){var n=t.f(this);return{promise:n.promise,resolve:n.resolve,reject:n.reject}}}),_I}var II={},AI;function O2(){if(AI)return II;AI=1;var e=nr(),t=$r(),r=no(),n=Vt(),i=Wr(),o=nt(),s=gk(),a=Rk(),u=Oc(),c=r&&r.prototype,l=!!r&&n(function(){c.finally.call({then:function(){}},function(){})});if(e({target:"Promise",proto:!0,real:!0,forced:l},{finally:function(d){var h=s(this,i("Promise")),f=o(d);return this.then(f?function(v){return a(h,d()).then(function(){return v})}:d,f?function(v){return a(h,d()).then(function(){throw v})}:d)}}),!t&&o(r)){var p=i("Promise").prototype.finally;c.finally!==p&&u(c,"finally",p,{unsafe:!0})}return II}var bI={},lg,OI;function k2(){if(OI)return lg;OI=1;var e=Mt(),t=Ly(),r=Uy(),n=wp(),i=e("".charAt),o=e("".charCodeAt),s=e("".slice),a=function(u){return function(c,l){var p=r(n(c)),d=t(l),h=p.length,f,v;return d<0||d>=h?u?"":void 0:(f=o(p,d),f<55296||f>56319||d+1===h||(v=o(p,d+1))<56320||v>57343?u?i(p,d):f:u?s(p,d,d+2):(f-55296<<10)+(v-56320)+65536)}};return lg={codeAt:a(!1),charAt:a(!0)},lg}var kI;function M2(){if(kI)return bI;kI=1;var e=k2().charAt,t=Uy(),r=Vy(),n=dk(),i=hk(),o="String Iterator",s=r.set,a=r.getterFor(o);return n(String,"String",function(u){s(this,{type:o,string:t(u),index:0})},function(){var c=a(this),l=c.string,p=c.index,d;return p>=l.length?i(void 0,!0):(d=e(l,p),c.index+=d.length,i(d,!1))}),bI}var pg,MI;function D2(){if(MI)return pg;MI=1,e2(),fk(),T2(),I2(),A2(),b2(),O2(),M2();var e=ky();return pg=e.Promise,pg}var DI={},dg,NI;function N2(){return NI||(NI=1,dg={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),dg}var jI;function j2(){if(jI)return DI;jI=1,fk();var e=N2(),t=ut(),r=kp(),n=ro();for(var i in e)r(t[i],i),n[i]=n.Array;return DI}var hg,zI;function z2(){if(zI)return hg;zI=1;var e=D2();return j2(),hg=e,hg}var fg,LI;function L2(){return LI||(LI=1,fg=z2()),fg}var vg,xI;function Pk(){if(xI)return vg;xI=1;var e=_q().default,t=e(L2());function r(){var n={};return n.promise=new t.default(function(i,o){n.resolve=i,n.reject=o}),n}return vg=r,vg}var qI;function x2(){if(qI)return Zc;qI=1;var e=rt;Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.default=r;var t=e(Pk());function r(){var n,i=[],o=function(u){if(n){var c=n,l=c.resolve;n=null,l(u)}else i.push(u)},s=function(){return i.length?Promise.resolve(i.shift()):(n||(n=(0,t.default)())).promise};return{push:o,shift:s}}return Zc}var el={},gg={exports:{}},mg={exports:{}},BI;function q2(){return BI||(BI=1,function(e){function t(r,n){if(r==null)return{};var i={},o=Object.keys(r),s,a;for(a=0;a<o.length;a++)s=o[a],!(n.indexOf(s)>=0)&&(i[s]=r[s]);return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(mg)),mg.exports}var FI;function B2(){return FI||(FI=1,function(e){var t=q2();function r(n,i){if(n==null)return{};var o=t(n,i),s,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(a=0;a<u.length;a++)s=u[a],!(i.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(o[s]=n[s])}return o}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(gg)),gg.exports}var tl={},UI;function F2(){if(UI)return tl;UI=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.default=e;function e(t){return typeof t=="function"?t():t}return tl}var VI;function Ek(){if(VI)return el;VI=1;var e=rt;Object.defineProperty(el,"__esModule",{value:!0}),el.default=l;var t=e(Rr()),r=e(Rn()),n=e(Pr()),i=e(B2()),o=e(F2()),s=["authorizationToken","credentials","looseEvent","looseEvents","region","subscriptionKey"];function a(p,d){var h=Object.keys(p);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(p);d&&(f=f.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),h.push.apply(h,f)}return h}function u(p){for(var d=1;d<arguments.length;d++){var h=arguments[d]!=null?arguments[d]:{};d%2?a(Object(h),!0).forEach(function(f){(0,r.default)(p,f,h[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(h)):a(Object(h)).forEach(function(f){Object.defineProperty(p,f,Object.getOwnPropertyDescriptor(h,f))})}return p}var c=!0;function l(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=p.authorizationToken,h=p.credentials,f=p.looseEvent,v=p.looseEvents,y=p.region,g=y===void 0?"westus":y,m=p.subscriptionKey,S=(0,i.default)(p,s);if(typeof f<"u"&&(console.warn('web-speech-cognitive-services: The option "looseEvent" should be named as "looseEvents".'),v=f),!h){if(!d&&!m)throw new Error("web-speech-cognitive-services: Credentials must be specified.");console.warn("web-speech-cognitive-services: We are deprecating authorizationToken, region, and subscriptionKey. Please use credentials instead. The deprecated option will be removed on or after 2020-11-14."),h=function(){var C=(0,n.default)(t.default.mark(function P(){return t.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!d){R.next=8;break}return R.next=3,(0,o.default)(d);case 3:R.t1=R.sent,R.t2=g,R.t0={authorizationToken:R.t1,region:R.t2},R.next=13;break;case 8:return R.t3=g,R.next=11,(0,o.default)(m);case 11:R.t4=R.sent,R.t0={region:R.t3,subscriptionKey:R.t4};case 13:return R.abrupt("return",R.t0);case 14:case"end":return R.stop()}},P)}));return function(){return C.apply(this,arguments)}}()}return u(u({},S),{},{fetchCredentials:function(){var C=(0,n.default)(t.default.mark(function E(){var R,T,B,q,K,D,_,w;return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,o.default)(h);case 2:if(R=O.sent,T=R.authorizationToken,B=R.customVoiceHostname,q=R.region,K=R.speechRecognitionHostname,D=R.speechSynthesisHostname,_=R.subscriptionKey,!(!T&&!_||T&&_)){O.next=13;break}throw new Error('web-speech-cognitive-services: Either "authorizationToken" or "subscriptionKey" must be provided.');case 13:if(!(!q&&!(K&&D))){O.next=17;break}throw new Error('web-speech-cognitive-services: Either "region" or "speechRecognitionHostname" and "speechSynthesisHostname" must be set.');case 17:if(!(q&&(B||K||D))){O.next=21;break}throw new Error('web-speech-cognitive-services: Only either "region" or "customVoiceHostname", "speechRecognitionHostname" and "speechSynthesisHostname" can be set.');case 21:if(!T){O.next=26;break}if(typeof T=="string"){O.next=24;break}throw new Error('web-speech-cognitive-services: "authorizationToken" must be a string.');case 24:O.next=28;break;case 26:if(typeof _=="string"){O.next=28;break}throw new Error('web-speech-cognitive-services: "subscriptionKey" must be a string.');case 28:return c&&_&&(console.warn("web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead."),c=!1),w=T?{authorizationToken:T}:{subscriptionKey:_},q?w.region=q:(w.customVoiceHostname=B,w.speechRecognitionHostname=K,w.speechSynthesisHostname=D),O.abrupt("return",w);case 32:case"end":return O.stop()}},E)}));function P(){return C.apply(this,arguments)}return P}(),looseEvents:v})}return el}var Au={},WI;function U2(){if(WI)return Au;WI=1;var e=rt;Object.defineProperty(Au,"__esModule",{value:!0}),Au.default=void 0;var t=e(Vr()),r=e(Ur()),n=function(){function i(){(0,t.default)(this,i),this._phrases=[]}return(0,r.default)(i,[{key:"addFromString",value:function(){throw new Error("JSGF is not supported")}},{key:"phrases",get:function(){return this._phrases},set:function(s){if(Array.isArray(s))this._phrases=s;else if(typeof s=="string")this._phrases=[s];else throw new Error("The provided value is not an array or of type 'string'")}}]),i}();return Au.default=n,Au}var $I;function V2(){if($I)return Si;$I=1;var e=rt;Object.defineProperty(Si,"__esModule",{value:!0}),Si.createSpeechRecognitionPonyfillFromRecognizer=w,Si.default=void 0;var t=e(Rr()),r=e(Bb()),n=e(Rn()),i=e(Pr()),o=e(Ur()),s=e(Vr()),a=e(Pc()),u=e(Ec()),c=e(hi()),l=yp(),p=e(wq()),d=e(x2()),h=e(Ek()),f=e(U2()),v=e(HO());function y(O,z){var I=Object.keys(O);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(O);z&&(b=b.filter(function(L){return Object.getOwnPropertyDescriptor(O,L).enumerable})),I.push.apply(I,b)}return I}function g(O){for(var z=1;z<arguments.length;z++){var I=arguments[z]!=null?arguments[z]:{};z%2?y(Object(I),!0).forEach(function(b){(0,n.default)(O,b,I[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(I)):y(Object(I)).forEach(function(b){Object.defineProperty(O,b,Object.getOwnPropertyDescriptor(I,b))})}return O}function m(O){var z=S();return function(){var b=(0,c.default)(O),L;if(z){var W=(0,c.default)(this).constructor;L=Reflect.construct(b,arguments,W)}else L=b.apply(this,arguments);return(0,u.default)(this,L)}}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C=v.default.AudioConfig,P=v.default.OutputFormat,E=v.default.ResultReason,R=v.default.SpeechConfig,T=v.default.SpeechRecognizer;function B(O){var z=O.duration,I=O.errorDetails,b=O.json,L=O.offset,W=O.properties,F=O.reason,ie=O.resultId,J=O.text;return{duration:z,errorDetails:I,json:JSON.parse(b),offset:L,properties:W,reason:F,resultId:ie,text:J}}function q(O){var z=new Int16Array(O);return[].reduce.call(z,function(I,b){return I+Math.abs(b)},0)/z.length}function K(O){return function(){for(var z=arguments.length,I=new Array(z),b=0;b<z;b++)I[b]=arguments[b];return new Promise(function(L,W){return O.apply(void 0,I.concat([L,W]))})}}var D=function(O){(0,a.default)(I,O);var z=m(I);function I(b){var L,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=W.data,ie=W.emma,J=W.interpretation,Se=W.resultIndex,Q=W.results;return(0,s.default)(this,I),L=z.call(this,b),L.data=F,L.emma=ie,L.interpretation=J,L.resultIndex=Se,L.results=Q,L}return(0,o.default)(I)}(l.Event);function _(O){var z=O.attach,I=O.attach.bind(O),b,L;return O.attach=(0,i.default)(t.default.mark(function W(){var F;return t.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,I();case 2:return F=J.sent,J.abrupt("return",g(g({},F),{},{read:function(){var Se=(0,i.default)(t.default.mark(function X(){var ge;return t.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,F.read();case 2:if(ge=te.sent,!b&&q(ge.buffer)>150&&(O.events.onEvent({name:"FirstAudibleChunk"}),b=!0),!L){te.next=6;break}return te.abrupt("return",{buffer:new ArrayBuffer(0),isEnd:!0,timeReceived:Date.now()});case 6:return te.abrupt("return",ge);case 7:case"end":return te.stop()}},X)}));function Q(){return Se.apply(this,arguments)}return Q}()}));case 4:case"end":return J.stop()}},W)})),{audioConfig:O,pause:function(){L=!0},unprepare:function(){O.attach=z}}}function w(O){var z=O.createRecognizer,I=O.enableTelemetry,b=O.looseEvents,L=O.referenceGrammars,W=O.textNormalization;T.enableTelemetry(I!==!1);var F=function(ie){(0,a.default)(Se,ie);var J=m(Se);function Se(){var Q;return(0,s.default)(this,Se),Q=J.call(this),Q._continuous=!1,Q._interimResults=!1,Q._lang=typeof window<"u"?window.document.documentElement.getAttribute("lang")||window.navigator.language:"en-US",Q._grammars=new f.default,Q._maxAlternatives=1,Q}return(0,o.default)(Se,[{key:"emitCognitiveServices",value:function(X,ge){this.dispatchEvent(new D("cognitiveservices",{data:g(g({},ge),{},{type:X})}))}},{key:"continuous",get:function(){return this._continuous},set:function(X){this._continuous=X}},{key:"grammars",get:function(){return this._grammars},set:function(X){if(X instanceof f.default)this._grammars=X;else throw new Error("The provided value is not of type 'SpeechGrammarList'")}},{key:"interimResults",get:function(){return this._interimResults},set:function(X){this._interimResults=X}},{key:"maxAlternatives",get:function(){return this._maxAlternatives},set:function(X){this._maxAlternatives=X}},{key:"lang",get:function(){return this._lang},set:function(X){this._lang=X}},{key:"onaudioend",get:function(){return(0,l.getEventAttributeValue)(this,"audioend")},set:function(X){(0,l.setEventAttributeValue)(this,"audioend",X)}},{key:"onaudiostart",get:function(){return(0,l.getEventAttributeValue)(this,"audiostart")},set:function(X){(0,l.setEventAttributeValue)(this,"audiostart",X)}},{key:"oncognitiveservices",get:function(){return(0,l.getEventAttributeValue)(this,"cognitiveservices")},set:function(X){(0,l.setEventAttributeValue)(this,"cognitiveservices",X)}},{key:"onend",get:function(){return(0,l.getEventAttributeValue)(this,"end")},set:function(X){(0,l.setEventAttributeValue)(this,"end",X)}},{key:"onerror",get:function(){return(0,l.getEventAttributeValue)(this,"error")},set:function(X){(0,l.setEventAttributeValue)(this,"error",X)}},{key:"onresult",get:function(){return(0,l.getEventAttributeValue)(this,"result")},set:function(X){(0,l.setEventAttributeValue)(this,"result",X)}},{key:"onsoundend",get:function(){return(0,l.getEventAttributeValue)(this,"soundend")},set:function(X){(0,l.setEventAttributeValue)(this,"soundend",X)}},{key:"onsoundstart",get:function(){return(0,l.getEventAttributeValue)(this,"soundstart")},set:function(X){(0,l.setEventAttributeValue)(this,"soundstart",X)}},{key:"onspeechend",get:function(){return(0,l.getEventAttributeValue)(this,"speechend")},set:function(X){(0,l.setEventAttributeValue)(this,"speechend",X)}},{key:"onspeechstart",get:function(){return(0,l.getEventAttributeValue)(this,"speechstart")},set:function(X){(0,l.setEventAttributeValue)(this,"speechstart",X)}},{key:"onstart",get:function(){return(0,l.getEventAttributeValue)(this,"start")},set:function(X){(0,l.setEventAttributeValue)(this,"start",X)}},{key:"start",value:function(){var X=this;this._startOnce().catch(function(ge){X.dispatchEvent(new ErrorEvent("error",{error:ge,message:ge&&(ge.stack||ge.message)}))})}},{key:"_startOnce",value:function(){var Q=(0,i.default)(t.default.mark(function ge(){var de=this,te,qe,Ee,Be,oe,Fe,$e,it,he,mt,He,_e,Ke,U,re,fe,ce,ve;return t.default.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,z(this.lang);case 2:return te=Ce.sent,qe=_(te.audioConfig),Ee=qe.pause,Be=qe.unprepare,Ce.prev=4,oe=(0,d.default)(),he=te.audioConfig.events.attach(function(Ie){var le=Ie.name;le==="AudioSourceReadyEvent"?oe.push({audioSourceReady:{}}):le==="AudioSourceOffEvent"?oe.push({audioSourceOff:{}}):le==="FirstAudibleChunk"&&oe.push({firstAudibleChunk:{}})}),mt=he.detach,te.canceled=function(Ie,le){var se=le.errorDetails,Ue=le.offset,Ae=le.reason,be=le.sessionId;oe.push({canceled:{errorDetails:se,offset:Ue,reason:Ae,sessionId:be}})},te.recognized=function(Ie,le){var se=le.offset,Ue=le.result,Ae=le.sessionId;oe.push({recognized:{offset:se,result:B(Ue),sessionId:Ae}})},te.recognizing=function(Ie,le){var se=le.offset,Ue=le.result,Ae=le.sessionId;oe.push({recognizing:{offset:se,result:B(Ue),sessionId:Ae}})},te.sessionStarted=function(Ie,le){var se=le.sessionId;oe.push({sessionStarted:{sessionId:se}})},te.sessionStopped=function(Ie,le){var se=le.sessionId;oe.push({sessionStopped:{sessionId:se}})},te.speechStartDetected=function(Ie,le){var se=le.offset,Ue=le.sessionId;oe.push({speechStartDetected:{offset:se,sessionId:Ue}})},te.speechEndDetected=function(Ie,le){var se=le.sessionId;oe.push({speechEndDetected:{sessionId:se}})},He=this.grammars.phrases,_e=te.privReco.dynamicGrammar,L&&L.length&&_e.addReferenceGrammar(L),He&&He.length&&_e.addPhrase(He),Ce.next=20,K(te.startContinuousRecognitionAsync.bind(te))();case 20:te.stopContinuousRecognitionAsync?(this.abort=function(){return oe.push({abort:{}})},this.stop=function(){return oe.push({stop:{}})}):this.abort=this.stop=void 0,re=[],fe=t.default.mark(function Ie(le){var se,Ue,Ae,be,Xe,yt,Je,_t,$t,Ht,Kt,Gt;return t.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,oe.shift();case 2:if(se=Re.sent,Ue=se.abort,Ae=se.audioSourceOff,be=se.audioSourceReady,Xe=se.canceled,yt=se.firstAudibleChunk,Je=se.recognized,_t=se.recognizing,$t=se.stop,Object.keys(se).forEach(function(Dt){return de.emitCognitiveServices(Dt,se[Dt])}),Ht=Xe&&Xe.errorDetails,!/Permission[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]denied/.test(Ht||"")){Re.next=9;break}return U={error:"not-allowed",type:"error"},Re.abrupt("return","break");case 9:if(le||de.dispatchEvent(new D("start")),!Ht){Re.next=15;break}return/1006/.test(Ht)?(Ke||(de.dispatchEvent(new D("audiostart")),de.dispatchEvent(new D("audioend"))),U={error:"network",type:"error"}):U={error:"unknown",type:"error"},Re.abrupt("return","break");case 15:if(!(Ue||$t)){Re.next=22;break}if(Ue?(U={error:"aborted",type:"error"},it="abort"):(Ee(),it="stop"),!(Ue&&te.stopContinuousRecognitionAsync)){Re.next=20;break}return Re.next=20,K(te.stopContinuousRecognitionAsync.bind(te))();case 20:Re.next=61;break;case 22:if(!be){Re.next=27;break}de.dispatchEvent(new D("audiostart")),Ke=!0,Re.next=61;break;case 27:if(!yt){Re.next=32;break}de.dispatchEvent(new D("soundstart")),Fe=!0,Re.next=61;break;case 32:if(!Ae){Re.next=40;break}return $e&&de.dispatchEvent(new D("speechend")),Fe&&de.dispatchEvent(new D("soundend")),Ke&&de.dispatchEvent(new D("audioend")),Ke=Fe=$e=!1,Re.abrupt("return","break");case 40:if(it==="abort"){Re.next=61;break}if(!(Je&&Je.result&&Je.result.reason===E.NoMatch)){Re.next=45;break}U={error:"no-speech",type:"error"},Re.next=61;break;case 45:if(!(Je||_t)){Re.next=61;break}if(Ke||(de.dispatchEvent(new D("audiostart")),Ke=!0),Fe||(de.dispatchEvent(new D("soundstart")),Fe=!0),$e||(de.dispatchEvent(new D("speechstart")),$e=!0),!Je){Re.next=60;break}if(Kt=(0,p.default)(Je.result,{maxAlternatives:de.maxAlternatives,textNormalization:W}),Gt=!!Kt[0].transcript,Gt&&(re=[].concat((0,r.default)(re),[Kt]),de.continuous&&de.dispatchEvent(new D("result",{results:re}))),de.continuous&&Gt?U=null:U={results:re,type:"result"},!(!de.continuous&&te.stopContinuousRecognitionAsync)){Re.next=57;break}return Re.next=57,K(te.stopContinuousRecognitionAsync.bind(te))();case 57:b&&U&&Gt&&(de.dispatchEvent(new D(U.type,U)),U=null),Re.next=61;break;case 60:_t&&de.interimResults&&de.dispatchEvent(new D("result",{results:[].concat((0,r.default)(re),[(0,p.default)(_t.result,{maxAlternatives:de.maxAlternatives,textNormalization:W})])}));case 61:case"end":return Re.stop()}},Ie)}),ce=0;case 24:if(!(!it||Ke)){Ce.next=32;break}return Ce.delegateYield(fe(ce),"t0",26);case 26:if(ve=Ce.t0,ve!=="break"){Ce.next=29;break}return Ce.abrupt("break",32);case 29:ce++,Ce.next=24;break;case 32:$e&&this.dispatchEvent(new D("speechend")),Fe&&this.dispatchEvent(new D("soundend")),Ke&&this.dispatchEvent(new D("audioend")),U&&(U.type==="result"&&!U.results.length&&(U={error:"no-speech",type:"error"}),U.type==="error"?this.dispatchEvent(new ErrorEvent("error",U)):this.dispatchEvent(new D(U.type,U))),this.dispatchEvent(new D("end")),mt(),Ce.next=44;break;case 40:throw Ce.prev=40,Ce.t1=Ce.catch(4),console.error(Ce.t1),Ce.t1;case 44:return Ce.prev=44,Be(),te.dispose(),Ce.finish(44);case 48:case"end":return Ce.stop()}},ge,this,[[4,40,44,48]])}));function X(){return Q.apply(this,arguments)}return X}()}]),Se}(l.EventTarget);return{SpeechGrammarList:f.default,SpeechRecognition:F,SpeechRecognitionEvent:D}}var j=function(z){var I=(0,h.default)(z),b=I.audioConfig,L=b===void 0?C.fromDefaultMicrophoneInput():b,W=I.enableTelemetry,F=W===void 0?!0:W,ie=I.fetchCredentials,J=I.looseEvents,Se=I.referenceGrammars,Q=I.speechRecognitionEndpointId,X=I.textNormalization,ge=X===void 0?"display":X;if(!L&&(!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia))return console.warn("web-speech-cognitive-services: This browser does not support WebRTC and it will not work with Cognitive Services Speech Services."),{};var de=function(){var te=(0,i.default)(t.default.mark(function qe(Ee){var Be,oe,Fe,$e,it,he,mt;return t.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,ie();case 2:return Be=_e.sent,oe=Be.authorizationToken,Fe=Be.region,$e=Be.speechRecognitionHostname,it=Be.subscriptionKey,$e?(mt={hostname:$e,port:443,protocol:"wss:"},oe?(he=R.fromHost(mt),he.authorizationToken=oe):he=R.fromHost(mt,it)):he=oe?R.fromAuthorizationToken(oe,Fe):R.fromSubscription(it,Fe),Q&&(he.endpointId=Q),he.outputFormat=P.Detailed,he.speechRecognitionLanguage=Ee||"en-US",_e.abrupt("return",new T(he,L));case 12:case"end":return _e.stop()}},qe)}));return function(Ee){return te.apply(this,arguments)}}();return w({audioConfig:L,createRecognizer:de,enableTelemetry:F,looseEvents:J,referenceGrammars:Se,textNormalization:ge})};return Si.default=j,Si}var HI;function W2(){return HI||(HI=1,function(e){var t=Rc();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createSpeechRecognitionPonyfillFromRecognizer",{enumerable:!0,get:function(){return r.createSpeechRecognitionPonyfillFromRecognizer}}),e.default=void 0;var r=i(V2());function n(s){if(typeof WeakMap!="function")return null;var a=new WeakMap,u=new WeakMap;return(n=function(l){return l?u:a})(s)}function i(s,a){if(s&&s.__esModule)return s;if(s===null||t(s)!=="object"&&typeof s!="function")return{default:s};var u=n(a);if(u&&u.has(s))return u.get(s);var c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in s)if(p!=="default"&&Object.prototype.hasOwnProperty.call(s,p)){var d=l?Object.getOwnPropertyDescriptor(s,p):null;d&&(d.get||d.set)?Object.defineProperty(c,p,d):c[p]=s[p]}return c.default=s,u&&u.set(s,c),c}var o=r.default;e.default=o}(dd)),dd}var bu={},Ou={},rl={exports:{}},KI;function $2(){return KI||(KI=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{var o=n.call(i);return typeof o.then=="function"?new Promise(function(s){o.then(s,function(){return s()})}):o}catch{}}e.exports=t.default,e.exports.default=t.default}(rl,rl.exports)),rl.exports}var ku={},GI=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function H2(e,t){return!!(e===t||GI(e)&&GI(t))}function K2(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!H2(e[r],t[r]))return!1;return!0}function G2(e,t){t===void 0&&(t=K2);var r=null;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var s=e.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}const J2=Object.freeze(Object.defineProperty({__proto__:null,default:G2},Symbol.toStringTag,{value:"Module"})),Q2=wm(J2);var Mu={},JI;function Y2(){if(JI)return Mu;JI=1;var e=rt;Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.default=void 0;var t=e(Rr()),r=e(Pr()),n=e(Vr()),i=e(Ur()),o=function(){function s(a){(0,n.default)(this,s),this.audioContext=a}return(0,i.default)(s,[{key:"pause",value:function(){this.audioContext&&this.audioContext.suspend(),this.playingUtterance&&this.playingUtterance.dispatchEvent(new CustomEvent("pause"))}},{key:"resume",value:function(){this.audioContext&&this.audioContext.resume(),this.playingUtterance&&this.playingUtterance.dispatchEvent(new CustomEvent("resume"))}},{key:"start",value:function(){var a=(0,r.default)(t.default.mark(function c(l){var p;return t.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(p=l.shift())){h.next=7;break}return this.playingUtterance=p,h.next=4,p.play(this.audioContext);case 4:this.playingUtterance=null,h.next=0;break;case 7:case"end":return h.stop()}},c,this)}));function u(c){return a.apply(this,arguments)}return u}()},{key:"stop",value:function(){this.playingUtterance&&this.playingUtterance.stop(),this.audioContext.state==="suspended"&&this.audioContext.resume()}}]),s}();return Mu.default=o,Mu}var QI;function X2(){if(QI)return ku;QI=1;var e=rt;Object.defineProperty(ku,"__esModule",{value:!0}),ku.default=void 0;var t=e(Rr()),r=e(Pr()),n=e(Vr()),i=e(Ur()),o=e(Q2),s=e(Y2()),a=function(){function u(c){var l=c.audioContext,p=c.ponyfill;(0,n.default)(this,u),this.consumer=null,this.paused=!1,this.queue=[],this.getAudioContext=(0,o.default)(function(){return l||new p.AudioContext})}return(0,i.default)(u,[{key:"pause",value:function(){this.paused=!0,this.consumer&&this.consumer.pause()}},{key:"push",value:function(l){this.queue.push(l),this.startConsumer()}},{key:"resume",value:function(){this.paused=!1,this.consumer?this.consumer.resume():this.startConsumer()}},{key:"speaking",get:function(){return!!this.consumer}},{key:"startConsumer",value:function(){var c=(0,r.default)(t.default.mark(function p(){return t.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!this.paused&&this.queue.length&&!this.consumer)){h.next=7;break}return this.consumer=new s.default(this.getAudioContext()),h.next=4,this.consumer.start(this.queue);case 4:this.consumer=null,h.next=0;break;case 7:case"end":return h.stop()}},p,this)}));function l(){return c.apply(this,arguments)}return l}()},{key:"stop",value:function(){this.queue.splice(0),this.consumer&&this.consumer.stop()}}]),u}();return ku.default=a,ku}var nl={},Du={},YI;function wk(){if(YI)return Du;YI=1;var e=rt;Object.defineProperty(Du,"__esModule",{value:!0}),Du.default=void 0;var t=e(Vr()),r=e(Ur()),n=function(){function i(o){var s=o.gender,a=o.lang,u=o.voiceURI;(0,t.default)(this,i),this._default=!1,this._gender=s,this._lang=a,this._localService=!1,this._name=u,this._voiceURI=u}return(0,r.default)(i,[{key:"default",get:function(){return this._default}},{key:"gender",get:function(){return this._gender}},{key:"lang",get:function(){return this._lang}},{key:"localService",get:function(){return this._localService}},{key:"name",get:function(){return this._name}},{key:"voiceURI",get:function(){return this._voiceURI}}]),i}();return Du.default=n,Du}var XI;function Z2(){if(XI)return nl;XI=1;var e=rt;Object.defineProperty(nl,"__esModule",{value:!0}),nl.default=s;var t=e(Rr()),r=e(Pr()),n=e(wk());function i(u){return o.apply(this,arguments)}function o(){return o=(0,r.default)(t.default.mark(function u(c){var l,p,d,h,f,v;return t.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return l=c.customVoiceHostname,p=c.deploymentId,d=c.region,h=c.subscriptionKey,f=l||"".concat(d,".customvoice.api.speech.microsoft.com"),g.next=4,fetch("https://".concat(encodeURI(f),"/api/texttospeech/v2.0/endpoints/").concat(encodeURIComponent(p)),{headers:{accept:"application/json","ocp-apim-subscription-key":h}});case 4:if(v=g.sent,v.ok){g.next=7;break}throw new Error("Failed to fetch custom voices");case 7:return g.abrupt("return",v.json());case 8:case"end":return g.stop()}},u)})),o.apply(this,arguments)}function s(u){return a.apply(this,arguments)}function a(){return a=(0,r.default)(t.default.mark(function u(c){var l,p,d,h,f,v;return t.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return l=c.customVoiceHostname,p=c.deploymentId,d=c.region,h=c.subscriptionKey,g.next=3,i({customVoiceHostname:l,deploymentId:p,region:d,subscriptionKey:h});case 3:return f=g.sent,v=f.models,g.abrupt("return",v.map(function(m){var S=m.properties.Gender,C=m.locale,P=m.name;return new n.default({gender:S,lang:C,voiceURI:P})}).sort(function(m,S){var C=m.name,P=S.name;return C>P?1:C<P?-1:0}));case 6:case"end":return g.stop()}},u)})),a.apply(this,arguments)}return nl}var il={},ZI;function eB(){if(ZI)return il;ZI=1;var e=rt;Object.defineProperty(il,"__esModule",{value:!0}),il.default=a;var t=e(Rr()),r=e(Rn()),n=e(Pr()),i=e(wk());function o(c,l){var p=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);l&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),p.push.apply(p,d)}return p}function s(c){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?o(Object(p),!0).forEach(function(d){(0,r.default)(c,d,p[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(p)):o(Object(p)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(p,d))})}return c}function a(c){return u.apply(this,arguments)}function u(){return u=(0,n.default)(t.default.mark(function c(l){var p,d,h,f,v,y,g;return t.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p=l.authorizationToken,d=l.region,h=l.speechSynthesisHostname,f=l.subscriptionKey,v=h||"".concat(encodeURI(d),".tts.speech.microsoft.com"),S.next=4,fetch("https://".concat(v,"/cognitiveservices/voices/list"),{headers:s({"content-type":"application/json"},p?{authorization:"Bearer ".concat(p)}:{"Ocp-Apim-Subscription-Key":f})});case 4:if(y=S.sent,y.ok){S.next=7;break}throw new Error("Failed to fetch voices");case 7:return S.next=9,y.json();case 9:return g=S.sent,S.abrupt("return",g.map(function(C){var P=C.Gender,E=C.Locale,R=C.Name;return new i.default({gender:P,lang:E,voiceURI:R})}).sort(function(C,P){var E=C.name,R=P.name;return E>R?1:E<R?-1:0}));case 11:case"end":return S.stop()}},c)})),u.apply(this,arguments)}return il}var Nu={},e0;function _k(){if(e0)return Nu;e0=1;var e=rt;Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.default=void 0;var t=e(Ur()),r=e(Vr()),n=e(Pc()),i=e(Ec()),o=e(hi()),s=yp();function a(l){var p=u();return function(){var h=(0,o.default)(l),f;if(p){var v=(0,o.default)(this).constructor;f=Reflect.construct(h,arguments,v)}else f=h.apply(this,arguments);return(0,i.default)(this,f)}}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var c=function(l){(0,n.default)(d,l);var p=a(d);function d(h){return(0,r.default)(this,d),p.call(this,h)}return(0,t.default)(d)}(s.Event);return Nu.default=c,Nu}var ju={},ol={exports:{}},yg,t0;function tB(){return t0||(t0=1,yg=function(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}),yg}var r0;function rB(){return r0||(r0=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(tB());function n(u){return u&&u.__esModule?u:{default:u}}function i(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}function o(u,c){for(var l=0;l<c.length;l++){var p=c[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}function s(u,c,l){return c&&o(u.prototype,c),u}var a=function(){function u(){var c=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,u),this.defers=[],this.upcomingDeferred=null,this.eventListener=this.eventListener.bind(this),this.options=l,this.one=this.one.bind(this),this.upcoming=this.upcoming.bind(this),this[Symbol.iterator]=function(){return{next:function(){return{done:!1,value:c.upcoming()}}}}}return s(u,[{key:"eventListener",value:function(l){var p=this.defers.shift(),d=this.options.array?[].slice.call(arguments):l;p&&p.resolve(d),this.upcomingDeferred&&(this.upcomingDeferred.resolve(d),this.upcomingDeferred=null)}},{key:"one",value:function(){var l=(0,r.default)();return this.defers.push(l),l.promise}},{key:"upcoming",value:function(){return this.upcomingDeferred||(this.upcomingDeferred=(0,r.default)()),this.upcomingDeferred.promise}}]),u}();t.default=a,e.exports=t.default,e.exports.default=t.default}(ol,ol.exports)),ol.exports}var sl={},Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var al=0;al<Di.length;al++)Fu[Di.charCodeAt(al)]=al;var nB=function(e){var t=new Uint8Array(e),r,n=t.length,i="";for(r=0;r<n;r+=3)i+=Di[t[r]>>2],i+=Di[(t[r]&3)<<4|t[r+1]>>4],i+=Di[(t[r+1]&15)<<2|t[r+2]>>6],i+=Di[t[r+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i},iB=function(e){var t=e.length*.75,r=e.length,n,i=0,o,s,a,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var c=new ArrayBuffer(t),l=new Uint8Array(c);for(n=0;n<r;n+=4)o=Fu[e.charCodeAt(n)],s=Fu[e.charCodeAt(n+1)],a=Fu[e.charCodeAt(n+2)],u=Fu[e.charCodeAt(n+3)],l[i++]=o<<2|s>>4,l[i++]=(s&15)<<4|a>>2,l[i++]=(a&3)<<6|u&63;return c};const oB=Object.freeze(Object.defineProperty({__proto__:null,decode:iB,encode:nB},Symbol.toStringTag,{value:"Module"})),sB=wm(oB);var ul={},n0;function aB(){if(n0)return ul;n0=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.default=t;function e(r){var n=Math.round((r-1)*100);return n>=0&&(n="+"+n),n+"%"}function t(r){var n=r.lang,i=r.pitch,o=i===void 0?1:i,s=r.rate,a=s===void 0?1:s,u=r.text,c=r.voice,l=r.volume;return'<speak version="1.0" xml:lang="'.concat(n,`">
  <voice xml:lang="`).concat(n,'" name="').concat(c,`">
    <prosody pitch="`).concat(e(o),'" rate="').concat(e(a),'" volume="').concat(e(l),`">
      `).concat(u,`
    </prosody>
  </voice>
</speak>`)}return ul}var cl={},i0;function uB(){if(i0)return cl;i0=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.default=r;var e=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*<speak([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|\/?>)/,t=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*<\?xml[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/;function r(n){return e.test(n)||t.test(n)}return cl}var o0;function cB(){if(o0)return sl;o0=1;var e=rt;Object.defineProperty(sl,"__esModule",{value:!0}),sl.default=h;var t=e(Rr()),r=e(Rn()),n=e(Pr()),i=sB,o=e(aB()),s=e(uB());function a(v,y){var g=Object.keys(v);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(v);y&&(m=m.filter(function(S){return Object.getOwnPropertyDescriptor(v,S).enumerable})),g.push.apply(g,m)}return g}function u(v){for(var y=1;y<arguments.length;y++){var g=arguments[y]!=null?arguments[y]:{};y%2?a(Object(g),!0).forEach(function(m){(0,r.default)(v,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(g)):a(Object(g)).forEach(function(m){Object.defineProperty(v,m,Object.getOwnPropertyDescriptor(g,m))})}return v}var c="en-US",l="riff-16khz-16bit-mono-pcm",p="Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)",d="SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMQAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU3LjY0AAAAAAAAAAAAAAAAJAUHAAAAAAAAAYYoRBqpAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMQpg8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";function h(v){return f.apply(this,arguments)}function f(){return f=(0,n.default)(t.default.mark(function v(y){var g,m,S,C,P,E,R,T,B,q,K,D,_,w,j,O,z,I,b,L,W,F;return t.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(g=y.deploymentId,m=y.fetchCredentials,S=y.lang,C=S===void 0?c:S,P=y.outputFormat,E=P===void 0?l:P,R=y.pitch,T=y.rate,B=y.text,q=y.voice,K=q===void 0?p:q,D=y.volume,B){J.next=3;break}return J.abrupt("return",(0,i.decode)(d));case 3:return J.next=5,m();case 5:if(_=J.sent,w=_.authorizationToken,j=_.region,O=_.speechSynthesisHostname,z=_.subscriptionKey,!(w&&z||!w&&!z)){J.next=14;break}throw new Error('Only "authorizationToken" or "subscriptionKey" should be set.');case 14:if(!(j&&O||!j&&!O)){J.next=16;break}throw new Error('Only "region" or "speechSynthesisHostnamename" should be set.');case 16:return I=(0,s.default)(B)?B:(0,o.default)({lang:C,pitch:R,rate:T,text:B,voice:K,volume:D}),b=O||(g?"".concat(encodeURI(j),".voice.speech.microsoft.com"):"".concat(encodeURI(j),".tts.speech.microsoft.com")),L=g?"?deploymentId=".concat(encodeURI(g)):"",W="https://".concat(b,"/cognitiveservices/v1").concat(L),J.next=22,fetch(W,{headers:u({"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":E},w?{Authorization:"Bearer ".concat(w)}:{"Ocp-Apim-Subscription-Key":z}),method:"POST",body:I});case 22:if(F=J.sent,F.ok){J.next=25;break}throw new Error("web-speech-cognitive-services: Failed to syntheis speech, server returned ".concat(F.status));case 25:return J.abrupt("return",F.arrayBuffer());case 26:case"end":return J.stop()}},v)})),f.apply(this,arguments)}return sl}var ll={},s0;function lB(){if(s0)return ll;s0=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.default=e;function e(t,r,n){return t.addEventListener(r,n),function(){return t.removeEventListener(r,n)}}return ll}var a0;function pB(){if(a0)return ju;a0=1;var e=rt;Object.defineProperty(ju,"__esModule",{value:!0}),ju.default=void 0;var t=e(Rr()),r=e(Pr()),n=e(Vr()),i=e(Ur()),o=e(Pc()),s=e(Ec()),a=e(hi()),u=yp(),c=e(rB()),l=e(cB()),p=e(_k()),d=e(lB());function h(S){var C=f();return function(){var E=(0,a.default)(S),R;if(C){var T=(0,a.default)(this).constructor;R=Reflect.construct(E,arguments,T)}else R=E.apply(this,arguments);return(0,s.default)(this,R)}}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(S,C){return new Promise(function(P,E){var R=S.decodeAudioData(C,P,E);R&&typeof R.then=="function"&&P(R)})}function y(S,C,P){return new Promise(function(E,R){var T=new c.default,B=new c.default,q=(0,d.default)(S,"statechange",function(K){var D=K.target.state;return D==="closed"&&T.eventListener()});try{P.buffer=C,P.onended=B.eventListener,P.connect(S.destination),P.start(0),Promise.race([T.upcoming(),B.upcoming()]).then(E)}catch(K){R(K)}finally{q()}})}var g=function(S){(0,o.default)(P,S);var C=h(P);function P(E){var R;return(0,n.default)(this,P),R=C.call(this),R._lang=null,R._pitch=1,R._rate=1,R._voice=null,R._volume=1,R.text=E,R.onboundary=null,R.onend=null,R.onerror=null,R.onmark=null,R.onpause=null,R.onresume=null,R.onstart=null,R}return(0,i.default)(P,[{key:"lang",get:function(){return this._lang},set:function(R){this._lang=R}},{key:"onboundary",get:function(){return(0,u.getEventAttributeValue)(this,"boundary")},set:function(R){(0,u.setEventAttributeValue)(this,"boundary",R)}},{key:"onend",get:function(){return(0,u.getEventAttributeValue)(this,"end")},set:function(R){(0,u.setEventAttributeValue)(this,"end",R)}},{key:"onerror",get:function(){return(0,u.getEventAttributeValue)(this,"error")},set:function(R){(0,u.setEventAttributeValue)(this,"error",R)}},{key:"onmark",get:function(){return(0,u.getEventAttributeValue)(this,"mark")},set:function(R){(0,u.setEventAttributeValue)(this,"mark",R)}},{key:"onpause",get:function(){return(0,u.getEventAttributeValue)(this,"pause")},set:function(R){(0,u.setEventAttributeValue)(this,"pause",R)}},{key:"onresume",get:function(){return(0,u.getEventAttributeValue)(this,"resume")},set:function(R){(0,u.setEventAttributeValue)(this,"resume",R)}},{key:"onstart",get:function(){return(0,u.getEventAttributeValue)(this,"start")},set:function(R){(0,u.setEventAttributeValue)(this,"start",R)}},{key:"pitch",get:function(){return this._pitch},set:function(R){this._pitch=R}},{key:"rate",get:function(){return this._rate},set:function(R){this._rate=R}},{key:"voice",get:function(){return this._voice},set:function(R){this._voice=R}},{key:"volume",get:function(){return this._volume},set:function(R){this._volume=R}},{key:"preload",value:function(R){var T=R.deploymentId,B=R.fetchCredentials,q=R.outputFormat;this.arrayBufferPromise=(0,l.default)({fetchCredentials:B,deploymentId:T,lang:this.lang||window.navigator.language,outputFormat:q,pitch:this.pitch,rate:this.rate,text:this.text,voice:this.voice&&this.voice.voiceURI,volume:this.volume}),this.arrayBufferPromise.catch()}},{key:"play",value:function(){var E=(0,r.default)(t.default.mark(function T(B){var q,K;return t.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,this.dispatchEvent(new p.default("start")),q=B.createBufferSource(),_.t0=v,_.t1=B,_.next=7,this.arrayBufferPromise;case 7:return _.t2=_.sent,_.next=10,(0,_.t0)(_.t1,_.t2);case 10:return K=_.sent,this._playingSource=q,_.next=14,y(B,K,q);case 14:this._playingSource=null,this.dispatchEvent(new p.default("end")),_.next=21;break;case 18:_.prev=18,_.t3=_.catch(0),this.dispatchEvent(new ErrorEvent("error",{error:"synthesis-failed",message:_.t3.stack}));case 21:case"end":return _.stop()}},T,this,[[0,18]])}));function R(T){return E.apply(this,arguments)}return R}()},{key:"stop",value:function(){this._playingSource&&this._playingSource.stop()}}]),P}(u.EventTarget),m=g;return ju.default=m,ju}var u0;function dB(){if(u0)return Ou;u0=1;var e=rt;Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.default=void 0;var t=e(Rr()),r=e(Pr()),n=e(Vr()),i=e(Ur()),o=e(Pc()),s=e(Ec()),a=e(hi()),u=yp(),c=e(Pk()),l=e($2()),p=e(X2()),d=e(Z2()),h=e(eB()),f=e(Ek()),v=e(_k()),y=e(pB());function g(E){var R=m();return function(){var B=(0,a.default)(E),q;if(R){var K=(0,a.default)(this).constructor;q=Reflect.construct(B,arguments,K)}else q=B.apply(this,arguments);return(0,s.default)(this,q)}}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var S="audio-24khz-160kbitrate-mono-mp3",C=[],P=function(R){var T=(0,f.default)(R),B=T.audioContext,q=T.fetchCredentials,K=T.ponyfill,D=K===void 0?{AudioContext:window.AudioContext||window.webkitAudioContext}:K,_=T.speechSynthesisDeploymentId,w=T.speechSynthesisOutputFormat,j=w===void 0?S:w;if(!B&&!D.AudioContext)return console.warn("web-speech-cognitive-services: This browser does not support Web Audio and it will not work with Cognitive Services Speech Services."),{};var O=function(z){(0,o.default)(b,z);var I=g(b);function b(){var L;return(0,n.default)(this,b),L=I.call(this),L.queue=new p.default({audioContext:B,ponyfill:D}),L.updateVoices(),L}return(0,i.default)(b,[{key:"cancel",value:function(){this.queue.stop()}},{key:"getVoices",value:function(){return C}},{key:"onvoiceschanged",get:function(){return(0,u.getEventAttributeValue)(this,"voiceschanged")},set:function(W){(0,u.setEventAttributeValue)(this,"voiceschanged",W)}},{key:"pause",value:function(){this.queue.pause()}},{key:"resume",value:function(){this.queue.resume()}},{key:"speak",value:function(W){if(!(W instanceof y.default))throw new Error("invalid utterance");var F=(0,c.default)(),ie=F.reject,J=F.resolve,Se=F.promise,Q=function(ge){var de=ge.error,te=ge.message,qe=new Error(de);qe.stack=te,ie(qe)};return W.addEventListener("end",J),W.addEventListener("error",Q),W.preload({deploymentId:_,fetchCredentials:q,outputFormat:j}),this.queue.push(W),Se.finally(function(){W.removeEventListener("end",J),W.removeEventListener("error",Q)})}},{key:"speaking",get:function(){return this.queue.speaking}},{key:"updateVoices",value:function(){var L=(0,r.default)(t.default.mark(function F(){var ie=this,J,Se,Q,X,ge;return t.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,q();case 2:if(J=te.sent,Se=J.customVoiceHostname,Q=J.region,X=J.speechSynthesisHostname,ge=J.subscriptionKey,!_){te.next=14;break}if(!ge){te.next=12;break}return console.warn("web-speech-cognitive-services: Listing of custom voice models are only available when using subscription key."),te.next=12,(0,l.default)((0,r.default)(t.default.mark(function qe(){var Ee;return t.default.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,d.default)({customVoiceHostname:Se,deploymentId:_,region:Q,speechSynthesisHostname:X,subscriptionKey:ge});case 2:Ee=oe.sent,ie.getVoices=function(){return Ee};case 4:case"end":return oe.stop()}},qe)})));case 12:te.next=16;break;case 14:return te.next=16,(0,l.default)((0,r.default)(t.default.mark(function qe(){var Ee;return t.default.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.t0=h.default,oe.next=3,q();case 3:return oe.t1=oe.sent,oe.next=6,(0,oe.t0)(oe.t1);case 6:Ee=oe.sent,ie.getVoices=function(){return Ee};case 8:case"end":return oe.stop()}},qe)})));case 16:this.dispatchEvent(new v.default("voiceschanged"));case 17:case"end":return te.stop()}},F,this)}));function W(){return L.apply(this,arguments)}return W}()}]),b}(u.EventTarget);return{speechSynthesis:new O,SpeechSynthesisEvent:v.default,SpeechSynthesisUtterance:y.default}};return Ou.default=P,Ou}var c0;function hB(){if(c0)return bu;c0=1;var e=rt;Object.defineProperty(bu,"__esModule",{value:!0}),bu.default=void 0;var t=e(dB()),r=t.default;return bu.default=r,bu}var pl={},l0;function fB(){if(l0)return pl;l0=1;var e=rt;Object.defineProperty(pl,"__esModule",{value:!0}),pl.default=i;var t=e(Rr()),r=e(Pr()),n="https://{region}.api.cognitive.microsoft.com/sts/v1.0/issueToken";function i(s){return o.apply(this,arguments)}function o(){return o=(0,r.default)(t.default.mark(function s(a){var u,c,l;return t.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=a.region,c=a.subscriptionKey,d.next=3,fetch(n.replace(/\{region\}/,u),{headers:{"Ocp-Apim-Subscription-Key":c},method:"POST"});case 3:if(l=d.sent,l.ok){d.next=6;break}throw new Error("Failed to fetch authorization token, server returned ".concat(l.status));case 6:return d.abrupt("return",l.text());case 7:case"end":return d.stop()}},s)})),o.apply(this,arguments)}return pl}var p0;function vB(){return p0||(p0=1,function(e){var t=rt,r=Rc();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createSpeechRecognitionPonyfill",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"createSpeechRecognitionPonyfillFromRecognizer",{enumerable:!0,get:function(){return i.createSpeechRecognitionPonyfillFromRecognizer}}),Object.defineProperty(e,"createSpeechSynthesisPonyfill",{enumerable:!0,get:function(){return o.default}}),e.default=p,Object.defineProperty(e,"fetchAuthorizationToken",{enumerable:!0,get:function(){return s.default}});var n=t(Rn()),i=u(W2()),o=t(hB()),s=t(fB());function a(h){if(typeof WeakMap!="function")return null;var f=new WeakMap,v=new WeakMap;return(a=function(g){return g?v:f})(h)}function u(h,f){if(h&&h.__esModule)return h;if(h===null||r(h)!=="object"&&typeof h!="function")return{default:h};var v=a(f);if(v&&v.has(h))return v.get(h);var y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in h)if(m!=="default"&&Object.prototype.hasOwnProperty.call(h,m)){var S=g?Object.getOwnPropertyDescriptor(h,m):null;S&&(S.get||S.set)?Object.defineProperty(y,m,S):y[m]=h[m]}return y.default=h,v&&v.set(h,y),y}function c(h,f){var v=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);f&&(y=y.filter(function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable})),v.push.apply(v,y)}return v}function l(h){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?c(Object(v),!0).forEach(function(y){(0,n.default)(h,y,v[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):c(Object(v)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(v,y))})}return h}function p(){for(var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length,v=new Array(f>1?f-1:0),y=1;y<f;y++)v[y-1]=arguments[y];var g=l(l({},i.default.apply(void 0,[h].concat(v))),o.default.apply(void 0,[h].concat(v)));return l(l({},g),{},{then:function(S){console.warn("web-speech-cognitive-services: This function no longer need to be called in an asynchronous fashion. Please update your code. We will remove this Promise.then function on or after 2020-08-10."),S(g)}})}var d=document.createElement("meta");d.setAttribute("name","web-speech-cognitive-services"),d.setAttribute("content","version=".concat("7.1.3")),document.head.appendChild(d)}(cd)),cd}var gB=rt;Object.defineProperty(Ry,"__esModule",{value:!0});var Tk=Ry.default=void 0,mB=gB(vB()),yB=mB.default;Tk=Ry.default=yB;var Wy={},Ik={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.browserSupportsPolyfills=It.compareTwoStringsUsingDiceCoefficient=It.commandToRegExp=It.concatTranscripts=It.debounce=void 0;var SB=function(t,r,n){var i;return function(){var o=this,s=arguments,a=function(){i=null,n||t.apply(o,s)},u=n&&!i;clearTimeout(i),i=setTimeout(a,r),u&&t.apply(o,s)}};It.debounce=SB;var CB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.map(function(i){return i.trim()}).join(" ").trim()};It.concatTranscripts=CB;var RB=/\s*\((.*?)\)\s*/g,PB=/(\(\?:[^)]+\))\?/g,EB=/(\(\?)?:\w+/g,wB=/\*/g,_B=/[-{}[\]+?.,\\^$|#]/g,TB=function(t){return t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(_B,"\\$&").replace(RB,"(?:$1)?").replace(EB,function(r,n){return n?r:"([^\\s]+)"}).replace(wB,"(.*?)").replace(PB,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i"))};It.commandToRegExp=TB;var IB=function(t,r){if(t=t.replace(/\s+/g,"").toLowerCase(),r=r.replace(/\s+/g,"").toLowerCase(),!t.length&&!r.length)return 1;if(!t.length||!r.length)return 0;if(t===r)return 1;if(t.length===1&&r.length===1||t.length<2||r.length<2)return 0;for(var n=new Map,i=0;i<t.length-1;i++){var o=t.substring(i,i+2),s=n.has(o)?n.get(o)+1:1;n.set(o,s)}for(var a=0,u=0;u<r.length-1;u++){var c=r.substring(u,u+2),l=n.has(c)?n.get(c):0;l>0&&(n.set(c,l-1),a++)}return 2*a/(t.length+r.length-2)};It.compareTwoStringsUsingDiceCoefficient=IB;var AB=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};It.browserSupportsPolyfills=AB;var Ki={},ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.APPEND_TRANSCRIPT=ci.CLEAR_TRANSCRIPT=void 0;var bB="CLEAR_TRANSCRIPT";ci.CLEAR_TRANSCRIPT=bB;var OB="APPEND_TRANSCRIPT";ci.APPEND_TRANSCRIPT=OB;Object.defineProperty(Ki,"__esModule",{value:!0});Ki.appendTranscript=Ki.clearTranscript=void 0;var Ak=ci,kB=function(){return{type:Ak.CLEAR_TRANSCRIPT}};Ki.clearTranscript=kB;var MB=function(t,r){return{type:Ak.APPEND_TRANSCRIPT,payload:{interimTranscript:t,finalTranscript:r}}};Ki.appendTranscript=MB;var Np={};Object.defineProperty(Np,"__esModule",{value:!0});Np.transcriptReducer=void 0;var d0=ci,DB=It,NB=function(t,r){switch(r.type){case d0.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case d0.APPEND_TRANSCRIPT:return{interimTranscript:r.payload.interimTranscript,finalTranscript:(0,DB.concatTranscripts)(t.finalTranscript,r.payload.finalTranscript)};default:throw new Error}};Np.transcriptReducer=NB;var bk={},$y={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=t})($y);var Hy={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var t=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),r=function(o){return o===t};e.isNative=r;var n=t;e.default=n})(Hy);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i($y),r=It,n=Hy;function i(p){return p&&p.__esModule?p:{default:p}}function o(p,d,h,f,v,y,g){try{var m=p[y](g),S=m.value}catch(C){h(C);return}m.done?d(S):Promise.resolve(S).then(f,v)}function s(p){return function(){var d=this,h=arguments;return new Promise(function(f,v){var y=p.apply(d,h);function g(S){o(y,f,v,g,m,"next",S)}function m(S){o(y,f,v,g,m,"throw",S)}g(void 0)})}}function a(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function u(p,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(p,f.key,f)}}function c(p,d,h){return d&&u(p.prototype,d),p}var l=function(){function p(d){a(this,p),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(d),(0,t.default)()&&(this.updateFinalTranscript=(0,r.debounce)(this.updateFinalTranscript,250,!0))}return c(p,[{key:"setSpeechRecognition",value:function(h){var f=!!h&&((0,n.isNative)(h)||(0,r.browserSupportsPolyfills)());f&&(this.disableRecognition(),this.recognition=new h,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(f)}},{key:"subscribe",value:function(h,f){this.subscribers[h]=f}},{key:"unsubscribe",value:function(h){delete this.subscribers[h]}},{key:"emitListeningChange",value:function(h){var f=this;this.listening=h,Object.keys(this.subscribers).forEach(function(v){var y=f.subscribers[v].onListeningChange;y(h)})}},{key:"emitMicrophoneAvailabilityChange",value:function(h){var f=this;this.isMicrophoneAvailable=h,Object.keys(this.subscribers).forEach(function(v){var y=f.subscribers[v].onMicrophoneAvailabilityChange;y(h)})}},{key:"emitTranscriptChange",value:function(h,f){var v=this;Object.keys(this.subscribers).forEach(function(y){var g=v.subscribers[y].onTranscriptChange;g(h,f)})}},{key:"emitClearTranscript",value:function(){var h=this;Object.keys(this.subscribers).forEach(function(f){var v=h.subscribers[f].onClearTranscript;v()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(h){var f=this;Object.keys(this.subscribers).forEach(function(v){var y=f.subscribers[v],g=y.onBrowserSupportsSpeechRecognitionChange,m=y.onBrowserSupportsContinuousListeningChange;g(h),m(h)})}},{key:"disconnect",value:function(h){if(this.recognition&&this.listening)switch(h){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(h){h&&h.error&&h.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(h){var f=h.results,v=h.resultIndex,y=v===void 0?f.length-1:v;this.interimTranscript="",this.finalTranscript="";for(var g=y;g<f.length;++g)f[g].isFinal&&(!(0,t.default)()||f[g][0].confidence>0)?this.updateFinalTranscript(f[g][0].transcript):this.interimTranscript=(0,r.concatTranscripts)(this.interimTranscript,f[g][0].transcript);var m=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(m=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,m||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(h){this.finalTranscript=(0,r.concatTranscripts)(this.finalTranscript,h)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var d=s(regeneratorRuntime.mark(function f(){var v,y,g,m,S,C,P=arguments;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(v=P.length>0&&P[0]!==void 0?P[0]:{},y=v.continuous,g=y===void 0?!1:y,m=v.language,this.recognition){R.next=3;break}return R.abrupt("return");case 3:if(S=g!==this.recognition.continuous,C=m&&m!==this.recognition.lang,!(S||C)){R.next=11;break}if(!this.listening){R.next=9;break}return R.next=9,this.stopListening();case 9:this.recognition.continuous=S?g:this.recognition.continuous,this.recognition.lang=C?m:this.recognition.lang;case 11:if(this.listening){R.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),R.prev=13,R.next=16,this.start();case 16:this.emitListeningChange(!0),R.next=22;break;case 19:R.prev=19,R.t0=R.catch(13),R.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return R.stop()}},f,this,[[13,19]])}));function h(){return d.apply(this,arguments)}return h}()},{key:"abortListening",value:function(){var d=s(regeneratorRuntime.mark(function f(){var v=this;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),g.next=4,new Promise(function(m){v.onStopListening=m});case 4:case"end":return g.stop()}},f,this)}));function h(){return d.apply(this,arguments)}return h}()},{key:"stopListening",value:function(){var d=s(regeneratorRuntime.mark(function f(){var v=this;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),g.next=4,new Promise(function(m){v.onStopListening=m});case 4:case"end":return g.stop()}},f,this)}));function h(){return d.apply(this,arguments)}return h}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var d=s(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(this.recognition&&!this.listening)){y.next=4;break}return y.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return y.stop()}},f,this)}));function h(){return d.apply(this,arguments)}return h}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),p}();e.default=l})(bk);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var t=H,r=It,n=Ki,i=Np,o=u(bk),s=u($y),a=u(Hy);function u(D){return D&&D.__esModule?D:{default:D}}function c(D,_,w,j,O,z,I){try{var b=D[z](I),L=b.value}catch(W){w(W);return}b.done?_(L):Promise.resolve(L).then(j,O)}function l(D){return function(){var _=this,w=arguments;return new Promise(function(j,O){var z=D.apply(_,w);function I(L){c(z,j,O,I,b,"next",L)}function b(L){c(z,j,O,I,b,"throw",L)}I(void 0)})}}function p(D){return f(D)||h(D)||m(D)||d()}function d(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(D){if(typeof Symbol<"u"&&Symbol.iterator in Object(D))return Array.from(D)}function f(D){if(Array.isArray(D))return S(D)}function v(D){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(w){return typeof w}:v=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},v(D)}function y(D,_){return P(D)||C(D,_)||m(D,_)||g()}function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(D,_){if(D){if(typeof D=="string")return S(D,_);var w=Object.prototype.toString.call(D).slice(8,-1);if(w==="Object"&&D.constructor&&(w=D.constructor.name),w==="Map"||w==="Set")return Array.from(D);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return S(D,_)}}function S(D,_){(_==null||_>D.length)&&(_=D.length);for(var w=0,j=new Array(_);w<_;w++)j[w]=D[w];return j}function C(D,_){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(D)))){var w=[],j=!0,O=!1,z=void 0;try{for(var I=D[Symbol.iterator](),b;!(j=(b=I.next()).done)&&(w.push(b.value),!(_&&w.length===_));j=!0);}catch(L){O=!0,z=L}finally{try{!j&&I.return!=null&&I.return()}finally{if(O)throw z}}return w}}function P(D){if(Array.isArray(D))return D}var E=!!a.default,R=E&&!(0,s.default)(),T,B=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=_.transcribing,j=w===void 0?!0:w,O=_.clearTranscriptOnListen,z=O===void 0?!0:O,I=_.commands,b=I===void 0?[]:I,L=(0,t.useState)(q.getRecognitionManager()),W=y(L,1),F=W[0],ie=(0,t.useState)(E),J=y(ie,2),Se=J[0],Q=J[1],X=(0,t.useState)(R),ge=y(X,2),de=ge[0],te=ge[1],qe=(0,t.useReducer)(i.transcriptReducer,{interimTranscript:F.interimTranscript,finalTranscript:""}),Ee=y(qe,2),Be=Ee[0],oe=Be.interimTranscript,Fe=Be.finalTranscript,$e=Ee[1],it=(0,t.useState)(F.listening),he=y(it,2),mt=he[0],He=he[1],_e=(0,t.useState)(F.isMicrophoneAvailable),Ke=y(_e,2),U=Ke[0],re=Ke[1],fe=(0,t.useRef)(b);fe.current=b;var ce=function(){$e((0,n.clearTranscript)())},ve=(0,t.useCallback)(function(){F.resetTranscript(),ce()},[F]),Ge=function(be,Xe,yt){var Je=v(be)==="object"?be.toString():be,_t=Je.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),$t=(0,r.compareTwoStringsUsingDiceCoefficient)(_t,Xe);return $t>=yt?{command:be,commandWithoutSpecials:_t,howSimilar:$t,isFuzzyMatch:!0}:null},Ce=function(be,Xe){var yt=(0,r.commandToRegExp)(be),Je=yt.exec(Xe);return Je?{command:be,parameters:Je.slice(1)}:null},Ie=(0,t.useCallback)(function(Ae,be){fe.current.forEach(function(Xe){var yt=Xe.command,Je=Xe.callback,_t=Xe.matchInterim,$t=_t===void 0?!1:_t,Ht=Xe.isFuzzyMatch,Kt=Ht===void 0?!1:Ht,Gt=Xe.fuzzyMatchingThreshold,gi=Gt===void 0?.8:Gt,Re=Xe.bestMatchOnly,Dt=Re===void 0?!1:Re,Ir=!be&&$t?Ae.trim():be.trim(),fr=Array.isArray(yt)?yt:[yt],Kr=fr.map(function(Qe){return Kt?Ge(Qe,Ir,gi):Ce(Qe,Ir)}).filter(function(Qe){return Qe});if(Kt&&Dt&&Kr.length>=2){Kr.sort(function(Qe,Gr){return Gr.howSimilar-Qe.howSimilar});var _n=Kr[0],mi=_n.command,io=_n.commandWithoutSpecials,Tn=_n.howSimilar;Je(io,Ir,Tn,{command:mi,resetTranscript:ve})}else Kr.forEach(function(Qe){if(Qe.isFuzzyMatch){var Gr=Qe.command,In=Qe.commandWithoutSpecials,oo=Qe.howSimilar;Je(In,Ir,oo,{command:Gr,resetTranscript:ve})}else{var so=Qe.command,ao=Qe.parameters;Je.apply(void 0,p(ao).concat([{command:so,resetTranscript:ve}]))}})})},[ve]),le=(0,t.useCallback)(function(Ae,be){j&&$e((0,n.appendTranscript)(Ae,be)),Ie(Ae,be)},[Ie,j]),se=(0,t.useCallback)(function(){z&&ce()},[z]);(0,t.useEffect)(function(){var Ae=q.counter;q.counter+=1;var be={onListeningChange:He,onMicrophoneAvailabilityChange:re,onTranscriptChange:le,onClearTranscript:se,onBrowserSupportsSpeechRecognitionChange:Q,onBrowserSupportsContinuousListeningChange:te};return F.subscribe(Ae,be),function(){F.unsubscribe(Ae)}},[j,z,F,le,se]);var Ue=(0,r.concatTranscripts)(Fe,oe);return{transcript:Ue,interimTranscript:oe,finalTranscript:Fe,listening:mt,isMicrophoneAvailable:U,resetTranscript:ve,browserSupportsSpeechRecognition:Se,browserSupportsContinuousListening:de}};e.useSpeechRecognition=B;var q={counter:0,applyPolyfill:function(_){T?T.setSpeechRecognition(_):T=new o.default(_);var w=!!_&&(0,r.browserSupportsPolyfills)();E=w,R=w},removePolyfill:function(){T?T.setSpeechRecognition(a.default):T=new o.default(a.default),E=!!a.default,R=E&&!(0,s.default)()},getRecognitionManager:function(){return T||(T=new o.default(a.default)),T},getRecognition:function(){var _=q.getRecognitionManager();return _.getRecognition()},startListening:function(){var D=l(regeneratorRuntime.mark(function w(){var j,O,z,I,b=arguments;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return j=b.length>0&&b[0]!==void 0?b[0]:{},O=j.continuous,z=j.language,I=q.getRecognitionManager(),W.next=4,I.startListening({continuous:O,language:z});case 4:case"end":return W.stop()}},w)}));function _(){return D.apply(this,arguments)}return _}(),stopListening:function(){var D=l(regeneratorRuntime.mark(function w(){var j;return regeneratorRuntime.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return j=q.getRecognitionManager(),z.next=3,j.stopListening();case 3:case"end":return z.stop()}},w)}));function _(){return D.apply(this,arguments)}return _}(),abortListening:function(){var D=l(regeneratorRuntime.mark(function w(){var j;return regeneratorRuntime.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return j=q.getRecognitionManager(),z.next=3,j.abortListening();case 3:case"end":return z.stop()}},w)}));function _(){return D.apply(this,arguments)}return _}(),browserSupportsSpeechRecognition:function(){return E},browserSupportsContinuousListening:function(){return R}},K=q;e.default=K})(Ik);(function(e){function t(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(u){return typeof u}:t=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t(s)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return r.useSpeechRecognition}}),e.default=void 0;var r=i(Ik);function n(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return n=function(){return s},s}function i(s){if(s&&s.__esModule)return s;if(s===null||t(s)!=="object"&&typeof s!="function")return{default:s};var a=n();if(a&&a.has(s))return a.get(s);var u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in s)if(Object.prototype.hasOwnProperty.call(s,l)){var p=c?Object.getOwnPropertyDescriptor(s,l):null;p&&(p.get||p.set)?Object.defineProperty(u,l,p):u[l]=s[l]}return u.default=s,a&&a.set(s,u),u}var o=r.default;e.default=o})(Wy);const Em=f0(Wy),h0={column1:["tree","school","flower","picture","dream","crowd","saucer","canary","smoulder","university","physics","forfeit","colonel","genuine","pneumonia","oblivion","terrestrial","miscellaneous","ineradicable","rescind"],column2:["little","sit","road","think","downstairs","sandwich","angel","attractive","applaud","orchestra","campaign","siege","soloist","institution","preliminary","scintillate","belligerent","procrastinate","judicature","metamorphosis"],column3:["milk","frog","clock","summer","biscuit","beginning","sailing","imagine","disposal","knowledge","choir","pavement","systematic","pivot","antique","satirical","adamant","tyrannical","preferential","somnambulist"],column4:["egg","playing","train","people","shepherd","postage","appeared","nephew","nourished","audience","intercede","plausible","slovenly","conscience","susceptible","sabre","sepulchre","evangelical","homonym","bibliography"],column5:["book","bun","light","something","thirsty","island","knife","gradually","diseased","situated","fascinate","prophecy","classification","heroic","enigma","beguile","statistics","grotesque","fictitious","idiosyncrasy"]},jB=e=>e===0?"30px":e===1?"28px":e===2?"26px":e===3?"24px":e===4?"22px":"20px",zB=()=>N.jsx("div",{style:{display:"flex",flexDirection:"row"},children:Object.keys(h0).map((e,t)=>N.jsx("div",{style:{margin:"0 20px"},children:h0[e].map((r,n)=>N.jsx("div",{style:{margin:"5px 0",fontSize:jB(n)},children:r},n))},t))}),LB="_container_1sypi_1",xB="_giveHeight_1sypi_21",qB="_testBox_1sypi_29",BB="_results_1sypi_49",FB="_buttonBox_1sypi_81",UB="_resultsContainer_1sypi_91",VB="_microphoneStatus_1sypi_159",WB="_micOn_1sypi_175",$B="_micOff_1sypi_181",mr={container:LB,giveHeight:xB,testBox:qB,results:BB,buttonBox:FB,resultsContainer:UB,microphoneStatus:VB,micOn:WB,micOff:$B},HB=({username:e,score:t,age:r,correctWords:n,incorrectWords:i})=>{console.log("Received props:",{username:e,score:t,age:r,correctWords:n,incorrectWords:i});const o=di();H.useEffect(()=>{console.log("Received props:",{username:e,score:t,age:r,correctWords:n,incorrectWords:i})},[e,t,r,n,i]);const s=H.useMemo(()=>(console.log("Table Data Calculation:",{correctWords:n,incorrectWords:i,score:t}),{correctWords:n,incorrectWords:i,score:t}),[n,i,t]);return H.useEffect(()=>{console.log("Table Data:",s)},[s]),N.jsx("div",{className:mr.resultsContainer,children:N.jsxs("div",{className:mr.results,children:[N.jsxs("h1",{children:["Name: ",N.jsx("span",{children:e})]}),N.jsxs("h1",{children:["Score: ",N.jsx("span",{children:t})]}),N.jsxs("h1",{children:["Reading Age: ",N.jsx("span",{children:r})]}),N.jsxs("table",{children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{children:"Correct Words"}),N.jsx("th",{children:"Incorrect Words"}),N.jsx("th",{children:"Score"})]})}),N.jsx("tbody",{children:N.jsxs("tr",{children:[N.jsx("td",{children:s.correctWords.join(", ")}),N.jsx("td",{children:s.incorrectWords.join(", ")}),N.jsx("td",{children:s.score})]})})]}),N.jsx("button",{onClick:()=>o("/home"),children:"Go back"})]})})},KB="89cb06294f424d139909619564deba2d",GB="eastus",{SpeechRecognition:JB}=Tk({credentials:{region:GB,subscriptionKey:KB}});Em.applyPolyfill(JB);function QB(){const[e,t]=H.useState("true");H.useState([]);const[r,n]=H.useState(0),[i,o]=H.useState(0),[s,a]=H.useState(""),u=di(),c=window.innerWidth<=768;H.useEffect(()=>{a(localStorage.getItem("name")),localStorage.getItem("name")===null&&u("/"),localStorage.getItem("token")===""&&u("/")},[u]);const l=()=>Em.startListening({language:"en-IN"}),p=()=>Em.stopListening(),{transcript:d,browserSupportsSpeechRecognition:h,listening:f}=Wy.useSpeechRecognition();if(!h)return N.jsx("span",{children:"Browser doesnt support speech recognition."});const[v,y]=H.useState(null),g=async()=>{console.log("Original Transcript:",d),t(!1);let C=d.split(" ");C=C.filter(B=>B===B.toUpperCase()?(console.log(`Spelt out word detected: ${B}, excluded.`),!1):!0),C=C.map(B=>B.replace(/[^a-zA-Z]/g,"").toLowerCase()),console.log("Cleaned Words Array:",C);const{score:P,age:E,correctWords:R,incorrectWords:T}=await m(C);o(P),n(E),console.log("Final Score:",P),console.log("Reading Age:",E);try{const B=await fetch(`${mp}/api/result/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,score:P,age:E,correctWords:R,incorrectWords:T})});if(B.status===200){const q=await B.json();console.log("Response Data:",q),y(q)}else console.error("Error Response:",B),y({error:"Failed to submit test results"})}catch(B){console.error("Error submitting test results:",B),y({error:"Failed to submit test results"})}},m=async C=>{let P=0,E=[],R=[];const T=XB.flat();for(let q=0;q<C.length;q++){let K=C[q].toLowerCase();T.includes(K)?(P++,E.push(K),console.log(`Matched Word: ${K}, Current Score: ${P}`)):(R.push(K),console.log(`Word "${K}" is either incorrect or out of expected order.`))}const B=S(P);return{score:P,age:B,correctWords:E,incorrectWords:R}},S=C=>{console.log(C);const P=YB.find(E=>E.score===C);return console.log(P),P?P.age:"N/A"};return N.jsxs(N.Fragment,{children:[!c&&N.jsx("div",{className:`${mr.container} ${e?mr.giveHeight:""}`,children:e&&N.jsxs("div",{className:mr.testBox,children:[N.jsxs("p",{className:`${mr.microphoneStatus} ${f?mr.micOn:mr.micOff}`,children:["Microphone is: ",f?"on":"off"]}),N.jsx(zB,{}),N.jsx("div",{children:N.jsxs("div",{className:mr.buttonBox,children:[N.jsx("button",{onClick:l,children:"Start Reading"}),N.jsx("button",{onClick:p,children:"Stop Reading"}),N.jsx("button",{onClick:g,children:"Submit"})]})})]})}),c&&N.jsx("div",{className:mr.mobileContainer,children:N.jsx("h1",{children:"Mobile devices are not supported"})}),!e&&v&&N.jsx(HB,{username:s,score:v?v.score:0,age:r,correctWords:v?v.correctWords:[],incorrectWords:v?v.incorrectWords:[]})]})}const YB=[{score:0,age:"6.0 minus"},{score:1,age:"6.0 minus"},{score:2,age:"6.0"},{score:3,age:"6.2"},{score:4,age:"6.4"},{score:5,age:"6.5"},{score:6,age:"6.6"},{score:7,age:"6.7"},{score:8,age:"6.7"},{score:9,age:"6.8"},{score:10,age:"6.9"},{score:11,age:"6.10"},{score:12,age:"6.10"},{score:13,age:"6.11"},{score:14,age:"6.11"},{score:15,age:"7.0"},{score:16,age:"7.1"},{score:17,age:"7.2"},{score:18,age:"7.2"},{score:19,age:"7.3"},{score:20,age:"7.4"},{score:21,age:"7.4"},{score:22,age:"7.5"},{score:23,age:"7.5"},{score:24,age:"7.6"},{score:25,age:"7.7"},{score:26,age:"7.7"},{score:27,age:"7.8"},{score:28,age:"7.9"},{score:29,age:"7.10"},{score:30,age:"8.0"},{score:31,age:"8.1"},{score:32,age:"8.2"},{score:33,age:"8.3"},{score:34,age:"8.4"},{score:35,age:"8.5"},{score:36,age:"8.6"},{score:37,age:"8.6"},{score:38,age:"8.7"},{score:39,age:"8.8"},{score:40,age:"8.9"},{score:41,age:"8.10"},{score:42,age:"8.11"},{score:43,age:"9.0"},{score:44,age:"9.1"},{score:45,age:"9.2"},{score:46,age:"9.3"},{score:47,age:"9.4"},{score:48,age:"9.5"},{score:49,age:"9.6"},{score:50,age:"9.6"},{score:51,age:"9.7"},{score:52,age:"9.8"},{score:53,age:"9.9"},{score:54,age:"9.10"},{score:55,age:"9.11"},{score:56,age:"10.0"},{score:57,age:"10.1"},{score:58,age:"10.1"},{score:59,age:"10.2"},{score:60,age:"10.3"},{score:61,age:"10.4"},{score:62,age:"10.5"},{score:63,age:"10.6"},{score:64,age:"10.7"},{score:65,age:"10.8"},{score:66,age:"10.9"},{score:67,age:"10.10"},{score:68,age:"11.0"},{score:69,age:"11.1"},{score:70,age:"11.3"},{score:71,age:"11.4"},{score:72,age:"11.5"},{score:73,age:"11.6"},{score:74,age:"11.8"},{score:75,age:"11.10"},{score:76,age:"12.0"},{score:77,age:"12.1"},{score:78,age:"12.2"},{score:79,age:"12.3"},{score:80,age:"12.4"},{score:81,age:"12.5"},{score:82,age:"12.6"},{score:83,age:"12.6+"},{score:84,age:"12.6+"},{score:85,age:"12.6+"},{score:86,age:"12.6+"},{score:87,age:"12.6+"},{score:88,age:"12.6+"},{score:89,age:"12.6+"},{score:90,age:"12.6+"},{score:91,age:"12.6+"},{score:92,age:"12.6+"},{score:93,age:"12.6+"},{score:94,age:"12.6+"},{score:95,age:"12.6+"},{score:96,age:"12.6+"},{score:97,age:"12.6+"},{score:98,age:"12.6+"},{score:99,age:"12.6+"},{score:100,age:"12.6+"}],XB=[["tree","little","milk","egg","book"],["school","sit","frog","playing","bun"],["flower","road","clock","train","light"],["picture","think","summer","people","something"],["dream","downstairs","biscuit","shepherd","thirsty"],["crowd","sandwich","beginning","postage","island"],["saucer","angel","sailing","appeared","knife"],["canary","attractive","imagine","nephew","gradually"],["smoulder","applaud","disposal","nourished","diseased"],["university","orchestra","knowledge","audience","situated"],["physics","campaign","choir","intercede","fascinate"],["forfeit","siege","pavement","plausible","prophecy"],["colonel","soloist","systematic","slovenly","classification"],["genuine","institution","pivot","conscience","heroic"],["pneumonia","preliminary","antique","susceptible","enigma"],["oblivion","scintillate","satirical","sabre","beguile"],["terrestrial","belligerent","adamant","sepulchre","statistics"],["miscellaneous","procrastinate","tyrannical","evangelical","grotesque"],["ineradicable","judicature","preferential","homonym","fictitious"],["rescind","metamorphosis","somnambulist","bibliography","idiosyncrasy"]];function ZB(){return N.jsx(N.Fragment,{children:N.jsxs(YN,{children:[N.jsx(hj,{}),N.jsxs(GN,{children:[N.jsx(Yr,{path:"/",element:N.jsx(aj,{})}),N.jsx(Yr,{path:"/login",element:N.jsx(lj,{})}),N.jsx(Yr,{path:"/signup",element:N.jsx(mj,{})}),N.jsx(Yr,{path:"/home",element:N.jsx(ej,{})}),N.jsx(Yr,{path:"/test",element:N.jsx(QB,{})}),N.jsx(Yr,{path:"/result",element:N.jsx(gj,{})}),N.jsx(Yr,{path:"*",element:N.jsx("h1",{children:"Not Found"})})]})]})})}Sg.createRoot(document.getElementById("root")).render(N.jsx(_0.StrictMode,{children:N.jsx(ZB,{})}));
